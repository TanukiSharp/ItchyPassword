!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";function r(t){return(new TextEncoder).encode(t).buffer}function i(t,e){const n=BigInt(e.length);let r="",i=function(t){const e=t.byteLength,n=new DataView(t,0);let r=0n;for(let t=0;t<e;t+=1)r+=BigInt(n.getUint8(t))*256n**BigInt(t);return r}(t);for(;i>0n;){const t=i%n;i/=n,r+=e[BigInt.asUintN(64,t)]}return r}n.r(e);const a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";new Uint8Array([242,207,239,142,19,64,70,73,146,42,222,92,188,136,56,168]).buffer;async function o(t,e){const n=await crypto.subtle.importKey("raw",t,"PBKDF2",!1,["deriveKey"]),r={name:"PBKDF2",hash:"SHA-512",iterations:1e5,salt:e},i=await crypto.subtle.deriveKey(r,n,{name:"AES-CBC",length:256},!0,["encrypt"]);return await crypto.subtle.exportKey("raw",i)}function u(t=64,e=a){return i(function(t=64){const e=new Uint8Array(t);return crypto.getRandomValues(e).buffer}(t),e)}class s{constructor(t){this.element=t}setText(t,e){this.element.innerHTML=t,this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.element.innerHTML="",e)}}function l(t){const e=document.getElementById(t);if(null===t)throw new Error(`DOM element '${t}' not found.`);return e}const c=l("txtPrivatePart"),d=l("txtPrivatePartConfirmation"),f=l("btnProtect"),p=l("btnClearProtected"),v=l("spnProtectedConfirmation"),y=l("txtPath"),b=l("txtPublicPart"),h=l("btnGeneratePublicPart"),g=l("btnCopyPublicPart"),P=l("spnCopyPublicPartFeedback"),m=l("spnPrivatePartSize"),w=l("spnPrivatePartSizeConfirmation"),L=l("numOutputSizeRange"),S=l("numOutputSizeNum"),T=l("txtAlphabet"),x=l("spnAlphabetSize"),M=l("btnResetAlphabet"),H=l("txtResultPassword"),O=l("spnResultPasswordLength"),k=l("btnCopyResultPassword"),E=l("spnCopyResultPasswordFeedback"),C=l("txtParameters"),j=l("txtCustomKeys"),A=64,I="!\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}~",F="#D0FFD0",B="#FFD0D0",D=["alphabet","length","public"];let K;function R(){return void 0!==K?K:c.value}function z(){0!==c.value.length&&(K=c.value,v.innerHTML=`Protected, ${K.length} characters`,c.value="",d.value="",m.innerHTML="0",w.innerHTML="0",et())}function _(){K=void 0,v.innerHTML=""}L.max=A.toString(),L.value=A.toString(),h.addEventListener("click",()=>{const t=u();b.value=t,Y()}),f.addEventListener("click",()=>{z()}),p.addEventListener("click",()=>{_(),Y()});const N=new s(E),U=new s(P);function V(t,e,n){e.addEventListener("click",async()=>{await async function(t){try{return await navigator.clipboard.writeText(t),!0}catch(t){return console.error(t.stack||t),!1}}(t.value)?n.setText("Copied",3e3):n.setText('<span style="color: red">Failed to copy</span>',3e3)})}function J(){O.innerHTML=H.value.length.toString().padStart(2," ")}function G(t){const e=t.split("");e.sort();for(let t=1;t<e.length;t+=1)if(e[t-1]===e[t])return!1;return!0}function $(){if(!1===X())return void(C.value="");const t=function t(e,n){const r=e.indexOf("/"),i={},a=r>=0?e.substr(0,r):e,o=r>=0?e.substr(r+1):void 0;if(void 0===n){const t={};t[a]=i,n={head:t,tailParent:t,tail:i}}else n.tail[a]=i,n.tailParent=n.tail,n.tail=i;return o?t(o,n):n}(y.value),e=t.tail;e.public=b.value;const n=parseInt(S.value,10);n!==A&&(e.length=n);const r=T.value;r!==I&&(e.alphabet=r);const i=function(){if(""===j.value)return{};try{const t=JSON.parse(j.value);return null===t||"Object"!==t.constructor.name?null:t}catch{return null}}();null!==i?j.style.removeProperty("background"):j.style.setProperty("background",B);const a=function(t,e){const n={};if(null!==t)for(const[e,r]of Object.entries(t))!1===D.includes(e)&&(n[e]=r);if(null!==e)for(const[t,r]of Object.entries(e))n[t]=r;return n}(i,e);0===Object.keys(a).length?t.tailParent[Object.keys(t.tailParent)[0]]=null:t.tailParent[Object.keys(t.tailParent)[0]]=a,C.value=JSON.stringify(t.head,void 0,4)}function q(){S.value=L.value}function Q(){x.innerHTML=T.value.length.toString(),T.value.length.toString().length<2&&(x.innerHTML=x.innerHTML.padStart(2," "))}function W(t){t?T.style.removeProperty("background"):T.style.setProperty("background",B)}function X(){const t=T.value;return!1!==G(t)&&!(R().length<=0||b.value.length<8||t.length<2)}async function Y(){if($(),!1===X())return H.value="",void J();const t=R(),e=b.value,n=r(t),a=r(e),u=i(await async function(t,e,n){const i=await o(t,e),a=await crypto.subtle.importKey("raw",i,{name:"HMAC",hash:{name:"SHA-512"}},!1,["sign"]);return await crypto.subtle.sign("HMAC",a,r(n))}(n,a,"Password"),T.value);var s,l;H.value=(s=u,l=parseInt(L.value,10),s.length<=l?s:s.substr(0,l)),J()}async function Z(){T.value=I,Q();const t=G(T.value);W(t),t&&await Y()}!function(t,e){const n=l(e);n.addEventListener("click",()=>{"password"===t.type?(t.type="input",n.innerHTML="Hide"):(t.type="password",n.innerHTML="View")})}(H,"btnViewResultPassword"),V(b,g,U),V(H,k,N),L.addEventListener("input",()=>{q(),Y()}),S.addEventListener("input",()=>{!function(){const t=parseInt(L.min,10),e=parseInt(S.value,10),n=parseInt(L.max,10);L.value=Math.max(t,Math.min(e,n)).toString()}(),q(),Y()}),T.addEventListener("input",()=>{const t=G(T.value);W(t),!1!==t&&(Q(),Y())}),M.addEventListener("click",()=>{Z(),Q(),Y()});const tt=new class{constructor(t,e){this.action=t,this.delay=e}reset(t){void 0===this.timeout&&clearTimeout(this.timeout);const e=void 0!==t?t:this.delay;this.timeout=setTimeout(()=>{this.action(),this.timeout=void 0},e)}}(z,6e4);function et(){d.value===c.value?d.style.setProperty("background",F):d.style.setProperty("background",B)}c.addEventListener("input",()=>{_(),m.innerHTML=c.value.length.toString(),et(),Y(),tt.reset()}),d.addEventListener("input",()=>{w.innerHTML=d.value.length.toString(),et()}),y.addEventListener("input",()=>{$()}),b.addEventListener("input",()=>{$(),Y()}),j.addEventListener("input",()=>{$()}),q(),Z(),et()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0cmluZ1V0aWxzLnRzIiwid2VicGFjazovLy8uL3NyYy9hcnJheVV0aWxzLnRzIiwid2VicGFjazovLy8uL3NyYy9jcnlwdG8udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1Zpc3VhbEZlZWRiYWNrLnRzIiwid2VicGFjazovLy8uL3NyYy91aS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGltZWRBY3Rpb24udHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJzdHJpbmdUb0FycmF5Iiwic3RyIiwiVGV4dEVuY29kZXIiLCJlbmNvZGUiLCJidWZmZXIiLCJ0b0N1c3RvbUJhc2UiLCJieXRlcyIsImFscGhhYmV0IiwiYWxwaGFiZXRMZW5ndGgiLCJCaWdJbnQiLCJsZW5ndGgiLCJyZXN1bHQiLCJudW1iZXIiLCJhcnJheUJ1ZmZlciIsImJ5dGVMZW5ndGgiLCJhcnJheVZpZXciLCJEYXRhVmlldyIsImdldFVpbnQ4IiwiYXJyYXlCdWZmZXJUb1Vuc2lnbmVkQmlnSW50IiwicmVtYWluZGVyIiwiYXNVaW50TiIsIkJBU0U2Ml9BTFBIQUJFVCIsIlVpbnQ4QXJyYXkiLCJhc3luYyIsImdldERlcml2ZWRCeXRlcyIsInBhc3N3b3JkIiwic2FsdCIsImJhc2VLZXkiLCJjcnlwdG8iLCJzdWJ0bGUiLCJpbXBvcnRLZXkiLCJhbGdvcml0aG0iLCJoYXNoIiwiaXRlcmF0aW9ucyIsImRlcml2ZUtleSIsImV4cG9ydEtleSIsImdlbmVyYXRlUmFuZG9tU3RyaW5nIiwiYnl0ZUNvdW50IiwiYXJyYXkiLCJnZXRSYW5kb21WYWx1ZXMiLCJnZW5lcmF0ZVJhbmRvbUJ5dGVzIiwiVmlzdWFsRmVlZGJhY2siLCJlbGVtZW50IiwidGhpcyIsInRleHQiLCJkdXJhdGlvbiIsImlubmVySFRNTCIsInRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiZ2V0RWxlbWVudEJ5SWQiLCJlbGVtZW50TmFtZSIsImRvY3VtZW50IiwiRXJyb3IiLCJ0eHRQcml2YXRlUGFydCIsInR4dFByaXZhdGVQYXJ0Q29uZmlybWF0aW9uIiwiYnRuUHJvdGVjdCIsImJ0bkNsZWFyUHJvdGVjdGVkIiwic3BuUHJvdGVjdGVkQ29uZmlybWF0aW9uIiwidHh0UGF0aCIsInR4dFB1YmxpY1BhcnQiLCJidG5HZW5lcmF0ZVB1YmxpY1BhcnQiLCJidG5Db3B5UHVibGljUGFydCIsInNwbkNvcHlQdWJsaWNQYXJ0RmVlZGJhY2siLCJzcG5Qcml2YXRlUGFydFNpemUiLCJzcG5Qcml2YXRlUGFydFNpemVDb25maXJtYXRpb24iLCJudW1PdXRwdXRTaXplUmFuZ2UiLCJudW1PdXRwdXRTaXplTnVtIiwidHh0QWxwaGFiZXQiLCJzcG5BbHBoYWJldFNpemUiLCJidG5SZXNldEFscGhhYmV0IiwidHh0UmVzdWx0UGFzc3dvcmQiLCJzcG5SZXN1bHRQYXNzd29yZExlbmd0aCIsImJ0bkNvcHlSZXN1bHRQYXNzd29yZCIsInNwbkNvcHlSZXN1bHRQYXNzd29yZEZlZWRiYWNrIiwidHh0UGFyYW1ldGVycyIsInR4dEN1c3RvbUtleXMiLCJERUZBVUxUX0xFTkdUSCIsIkRFRkFVTFRfQUxQSEFCRVQiLCJTVUNDRVNTX0NPTE9SIiwiRVJST1JfQ09MT1IiLCJSRVNFUlZFRF9LRVlTIiwiZ2V0UHJpdmF0ZVBhcnQiLCJ1bmRlZmluZWQiLCJwcm90ZWN0UHJpdmF0ZVBhcnQiLCJ1cGRhdGVQcml2YXRlUGFydHNNYXRjaGluZyIsImNsZWFyUHJpdmF0ZVBhcnRQcm90ZWN0aW9uIiwibWF4IiwidG9TdHJpbmciLCJhZGRFdmVudExpc3RlbmVyIiwicmFuZG9tU3RyaW5nIiwicnVuIiwiY29weVJlc3VsdFBhc3N3b3JkVG9DbGlwYm9hcmRGZWVkYmFja09iamVjdCIsImNvcHlQdWJsaWNQYXJ0VG9DbGlwYm9hcmRGZWVkYmFja09iamVjdCIsInNldHVwQ29weUJ1dHRvbiIsInR4dCIsImJ1dHRvbiIsImZlZWRiYWNrIiwibmF2aWdhdG9yIiwiY2xpcGJvYXJkIiwid3JpdGVUZXh0IiwiZXJyb3IiLCJjb25zb2xlIiwic3RhY2siLCJ3cml0ZVRvQ2xpcGJvYXJkIiwic2V0VGV4dCIsInVwZGF0ZVJlc3VsdFBhc3N3b3JkTGVuZ3RoIiwicGFkU3RhcnQiLCJpc0FscGhhYmV0VmFsaWQiLCJzb3J0ZWRBbHBoYWJldCIsInNwbGl0Iiwic29ydCIsInVwZGF0ZVBhc3N3b3JkR2VuZXJhdGlvblBhcmFtZXRlcnMiLCJjYW5SdW4iLCJjaGFpbkluZm8iLCJwYXRoVG9PYmplY3RDaGFpbiIsInBhdGgiLCJzZXBhcmF0b3JJbmRleCIsImluZGV4T2YiLCJ0YWlsIiwiZmlyc3RQYXRoIiwic3Vic3RyIiwicmVtYWluaW5nUGF0aCIsIm5vZGUiLCJoZWFkIiwidGFpbFBhcmVudCIsImxlYWYiLCJwdWJsaWMiLCJudW1lcmljVmFsdWUiLCJwYXJzZUludCIsImN1c3RvbUtleXMiLCJvYmoiLCJKU09OIiwicGFyc2UiLCJjb25zdHJ1Y3RvciIsInBhcnNlQ3VzdG9tS2V5cyIsInN0eWxlIiwicmVtb3ZlUHJvcGVydHkiLCJzZXRQcm9wZXJ0eSIsInJlc3VsdFBhcmFtZXRlcnMiLCJzb3VyY2UiLCJ0YXJnZXQiLCJlbnRyaWVzIiwiaW5jbHVkZXMiLCJzaGFsbG93TWVyZ2UiLCJrZXlzIiwic3RyaW5naWZ5IiwidXBkYXRlT3V0cHV0U2l6ZVJhbmdlVG9OdW0iLCJ1cGRhdGVBbHBoYWJldFNpemUiLCJ1cGRhdGVBbHBoYWJldFZhbGlkaXR5RGlzcGxheSIsInByaXZhdGVQYXJ0U3RyaW5nIiwicHVibGljUGFydFN0cmluZyIsInByaXZhdGVQcml2YXRlQnl0ZXMiLCJwdWJsaWNQYXJ0Qnl0ZXMiLCJrZXlTdHJpbmciLCJwcml2YXRlUGFydCIsInB1YmxpY1BhcnQiLCJoa2RmUHVycG9zZSIsImRlcml2ZWRLZXkiLCJoa2RmS2V5Iiwic2lnbiIsImlucHV0IiwicmVzZXRBbHBoYWJldCIsImlzQWxwaGFiZXRWYWxpZFJlc3VsdCIsImJ1dHRvbk5hbWUiLCJidG4iLCJ0eXBlIiwic2V0dXBWaWV3QnV0dG9uIiwibWluIiwidmFsIiwiTWF0aCIsInVwZGF0ZU91dHB1dFNpemVOdW1Ub1JhbmdlIiwicHJvdGVjdFByaXZhdGVQYXJ0QWN0aW9uIiwiYWN0aW9uIiwiZGVsYXkiLCJvdmVycmlkZURlbGF5IiwicmVzZXQiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0YsRUFDcEIsR0FBVyxFQUFQRSxHQUE4QixpQkFBVkYsR0FBc0JBLEdBQVNBLEVBQU1HLFdBQVksT0FBT0gsRUFDaEYsSUFBSUksRUFBS1gsT0FBT1ksT0FBTyxNQUd2QixHQUZBMUIsRUFBb0JrQixFQUFFTyxHQUN0QlgsT0FBT0MsZUFBZVUsRUFBSSxVQUFXLENBQUVULFlBQVksRUFBTUssTUFBT0EsSUFDdEQsRUFBUEUsR0FBNEIsaUJBQVRGLEVBQW1CLElBQUksSUFBSU0sS0FBT04sRUFBT3JCLEVBQW9CVSxFQUFFZSxFQUFJRSxFQUFLLFNBQVNBLEdBQU8sT0FBT04sRUFBTU0sSUFBUUMsS0FBSyxLQUFNRCxJQUM5SSxPQUFPRixHQUlSekIsRUFBb0I2QixFQUFJLFNBQVMxQixHQUNoQyxJQUFJUyxFQUFTVCxHQUFVQSxFQUFPcUIsV0FDN0IsV0FBd0IsT0FBT3JCLEVBQWdCLFNBQy9DLFdBQThCLE9BQU9BLEdBRXRDLE9BREFILEVBQW9CVSxFQUFFRSxFQUFRLElBQUtBLEdBQzVCQSxHQUlSWixFQUFvQmEsRUFBSSxTQUFTaUIsRUFBUUMsR0FBWSxPQUFPakIsT0FBT2tCLFVBQVVDLGVBQWUxQixLQUFLdUIsRUFBUUMsSUFHekcvQixFQUFvQmtDLEVBQUksR0FJakJsQyxFQUFvQkEsRUFBb0JtQyxFQUFJLEcsK0JDMUU5QyxTQUFTQyxFQUFjQyxHQUUxQixPQURnQixJQUFJQyxhQUNMQyxPQUFPRixHQUFLRyxPQ1N4QixTQUFTQyxFQUFhQyxFQUFvQkMsR0FDN0MsTUFBTUMsRUFBeUJDLE9BQU9GLEVBQVNHLFFBRS9DLElBQUlDLEVBQWlCLEdBQ2pCQyxFQWpCRCxTQUFxQ0MsR0FDeEMsTUFBTUgsRUFBaUJHLEVBQVlDLFdBQzdCQyxFQUFzQixJQUFJQyxTQUFTSCxFQUFhLEdBRXRELElBQUlGLEVBQWlCLEdBRXJCLElBQUssSUFBSTNDLEVBQVksRUFBR0EsRUFBSTBDLEVBQVExQyxHQUFLLEVBQ3JDMkMsR0FBVUYsT0FBT00sRUFBVUUsU0FBU2pELElBQU8sTUFBUXlDLE9BQU96QyxHQUc5RCxPQUFPMkMsRUFPY08sQ0FBNEJaLEdBRWpELEtBQU9NLEVBQVMsSUFDaEIsQ0FDSSxNQUFNTyxFQUFvQlAsRUFBU0osRUFDbkNJLEdBQVVKLEVBSVZHLEdBQVVKLEVBRnlCRSxPQUFPVyxRQUFRLEdBQUlELElBSzFELE9BQU9SLEUsT0NoQ0osTUFBTVUsRUFBMEIsaUVBRVUsSUFBSUMsV0FBVyxDQUFFLElBQU0sSUFBTSxJQUFNLElBQU0sR0FBTSxHQUFNLEdBQU0sR0FBTSxJQUFNLEdBQU0sSUFBTSxHQUFNLElBQU0sSUFBTSxHQUFNLE1BQVFsQixPQUVwS21CLGVBQWVDLEVBQWdCQyxFQUF1QkMsR0FDbEQsTUFBTUMsUUFBMkJDLE9BQU9DLE9BQU9DLFVBQzNDLE1BQ0FMLEVBQ0EsVUFDQSxFQUNBLENBQUMsY0FHQ00sRUFBMEIsQ0FDNUJ4RCxLQUFNLFNBQ055RCxLQUFNLFVBQ05DLFdBQVksSUFDWlAsUUFRRWYsUUFBMEJpQixPQUFPQyxPQUFPSyxVQUMxQ0gsRUFDQUosRUFQd0MsQ0FDeENwRCxLQUFNLFVBQ05tQyxPQUFRLE1BT1IsRUFDQSxDQUFDLFlBS0wsYUFGK0JrQixPQUFPQyxPQUFPTSxVQUFVLE1BQU94QixHQTZCM0QsU0FBU3lCLEVBQXFCQyxFQUFvQixHQUFJOUIsRUFBbUJjLEdBRTVFLE9BQU8sRUFQSixTQUE2QmdCLEVBQW9CLElBQ3BELE1BQU1DLEVBQW9CLElBQUloQixXQUFXZSxHQUN6QyxPQUFPVCxPQUFPVyxnQkFBZ0JELEdBQU9sQyxPQUlWb0MsQ0FBb0JILEdBQ1Q5QixHQ25FM0IsTUFBTWtDLEVBSWpCLFlBQW1CQyxHQUNmQyxLQUFLRCxRQUFVQSxFQUdaLFFBQVFFLEVBQWNDLEdBQ3pCRixLQUFLRCxRQUFRSSxVQUFZRixFQUNyQkQsS0FBS0ksU0FDTEMsYUFBYUwsS0FBS0ksU0FFdEJKLEtBQUtJLFFBQVVFLFdBQVcsSUFBTU4sS0FBS0QsUUFBUUksVUFBWSxHQUFJRCxJQ0xyRSxTQUFTSyxFQUFlQyxHQUNwQixNQUFNVCxFQUE0QlUsU0FBU0YsZUFBZUMsR0FFMUQsR0FBb0IsT0FBaEJBLEVBQ0EsTUFBTSxJQUFJRSxNQUFNLGdCQUFnQkYsaUJBR3BDLE9BQU9ULEVBR1gsTUFBTVksRUFBbUNKLEVBQWUsa0JBQ2xESyxFQUErQ0wsRUFBZSw4QkFDOURNLEVBQStCTixFQUFlLGNBQzlDTyxFQUFzQ1AsRUFBZSxxQkFDckRRLEVBQTZDUixFQUFlLDRCQUM1RFMsRUFBNEJULEVBQWUsV0FDM0NVLEVBQWtDVixFQUFlLGlCQUNqRFcsRUFBMENYLEVBQWUseUJBQ3pEWSxFQUFzQ1osRUFBZSxxQkFDckRhLEVBQThDYixFQUFlLDZCQUU3RGMsRUFBdUNkLEVBQWUsc0JBQ3REZSxFQUFtRGYsRUFBZSxrQ0FFbEVnQixFQUF1Q2hCLEVBQWUsc0JBQ3REaUIsRUFBcUNqQixFQUFlLG9CQUVwRGtCLEVBQWdDbEIsRUFBZSxlQUMvQ21CLEVBQW9DbkIsRUFBZSxtQkFDbkRvQixFQUFxQ3BCLEVBQWUsb0JBRXBEcUIsRUFBc0NyQixFQUFlLHFCQUNyRHNCLEVBQTRDdEIsRUFBZSwyQkFDM0R1QixFQUEwQ3ZCLEVBQWUseUJBQ3pEd0IsRUFBa0R4QixFQUFlLGlDQUVqRXlCLEVBQWtDekIsRUFBZSxpQkFDakQwQixFQUFrQzFCLEVBQWUsaUJBRWpEMkIsRUFBeUIsR0FPekJDLEVBRjhCLGlHQU05QkMsRUFBd0IsVUFDeEJDLEVBQXNCLFVBRXRCQyxFQUEwQixDQUFDLFdBQVksU0FBVSxVQU12RCxJQUFJLEVBUUosU0FBU0MsSUFDTCxZQUFvQkMsSUFBaEIsRUFDTyxFQUVKN0IsRUFBZXJFLE1BRzFCLFNBQVNtRyxJQUMrQixJQUFoQzlCLEVBQWVyRSxNQUFNeUIsU0FJekIsRUFBYzRDLEVBQWVyRSxNQUM3QnlFLEVBQXlCWixVQUFZLGNBQWMsRUFBWXBDLG9CQUUvRDRDLEVBQWVyRSxNQUFRLEdBQ3ZCc0UsRUFBMkJ0RSxNQUFRLEdBQ25DK0UsRUFBbUJsQixVQUFZLElBQy9CbUIsRUFBK0JuQixVQUFZLElBRTNDdUMsTUFPSixTQUFTQyxJQUNMLE9BQWNILEVBQ2R6QixFQUF5QlosVUFBWSxHQXhDekNvQixFQUFtQnFCLElBQU1WLEVBQWVXLFdBQ3hDdEIsRUFBbUJqRixNQUFRNEYsRUFBZVcsV0FJMUMzQixFQUFzQjRCLGlCQUFpQixRQUFTLEtBQzVDLE1BQU1DLEVBQXVCLElBQzdCOUIsRUFBYzNFLE1BQVF5RyxFQUN0QkMsTUEwQkpuQyxFQUFXaUMsaUJBQWlCLFFBQVMsS0FDakNMLE1BUUozQixFQUFrQmdDLGlCQUFpQixRQUFTLEtBQ3hDSCxJQUNBSyxNQThFSixNQUFNQyxFQUE4RCxJQUFJbkQsRUFBZWlDLEdBQ2pGbUIsRUFBMEQsSUFBSXBELEVBQWVzQixHQVluRixTQUFTK0IsRUFBZ0JDLEVBQXVCQyxFQUEwQkMsR0FDdEVELEVBQU9QLGlCQUFpQixRQUFTbEUsZ0JBWHJDQSxlQUFnQ3FCLEdBQzVCLElBRUksYUFETXNELFVBQVVDLFVBQVVDLFVBQVV4RCxJQUM3QixFQUNULE1BQU95RCxHQUVMLE9BREFDLFFBQVFELE1BQU1BLEVBQU1FLE9BQVNGLElBQ3RCLEdBTUdHLENBQWlCVCxFQUFJOUcsT0FDM0JnSCxFQUFTUSxRQUFRLFNBQVUsS0FFM0JSLEVBQVNRLFFBQVEsaURBQWtELE9BSy9FLFNBQVNDLElBQ0xsQyxFQUF3QjFCLFVBQVl5QixFQUFrQnRGLE1BQU15QixPQUFPOEUsV0FBV21CLFNBQVMsRUFBRyxLQVE5RixTQUFTQyxFQUFnQnJHLEdBQ3JCLE1BQU1zRyxFQUEyQnRHLEVBQVN1RyxNQUFNLElBQ2hERCxFQUFlRSxPQUVmLElBQUssSUFBSS9JLEVBQVksRUFBR0EsRUFBSTZJLEVBQWVuRyxPQUFRMUMsR0FBSyxFQUNwRCxHQUFJNkksRUFBZTdJLEVBQUksS0FBTzZJLEVBQWU3SSxHQUN6QyxPQUFPLEVBSWYsT0FBTyxFQXdDWCxTQUFTZ0osSUFDTCxJQUFpQixJQUFiQyxJQUVBLFlBREF0QyxFQUFjMUYsTUFBUSxJQUkxQixNQUFNaUksRUFuQ1YsU0FBU0MsRUFBa0JDLEVBQWNGLEdBQ3JDLE1BQU1HLEVBQXlCRCxFQUFLRSxRQUFRLEtBRXRDQyxFQUFvQixHQUVwQkMsRUFBb0JILEdBQWtCLEVBQUlELEVBQUtLLE9BQU8sRUFBR0osR0FBa0JELEVBQzNFTSxFQUFvQ0wsR0FBa0IsRUFBSUQsRUFBS0ssT0FBT0osRUFBaUIsUUFBS2xDLEVBRWxHLFFBQWtCQSxJQUFkK0IsRUFBeUIsQ0FDekIsTUFBTVMsRUFBb0IsR0FDMUJBLEVBQUtILEdBQWFELEVBQ2xCTCxFQUFZLENBQ1JVLEtBQU1ELEVBQ05FLFdBQVlGLEVBQ1pKLGFBR0pMLEVBQVVLLEtBQUtDLEdBQWFELEVBQzVCTCxFQUFVVyxXQUFhWCxFQUFVSyxLQUNqQ0wsRUFBVUssS0FBT0EsRUFHckIsT0FBSUcsRUFDT1AsRUFBa0JPLEVBQWVSLEdBR3JDQSxFQVN1QkMsQ0FBa0J4RCxFQUFRMUUsT0FDbEQ2SSxFQUFvQlosRUFBVUssS0FFcENPLEVBQUtDLE9BQVNuRSxFQUFjM0UsTUFFNUIsTUFBTStJLEVBQXVCQyxTQUFTOUQsRUFBaUJsRixNQUFPLElBQzFEK0ksSUFBaUJuRCxJQUNqQmlELEVBQUtwSCxPQUFTc0gsR0FHbEIsTUFBTXpILEVBQW1CNkQsRUFBWW5GLE1BQ2pDc0IsSUFBYXVFLElBQ2JnRCxFQUFLdkgsU0FBV0EsR0FHcEIsTUFBTTJILEVBektWLFdBQ0ksR0FBNEIsS0FBeEJ0RCxFQUFjM0YsTUFDZCxNQUFPLEdBR1gsSUFDSSxNQUFNa0osRUFBV0MsS0FBS0MsTUFBTXpELEVBQWMzRixPQUMxQyxPQUFZLE9BQVJrSixHQUF5QyxXQUF6QkEsRUFBSUcsWUFBWS9KLEtBQ3pCLEtBRUo0SixFQUNULE1BQ0UsT0FBTyxNQTZKNEJJLEdBQ0EsT0FBZkwsRUFqTHBCdEQsRUFBYzRELE1BQU1DLGVBQWUsY0FJdkM3RCxFQUFjNEQsTUFBTUUsWUFBWSxhQUFjMUQsR0E4SzlDLE1BQU0yRCxFQTNKVixTQUFzQkMsRUFBNEJDLEdBQzlDLE1BQU1sSSxFQUFzQixHQUU1QixHQUFlLE9BQVhpSSxFQUNBLElBQUssTUFBT3JKLEVBQUtOLEtBQVVQLE9BQU9vSyxRQUFRRixJQUNGLElBQWhDM0QsRUFBYzhELFNBQVN4SixLQUN2Qm9CLEVBQU9wQixHQUFPTixHQUsxQixHQUFlLE9BQVg0SixFQUNBLElBQUssTUFBT3RKLEVBQUtOLEtBQVVQLE9BQU9vSyxRQUFRRCxHQUN0Q2xJLEVBQU9wQixHQUFPTixFQUl0QixPQUFPMEIsRUEwSStCcUksQ0FBYWQsRUFBWUosR0FFbEIsSUFBekNwSixPQUFPdUssS0FBS04sR0FBa0JqSSxPQUU5QndHLEVBQVVXLFdBQVduSixPQUFPdUssS0FBSy9CLEVBQVVXLFlBQVksSUFBTSxLQUU3RFgsRUFBVVcsV0FBV25KLE9BQU91SyxLQUFLL0IsRUFBVVcsWUFBWSxJQUFNYyxFQUdqRWhFLEVBQWMxRixNQUFRbUosS0FBS2MsVUFBVWhDLEVBQVVVLFVBQU16QyxFQUFXLEdBR3BFLFNBQVNnRSxJQUNMaEYsRUFBaUJsRixNQUFRaUYsRUFBbUJqRixNQXFCaEQsU0FBU21LLElBQ0wvRSxFQUFnQnZCLFVBQVlzQixFQUFZbkYsTUFBTXlCLE9BQU84RSxXQUVkcEIsRUFBWW5GLE1BQU15QixPQUFPOEUsV0FBVzlFLE9BQzlDLElBRXpCMkQsRUFBZ0J2QixVQUFZdUIsRUFBZ0J2QixVQUFVNkQsU0FBUyxFQUFHLE1BSTFFLFNBQVMwQyxFQUE4QnpDLEdBQy9CQSxFQUNBeEMsRUFBWW9FLE1BQU1DLGVBQWUsY0FFakNyRSxFQUFZb0UsTUFBTUUsWUFBWSxhQUFjMUQsR0E2QnBELFNBQVNpQyxJQUNMLE1BQU0xRyxFQUFtQjZELEVBQVluRixNQUVyQyxPQUFrQyxJQUE5QjJILEVBQWdCckcsTUFJaEIyRSxJQUFpQnhFLFFBQVUsR0FBS2tELEVBQWMzRSxNQUFNeUIsT0FBUyxHQUFLSCxFQUFTRyxPQUFTLEdBTzVGYSxlQUFlb0UsSUFHWCxHQUZBcUIsS0FFaUIsSUFBYkMsSUFFQSxPQXhCSjFDLEVBQWtCdEYsTUFBUSxRQUUxQnlILElBeUJBLE1BQU00QyxFQUE0QnBFLElBQzVCcUUsRUFBbUIzRixFQUFjM0UsTUFFakN1SyxFQUFtQyxFQUEwQkYsR0FDN0RHLEVBQStCLEVBQTBCRixHQUl6REcsRUFBb0IsUUZ0V3ZCbkksZUFBZ0NvSSxFQUEwQkMsRUFBeUJDLEdBQ3RGLE1BQU1DLFFBQWdDdEksRUFBZ0JtSSxFQUFhQyxHQU83REcsUUFBMkJuSSxPQUFPQyxPQUFPQyxVQUMzQyxNQUNBZ0ksRUFQcUMsQ0FDckN2TCxLQUFNLE9BQ055RCxLQUFNLENBQUV6RCxLQUFNLGFBT2QsRUFDQSxDQUFDLFNBR0wsYUFBYXFELE9BQU9DLE9BQU9tSSxLQUFLLE9BQVFELEVBQVMsRUFBMEJGLElFb1Z2QyxDQUF3QkwsRUFBcUJDLEVBQWlCLFlBRXRDckYsRUFBWW5GLE9KL1lyRSxJQUFrQmdMLEVBQWV2SixFSWdacEM2RCxFQUFrQnRGLE9KaFpHZ0wsRUlnWjBCUCxFSmhaWGhKLEVJZ1pzQnVILFNBQVMvRCxFQUFtQmpGLE1BQU8sSUovWXpGZ0wsRUFBTXZKLFFBQVVBLEVBQ1R1SixFQUdKQSxFQUFNeEMsT0FBTyxFQUFHL0csSUk2WXZCZ0csSUFHSm5GLGVBQWUySSxJQUNYOUYsRUFBWW5GLE1BQVE2RixFQUNwQnNFLElBRUEsTUFBTWUsRUFBaUN2RCxFQUFnQnhDLEVBQVluRixPQUVuRW9LLEVBQThCYyxHQUUxQkEsU0FDTXhFLEtBaFBkLFNBQXlCSSxFQUF1QnFFLEdBQzVDLE1BQU1DLEVBQXdCbkgsRUFBZWtILEdBQzdDQyxFQUFJNUUsaUJBQWlCLFFBQVMsS0FDVCxhQUFiTSxFQUFJdUUsTUFDSnZFLEVBQUl1RSxLQUFPLFFBQ1hELEVBQUl2SCxVQUFZLFNBRWhCaUQsRUFBSXVFLEtBQU8sV0FDWEQsRUFBSXZILFVBQVksVUFnQzVCeUgsQ0FBZ0JoRyxFQUFtQix5QkFFbkN1QixFQUFnQmxDLEVBQWVFLEVBQW1CK0IsR0FDbERDLEVBQWdCdkIsRUFBbUJFLEVBQXVCbUIsR0FrRzFEMUIsRUFBbUJ1QixpQkFBaUIsUUFBUyxLQUN6QzBELElBQ0F4RCxNQUdKeEIsRUFBaUJzQixpQkFBaUIsUUFBUyxNQVozQyxXQUNJLE1BQU0rRSxFQUFjdkMsU0FBUy9ELEVBQW1Cc0csSUFBSyxJQUMvQ0MsRUFBY3hDLFNBQVM5RCxFQUFpQmxGLE1BQU8sSUFDL0NzRyxFQUFjMEMsU0FBUy9ELEVBQW1CcUIsSUFBSyxJQUNyRHJCLEVBQW1CakYsTUFBUXlMLEtBQUtuRixJQUFJaUYsRUFBS0UsS0FBS0YsSUFBSUMsRUFBS2xGLElBQU1DLFdBUzdEbUYsR0FDQXhCLElBQ0F4RCxNQXFCSnZCLEVBQVlxQixpQkFBaUIsUUFBUyxLQUNsQyxNQUFNMEUsRUFBaUN2RCxFQUFnQnhDLEVBQVluRixPQUVuRW9LLEVBQThCYyxJQUVBLElBQTFCQSxJQUlKZixJQUNBekQsT0FHSnJCLEVBQWlCbUIsaUJBQWlCLFFBQVMsS0FDdkN5RSxJQUNBZCxJQUNBekQsTUEwREosTUFBTWlGLEdBQXdDLElDbGEvQixNQUVYLFlBQTJCQyxFQUEwQkMsR0FBMUIsS0FBQUQsU0FBMEIsS0FBQUMsUUFHOUMsTUFBTUMsUUFDWTVGLElBQWpCeEMsS0FBS0ksU0FDTEMsYUFBYUwsS0FBS0ksU0FHdEIsTUFBTStILE9BQTBCM0YsSUFBbEI0RixFQUE4QkEsRUFBZ0JwSSxLQUFLbUksTUFFakVuSSxLQUFLSSxRQUFVRSxXQUFXLEtBQ3RCTixLQUFLa0ksU0FDTGxJLEtBQUtJLGFBQVVvQyxHQUNoQjJGLEtEbVptRDFGLEVBMVdkLEtBb1hoRCxTQUFTQyxLQUNEOUIsRUFBMkJ0RSxRQUFVcUUsRUFBZXJFLE1BQ3BEc0UsRUFBMkJpRixNQUFNRSxZQUFZLGFBQWMzRCxHQUUzRHhCLEVBQTJCaUYsTUFBTUUsWUFBWSxhQUFjMUQsR0FabkUxQixFQUFlbUMsaUJBQWlCLFFBQVMsS0FDckNILElBQ0F0QixFQUFtQmxCLFVBQVlRLEVBQWVyRSxNQUFNeUIsT0FBTzhFLFdBQzNESCxLQUNBTSxJQUNBaUYsR0FBeUJJLFVBVzdCekgsRUFBMkJrQyxpQkFBaUIsUUFBUyxLQUNqRHhCLEVBQStCbkIsVUFBWVMsRUFBMkJ0RSxNQUFNeUIsT0FBTzhFLFdBQ25GSCxPQUdKMUIsRUFBUThCLGlCQUFpQixRQUFTLEtBQzlCdUIsTUFHSnBELEVBQWM2QixpQkFBaUIsUUFBUyxLQUNwQ3VCLElBQ0FyQixNQUdKZixFQUFjYSxpQkFBaUIsUUFBUyxLQUNwQ3VCLE1BR0ptQyxJQUNBZSxJQUNBN0UiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiZXhwb3J0IGZ1bmN0aW9uIHRydW5jYXRlKGlucHV0OiBzdHJpbmcsIGxlbmd0aDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBpZiAoaW5wdXQubGVuZ3RoIDw9IGxlbmd0aCkge1xuICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGlucHV0LnN1YnN0cigwLCBsZW5ndGgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RyaW5nVG9BcnJheShzdHI6IHN0cmluZyk6IEFycmF5QnVmZmVyIHtcbiAgICBjb25zdCBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKC8qJ3V0Zi04JyovKTtcbiAgICByZXR1cm4gZW5jb2Rlci5lbmNvZGUoc3RyKS5idWZmZXI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tQmFzZTE2KHN0cjogc3RyaW5nKTogQXJyYXlCdWZmZXIge1xuICAgIGlmIChzdHIubGVuZ3RoICUgMiAhPT0gMCkge1xuICAgICAgICBzdHIgPSAnMCcgKyBzdHI7XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0OiBVaW50OEFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoc3RyLmxlbmd0aCAvIDIpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXN1bHQuYnl0ZUxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIHJlc3VsdFtpXSA9IHBhcnNlSW50KHN0ci5zdWJzdHIoaSAqIDIsIDIpLCAxNik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdC5idWZmZXI7XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gY29weShzb3VyY2U6IFVpbnQ4QXJyYXksIHNvdXJjZUluZGV4OiBudW1iZXIsIHRhcmdldDogVWludDhBcnJheSwgdGFyZ2V0SW5kZXg6IG51bWJlciwgbGVuZ3RoOiBudW1iZXIpOiB2b2lkIHtcbiAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgdGFyZ2V0W2kgKyB0YXJnZXRJbmRleF0gPSBzb3VyY2VbaSArIHNvdXJjZUluZGV4XTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhcnJheUJ1ZmZlclRvVW5zaWduZWRCaWdJbnQoYXJyYXlCdWZmZXI6IEFycmF5QnVmZmVyKTogYmlnaW50IHtcbiAgICBjb25zdCBsZW5ndGg6IG51bWJlciA9IGFycmF5QnVmZmVyLmJ5dGVMZW5ndGg7XG4gICAgY29uc3QgYXJyYXlWaWV3OiBEYXRhVmlldyA9IG5ldyBEYXRhVmlldyhhcnJheUJ1ZmZlciwgMCk7XG5cbiAgICBsZXQgcmVzdWx0OiBiaWdpbnQgPSAwbjtcblxuICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICByZXN1bHQgKz0gQmlnSW50KGFycmF5Vmlldy5nZXRVaW50OChpKSkgKiAoMjU2biAqKiBCaWdJbnQoaSkpO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0b0N1c3RvbUJhc2UoYnl0ZXM6IEFycmF5QnVmZmVyLCBhbHBoYWJldDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBhbHBoYWJldExlbmd0aDogYmlnaW50ID0gQmlnSW50KGFscGhhYmV0Lmxlbmd0aCk7XG5cbiAgICBsZXQgcmVzdWx0OiBzdHJpbmcgPSAnJztcbiAgICBsZXQgbnVtYmVyOiBiaWdpbnQgPSBhcnJheUJ1ZmZlclRvVW5zaWduZWRCaWdJbnQoYnl0ZXMpO1xuXG4gICAgd2hpbGUgKG51bWJlciA+IDBuKVxuICAgIHtcbiAgICAgICAgY29uc3QgcmVtYWluZGVyOiBiaWdpbnQgPSBudW1iZXIgJSBhbHBoYWJldExlbmd0aDtcbiAgICAgICAgbnVtYmVyIC89IGFscGhhYmV0TGVuZ3RoO1xuXG4gICAgICAgIGNvbnN0IGluZGV4OiBudW1iZXIgPSA8bnVtYmVyPjxhbnk+QmlnSW50LmFzVWludE4oNjQsIHJlbWFpbmRlcik7XG5cbiAgICAgICAgcmVzdWx0ICs9IGFscGhhYmV0W2luZGV4XTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9CYXNlMTYoYnVmZmVyOiBBcnJheUJ1ZmZlcik6IHN0cmluZyB7XG4gICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbChcbiAgICAgICAgbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKSxcbiAgICAgICAgeCA9PiAoJzAwJyArIHgudG9TdHJpbmcoMTYpKS5zbGljZSgtMilcbiAgICApLmpvaW4oJycpO1xufVxuIiwiaW1wb3J0ICogYXMgc3RyaW5nVXRpbHMgZnJvbSAnLi9zdHJpbmdVdGlscyc7XG5pbXBvcnQgKiBhcyBhcnJheVV0aWxzIGZyb20gJy4vYXJyYXlVdGlscyc7XG5cbmV4cG9ydCBjb25zdCBCQVNFNjJfQUxQSEFCRVQ6IHN0cmluZyA9ICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaMDEyMzQ1Njc4OSc7XG5cbmNvbnN0IGVuY3J5cHRpb25LZXlEZXJpdmF0aW9uU2FsdDogQXJyYXlCdWZmZXIgPSBuZXcgVWludDhBcnJheShbIDB4ZjIsIDB4Y2YsIDB4ZWYsIDB4OGUsIDB4MTMsIDB4NDAsIDB4NDYsIDB4NDksIDB4OTIsIDB4MmEsIDB4ZGUsIDB4NWMsIDB4YmMsIDB4ODgsIDB4MzgsIDB4YTggXSkuYnVmZmVyO1xuXG5hc3luYyBmdW5jdGlvbiBnZXREZXJpdmVkQnl0ZXMocGFzc3dvcmQ6IEFycmF5QnVmZmVyLCBzYWx0OiBBcnJheUJ1ZmZlcik6IFByb21pc2U8QXJyYXlCdWZmZXI+IHtcbiAgICBjb25zdCBiYXNlS2V5OiBDcnlwdG9LZXkgPSBhd2FpdCBjcnlwdG8uc3VidGxlLmltcG9ydEtleShcbiAgICAgICAgJ3JhdycsXG4gICAgICAgIHBhc3N3b3JkLFxuICAgICAgICAnUEJLREYyJyxcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIFsnZGVyaXZlS2V5J11cbiAgICApO1xuXG4gICAgY29uc3QgYWxnb3JpdGhtOiBQYmtkZjJQYXJhbXMgPSB7XG4gICAgICAgIG5hbWU6ICdQQktERjInLFxuICAgICAgICBoYXNoOiAnU0hBLTUxMicsXG4gICAgICAgIGl0ZXJhdGlvbnM6IDEwMDAwMCxcbiAgICAgICAgc2FsdFxuICAgIH07XG5cbiAgICBjb25zdCBkZXJpdmVkS2V5VHlwZTogQWVzRGVyaXZlZEtleVBhcmFtcyA9IHtcbiAgICAgICAgbmFtZTogJ0FFUy1DQkMnLFxuICAgICAgICBsZW5ndGg6IDI1NlxuICAgIH07XG5cbiAgICBjb25zdCByZXN1bHQ6IENyeXB0b0tleSA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuZGVyaXZlS2V5KFxuICAgICAgICBhbGdvcml0aG0sXG4gICAgICAgIGJhc2VLZXksXG4gICAgICAgIGRlcml2ZWRLZXlUeXBlLFxuICAgICAgICB0cnVlLFxuICAgICAgICBbJ2VuY3J5cHQnXVxuICAgICk7XG5cbiAgICBjb25zdCBrZXk6IEFycmF5QnVmZmVyID0gYXdhaXQgY3J5cHRvLnN1YnRsZS5leHBvcnRLZXkoJ3JhdycsIHJlc3VsdCk7XG5cbiAgICByZXR1cm4ga2V5O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVQYXNzd29yZChwcml2YXRlUGFydDogQXJyYXlCdWZmZXIsIHB1YmxpY1BhcnQ6IEFycmF5QnVmZmVyLCBoa2RmUHVycG9zZTogc3RyaW5nKTogUHJvbWlzZTxBcnJheUJ1ZmZlcj4ge1xuICAgIGNvbnN0IGRlcml2ZWRLZXk6IEFycmF5QnVmZmVyID0gYXdhaXQgZ2V0RGVyaXZlZEJ5dGVzKHByaXZhdGVQYXJ0LCBwdWJsaWNQYXJ0KTtcblxuICAgIGNvbnN0IGhtYWNQYXJhbWV0ZXJzOiBIbWFjSW1wb3J0UGFyYW1zID0ge1xuICAgICAgICBuYW1lOiAnSE1BQycsXG4gICAgICAgIGhhc2g6IHsgbmFtZTogJ1NIQS01MTInIH1cbiAgICB9O1xuXG4gICAgY29uc3QgaGtkZktleTogQ3J5cHRvS2V5ID0gYXdhaXQgY3J5cHRvLnN1YnRsZS5pbXBvcnRLZXkoXG4gICAgICAgICdyYXcnLFxuICAgICAgICBkZXJpdmVkS2V5LFxuICAgICAgICBobWFjUGFyYW1ldGVycyxcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIFsnc2lnbiddXG4gICAgKTtcblxuICAgIHJldHVybiBhd2FpdCBjcnlwdG8uc3VidGxlLnNpZ24oJ0hNQUMnLCBoa2RmS2V5LCBzdHJpbmdVdGlscy5zdHJpbmdUb0FycmF5KGhrZGZQdXJwb3NlKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVJhbmRvbUJ5dGVzKGJ5dGVDb3VudDogbnVtYmVyID0gNjQpOiBBcnJheUJ1ZmZlciB7XG4gICAgY29uc3QgYXJyYXk6IFVpbnQ4QXJyYXkgPSBuZXcgVWludDhBcnJheShieXRlQ291bnQpO1xuICAgIHJldHVybiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKGFycmF5KS5idWZmZXI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVJhbmRvbVN0cmluZyhieXRlQ291bnQ6IG51bWJlciA9IDY0LCBhbHBoYWJldDogc3RyaW5nID0gQkFTRTYyX0FMUEhBQkVUKTogc3RyaW5nIHtcbiAgICBjb25zdCBhcnJheTogQXJyYXlCdWZmZXIgPSBnZW5lcmF0ZVJhbmRvbUJ5dGVzKGJ5dGVDb3VudCk7XG4gICAgcmV0dXJuIGFycmF5VXRpbHMudG9DdXN0b21CYXNlKGFycmF5LCBhbHBoYWJldCk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbmNyeXB0KGlucHV0OiBBcnJheUJ1ZmZlciwgcGFzc3dvcmQ6IEFycmF5QnVmZmVyKTogUHJvbWlzZTxBcnJheUJ1ZmZlcj4ge1xuICAgIGNvbnN0IG91dHB1dDogQXJyYXlCdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoMTIgKyAxNiArIGlucHV0LmJ5dGVMZW5ndGgpO1xuXG4gICAgY29uc3Qgbm9uY2U6IERhdGFWaWV3ID0gbmV3IERhdGFWaWV3KG91dHB1dCwgMCwgMTIpO1xuICAgIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQ4QXJyYXkob3V0cHV0LCAwLCAxMikpO1xuXG4gICAgY29uc3QgYWVzR2NtUGFyYW1zOiBBZXNHY21QYXJhbXMgPSB7XG4gICAgICAgIG5hbWU6ICdBRVMtR0NNJyxcbiAgICAgICAgaXY6IG5vbmNlXG4gICAgfTtcblxuICAgIGNvbnN0IGFlc0tleUFsZ29yaXRobTogQWVzS2V5QWxnb3JpdGhtID0ge1xuICAgICAgICBuYW1lOiAnQUVTLUdDTScsXG4gICAgICAgIGxlbmd0aDogMjU2XG4gICAgfTtcblxuICAgIGNvbnN0IHBhc3N3b3JkS2V5OiBDcnlwdG9LZXkgPSBhd2FpdCBjcnlwdG8uc3VidGxlLmltcG9ydEtleShcbiAgICAgICAgJ3JhdycsXG4gICAgICAgIGF3YWl0IGdldERlcml2ZWRCeXRlcyhwYXNzd29yZCwgZW5jcnlwdGlvbktleURlcml2YXRpb25TYWx0KSxcbiAgICAgICAgYWVzS2V5QWxnb3JpdGhtLFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgWydlbmNyeXB0J11cbiAgICApO1xuXG4gICAgY29uc3QgcmVzdWx0OiBBcnJheUJ1ZmZlciA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuZW5jcnlwdChhZXNHY21QYXJhbXMsIHBhc3N3b3JkS2V5LCBpbnB1dCk7XG5cbiAgICBuZXcgVWludDhBcnJheShvdXRwdXQpLnNldChuZXcgVWludDhBcnJheShyZXN1bHQpLCAxMik7XG5cbiAgICByZXR1cm4gb3V0cHV0O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVjcnlwdChpbnB1dDogQXJyYXlCdWZmZXIsIHBhc3N3b3JkOiBBcnJheUJ1ZmZlcik6IFByb21pc2U8QXJyYXlCdWZmZXI+IHtcbiAgICBjb25zdCBub25jZTogRGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcoaW5wdXQsIDAsIDEyKTtcbiAgICBjb25zdCBwYXlsb2FkOiBEYXRhVmlldyA9IG5ldyBEYXRhVmlldyhpbnB1dCwgMTIpO1xuXG4gICAgY29uc3QgYWVzR2NtUGFyYW1zOiBBZXNHY21QYXJhbXMgPSB7XG4gICAgICAgIG5hbWU6ICdBRVMtR0NNJyxcbiAgICAgICAgaXY6IG5vbmNlXG4gICAgfTtcblxuICAgIGNvbnN0IGFlc0tleUFsZ29yaXRobTogQWVzS2V5QWxnb3JpdGhtID0ge1xuICAgICAgICBuYW1lOiAnQUVTLUdDTScsXG4gICAgICAgIGxlbmd0aDogMjU2XG4gICAgfTtcblxuICAgIGNvbnN0IGRlcml2ZWRLZXk6IEFycmF5QnVmZmVyID0gYXdhaXQgZ2V0RGVyaXZlZEJ5dGVzKHBhc3N3b3JkLCBlbmNyeXB0aW9uS2V5RGVyaXZhdGlvblNhbHQpO1xuXG4gICAgY29uc3QgcGFzc3dvcmRLZXk6IENyeXB0b0tleSA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuaW1wb3J0S2V5KFxuICAgICAgICAncmF3JyxcbiAgICAgICAgZGVyaXZlZEtleSxcbiAgICAgICAgYWVzS2V5QWxnb3JpdGhtLFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgWydkZWNyeXB0J11cbiAgICApO1xuXG4gICAgcmV0dXJuIGF3YWl0IGNyeXB0by5zdWJ0bGUuZGVjcnlwdChhZXNHY21QYXJhbXMsIHBhc3N3b3JkS2V5LCBwYXlsb2FkKTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFZpc3VhbEZlZWRiYWNrIHtcbiAgICBwcml2YXRlIGVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgdGltZW91dDogbnVtYmVyIHwgdW5kZWZpbmVkO1xuXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKGVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgfVxuXG4gICAgcHVibGljIHNldFRleHQodGV4dDogc3RyaW5nLCBkdXJhdGlvbjogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSB0ZXh0O1xuICAgICAgICBpZiAodGhpcy50aW1lb3V0KSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSAnJywgZHVyYXRpb24pO1xuICAgIH1cbn1cbiIsImltcG9ydCAqIGFzIGNyeXB0byBmcm9tICcuL2NyeXB0byc7XG5pbXBvcnQgKiBhcyBzdHJpbmdVdGlscyBmcm9tICcuL3N0cmluZ1V0aWxzJztcbmltcG9ydCAqIGFzIGFycmF5VXRpbHMgZnJvbSAnLi9hcnJheVV0aWxzJztcblxuaW1wb3J0IFZpc3VhbEZlZWRiYWNrIGZyb20gJy4vVmlzdWFsRmVlZGJhY2snO1xuaW1wb3J0IFRpbWVkQWN0aW9uIGZyb20gJy4vVGltZWRBY3Rpb24nO1xuaW1wb3J0IHsgUGxhaW5PYmplY3QgfSBmcm9tICcuL1BsYWluT2JqZWN0JztcblxuZnVuY3Rpb24gZ2V0RWxlbWVudEJ5SWQoZWxlbWVudE5hbWU6IHN0cmluZyk6IEhUTUxJbnB1dEVsZW1lbnQge1xuICAgIGNvbnN0IGVsZW1lbnQ6IEhUTUxFbGVtZW50fG51bGwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50TmFtZSk7XG5cbiAgICBpZiAoZWxlbWVudE5hbWUgPT09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBET00gZWxlbWVudCAnJHtlbGVtZW50TmFtZX0nIG5vdCBmb3VuZC5gKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZWxlbWVudCBhcyBIVE1MSW5wdXRFbGVtZW50O1xufVxuXG5jb25zdCB0eHRQcml2YXRlUGFydDogSFRNTElucHV0RWxlbWVudCA9IGdldEVsZW1lbnRCeUlkKCd0eHRQcml2YXRlUGFydCcpO1xuY29uc3QgdHh0UHJpdmF0ZVBhcnRDb25maXJtYXRpb246IEhUTUxJbnB1dEVsZW1lbnQgPSBnZXRFbGVtZW50QnlJZCgndHh0UHJpdmF0ZVBhcnRDb25maXJtYXRpb24nKTtcbmNvbnN0IGJ0blByb3RlY3Q6IEhUTUxJbnB1dEVsZW1lbnQgPSBnZXRFbGVtZW50QnlJZCgnYnRuUHJvdGVjdCcpO1xuY29uc3QgYnRuQ2xlYXJQcm90ZWN0ZWQ6IEhUTUxJbnB1dEVsZW1lbnQgPSBnZXRFbGVtZW50QnlJZCgnYnRuQ2xlYXJQcm90ZWN0ZWQnKTtcbmNvbnN0IHNwblByb3RlY3RlZENvbmZpcm1hdGlvbjogSFRNTElucHV0RWxlbWVudCA9IGdldEVsZW1lbnRCeUlkKCdzcG5Qcm90ZWN0ZWRDb25maXJtYXRpb24nKTtcbmNvbnN0IHR4dFBhdGg6IEhUTUxJbnB1dEVsZW1lbnQgPSBnZXRFbGVtZW50QnlJZCgndHh0UGF0aCcpO1xuY29uc3QgdHh0UHVibGljUGFydDogSFRNTElucHV0RWxlbWVudCA9IGdldEVsZW1lbnRCeUlkKCd0eHRQdWJsaWNQYXJ0Jyk7XG5jb25zdCBidG5HZW5lcmF0ZVB1YmxpY1BhcnQ6IEhUTUxJbnB1dEVsZW1lbnQgPSBnZXRFbGVtZW50QnlJZCgnYnRuR2VuZXJhdGVQdWJsaWNQYXJ0Jyk7XG5jb25zdCBidG5Db3B5UHVibGljUGFydDogSFRNTElucHV0RWxlbWVudCA9IGdldEVsZW1lbnRCeUlkKCdidG5Db3B5UHVibGljUGFydCcpO1xuY29uc3Qgc3BuQ29weVB1YmxpY1BhcnRGZWVkYmFjazogSFRNTElucHV0RWxlbWVudCA9IGdldEVsZW1lbnRCeUlkKCdzcG5Db3B5UHVibGljUGFydEZlZWRiYWNrJyk7XG5cbmNvbnN0IHNwblByaXZhdGVQYXJ0U2l6ZTogSFRNTElucHV0RWxlbWVudCA9IGdldEVsZW1lbnRCeUlkKCdzcG5Qcml2YXRlUGFydFNpemUnKTtcbmNvbnN0IHNwblByaXZhdGVQYXJ0U2l6ZUNvbmZpcm1hdGlvbjogSFRNTElucHV0RWxlbWVudCA9IGdldEVsZW1lbnRCeUlkKCdzcG5Qcml2YXRlUGFydFNpemVDb25maXJtYXRpb24nKTtcblxuY29uc3QgbnVtT3V0cHV0U2l6ZVJhbmdlOiBIVE1MSW5wdXRFbGVtZW50ID0gZ2V0RWxlbWVudEJ5SWQoJ251bU91dHB1dFNpemVSYW5nZScpO1xuY29uc3QgbnVtT3V0cHV0U2l6ZU51bTogSFRNTElucHV0RWxlbWVudCA9IGdldEVsZW1lbnRCeUlkKCdudW1PdXRwdXRTaXplTnVtJyk7XG5cbmNvbnN0IHR4dEFscGhhYmV0OiBIVE1MSW5wdXRFbGVtZW50ID0gZ2V0RWxlbWVudEJ5SWQoJ3R4dEFscGhhYmV0Jyk7XG5jb25zdCBzcG5BbHBoYWJldFNpemU6IEhUTUxJbnB1dEVsZW1lbnQgPSBnZXRFbGVtZW50QnlJZCgnc3BuQWxwaGFiZXRTaXplJyk7XG5jb25zdCBidG5SZXNldEFscGhhYmV0OiBIVE1MSW5wdXRFbGVtZW50ID0gZ2V0RWxlbWVudEJ5SWQoJ2J0blJlc2V0QWxwaGFiZXQnKTtcblxuY29uc3QgdHh0UmVzdWx0UGFzc3dvcmQ6IEhUTUxJbnB1dEVsZW1lbnQgPSBnZXRFbGVtZW50QnlJZCgndHh0UmVzdWx0UGFzc3dvcmQnKTtcbmNvbnN0IHNwblJlc3VsdFBhc3N3b3JkTGVuZ3RoOiBIVE1MSW5wdXRFbGVtZW50ID0gZ2V0RWxlbWVudEJ5SWQoJ3NwblJlc3VsdFBhc3N3b3JkTGVuZ3RoJyk7XG5jb25zdCBidG5Db3B5UmVzdWx0UGFzc3dvcmQ6IEhUTUxJbnB1dEVsZW1lbnQgPSBnZXRFbGVtZW50QnlJZCgnYnRuQ29weVJlc3VsdFBhc3N3b3JkJyk7XG5jb25zdCBzcG5Db3B5UmVzdWx0UGFzc3dvcmRGZWVkYmFjazogSFRNTElucHV0RWxlbWVudCA9IGdldEVsZW1lbnRCeUlkKCdzcG5Db3B5UmVzdWx0UGFzc3dvcmRGZWVkYmFjaycpO1xuXG5jb25zdCB0eHRQYXJhbWV0ZXJzOiBIVE1MSW5wdXRFbGVtZW50ID0gZ2V0RWxlbWVudEJ5SWQoJ3R4dFBhcmFtZXRlcnMnKTtcbmNvbnN0IHR4dEN1c3RvbUtleXM6IEhUTUxJbnB1dEVsZW1lbnQgPSBnZXRFbGVtZW50QnlJZCgndHh0Q3VzdG9tS2V5cycpO1xuXG5jb25zdCBERUZBVUxUX0xFTkdUSDogbnVtYmVyID0gNjQ7XG5cbi8vIEFscGhhYmV0IHYxIGlzIHNjcmV3ZWQsIHRoZSBjaGFyYWN0ZXIgeyBhcHBlYXJzIHR3aWNlIGFuZCB9IGlzIG1pc3NpbmcuXG5jb25zdCBERUZBVUxUX0FMUEhBQkVUX1YxOiBzdHJpbmcgPSAnYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWjAxMjM0NTY3ODlgfiFAIyQlXiYqKClfLT0rW3tde3w7OlxcJ1wiLDwuPi8/Jztcbi8vIEFscGhhYmV0IHYyIGlzIGNvcnJlY3QgYW5kIGluIEFTQ0lJIG9yZGVyLlxuY29uc3QgREVGQVVMVF9BTFBIQUJFVF9WMjogc3RyaW5nID0gJyFcIiMkJSZcXCcoKSorLC0uLzAxMjM0NTY3ODk6Ozw9Pj9AQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVpbXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fic7XG5cbmNvbnN0IERFRkFVTFRfQUxQSEFCRVQ6IHN0cmluZyA9IERFRkFVTFRfQUxQSEFCRVRfVjI7XG5cbmNvbnN0IFBSSVZBVEVfUEFSVF9QUk9URUNUSU9OX1RJTUVPVVQ6IG51bWJlciA9IDYwICogMTAwMDtcblxuY29uc3QgU1VDQ0VTU19DT0xPUjogc3RyaW5nID0gJyNEMEZGRDAnO1xuY29uc3QgRVJST1JfQ09MT1I6IHN0cmluZyA9ICcjRkZEMEQwJztcblxuY29uc3QgUkVTRVJWRURfS0VZUzogc3RyaW5nW10gPSBbJ2FscGhhYmV0JywgJ2xlbmd0aCcsICdwdWJsaWMnXTtcblxuLy8gZGFmdXEhP1xubnVtT3V0cHV0U2l6ZVJhbmdlLm1heCA9IERFRkFVTFRfTEVOR1RILnRvU3RyaW5nKCk7XG5udW1PdXRwdXRTaXplUmFuZ2UudmFsdWUgPSBERUZBVUxUX0xFTkdUSC50b1N0cmluZygpO1xuXG5sZXQgcHJpdmF0ZVBhcnQ6IHN0cmluZyB8IHVuZGVmaW5lZDtcblxuYnRuR2VuZXJhdGVQdWJsaWNQYXJ0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGNvbnN0IHJhbmRvbVN0cmluZzogc3RyaW5nID0gY3J5cHRvLmdlbmVyYXRlUmFuZG9tU3RyaW5nKCk7XG4gICAgdHh0UHVibGljUGFydC52YWx1ZSA9IHJhbmRvbVN0cmluZztcbiAgICBydW4oKTtcbn0pO1xuXG5mdW5jdGlvbiBnZXRQcml2YXRlUGFydCgpOiBzdHJpbmcge1xuICAgIGlmIChwcml2YXRlUGFydCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBwcml2YXRlUGFydDtcbiAgICB9XG4gICAgcmV0dXJuIHR4dFByaXZhdGVQYXJ0LnZhbHVlO1xufVxuXG5mdW5jdGlvbiBwcm90ZWN0UHJpdmF0ZVBhcnQoKTogdm9pZCB7XG4gICAgaWYgKHR4dFByaXZhdGVQYXJ0LnZhbHVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgcHJpdmF0ZVBhcnQgPSB0eHRQcml2YXRlUGFydC52YWx1ZTtcbiAgICBzcG5Qcm90ZWN0ZWRDb25maXJtYXRpb24uaW5uZXJIVE1MID0gYFByb3RlY3RlZCwgJHtwcml2YXRlUGFydC5sZW5ndGh9IGNoYXJhY3RlcnNgO1xuXG4gICAgdHh0UHJpdmF0ZVBhcnQudmFsdWUgPSAnJztcbiAgICB0eHRQcml2YXRlUGFydENvbmZpcm1hdGlvbi52YWx1ZSA9ICcnO1xuICAgIHNwblByaXZhdGVQYXJ0U2l6ZS5pbm5lckhUTUwgPSAnMCc7XG4gICAgc3BuUHJpdmF0ZVBhcnRTaXplQ29uZmlybWF0aW9uLmlubmVySFRNTCA9ICcwJztcblxuICAgIHVwZGF0ZVByaXZhdGVQYXJ0c01hdGNoaW5nKCk7XG59XG5cbmJ0blByb3RlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgcHJvdGVjdFByaXZhdGVQYXJ0KCk7XG59KTtcblxuZnVuY3Rpb24gY2xlYXJQcml2YXRlUGFydFByb3RlY3Rpb24oKSB7XG4gICAgcHJpdmF0ZVBhcnQgPSB1bmRlZmluZWQ7XG4gICAgc3BuUHJvdGVjdGVkQ29uZmlybWF0aW9uLmlubmVySFRNTCA9ICcnO1xufVxuXG5idG5DbGVhclByb3RlY3RlZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBjbGVhclByaXZhdGVQYXJ0UHJvdGVjdGlvbigpO1xuICAgIHJ1bigpO1xufSk7XG5cbmZ1bmN0aW9uIHVwZGF0ZUN1c3RvbUtleXNEaXNwbGF5KGlzVmFsaWQ6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBpZiAoaXNWYWxpZCkge1xuICAgICAgICB0eHRDdXN0b21LZXlzLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdiYWNrZ3JvdW5kJyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0eHRDdXN0b21LZXlzLnN0eWxlLnNldFByb3BlcnR5KCdiYWNrZ3JvdW5kJywgRVJST1JfQ09MT1IpO1xufVxuXG5mdW5jdGlvbiBwYXJzZUN1c3RvbUtleXMoKTogUGxhaW5PYmplY3QgfCBudWxsIHtcbiAgICBpZiAodHh0Q3VzdG9tS2V5cy52YWx1ZSA9PT0gJycpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG9iajogYW55ID0gSlNPTi5wYXJzZSh0eHRDdXN0b21LZXlzLnZhbHVlKTtcbiAgICAgICAgaWYgKG9iaiA9PT0gbnVsbCB8fCBvYmouY29uc3RydWN0b3IubmFtZSAhPT0gJ09iamVjdCcpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmogYXMgUGxhaW5PYmplY3Q7XG4gICAgfSBjYXRjaCB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc2hhbGxvd01lcmdlKHNvdXJjZTogUGxhaW5PYmplY3QgfCBudWxsLCB0YXJnZXQ6IFBsYWluT2JqZWN0IHwgbnVsbCk6IFBsYWluT2JqZWN0IHtcbiAgICBjb25zdCByZXN1bHQ6IFBsYWluT2JqZWN0ID0ge307XG5cbiAgICBpZiAoc291cmNlICE9PSBudWxsKSB7XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHNvdXJjZSkpIHtcbiAgICAgICAgICAgIGlmIChSRVNFUlZFRF9LRVlTLmluY2x1ZGVzKGtleSkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0W2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0YXJnZXQgIT09IG51bGwpIHtcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModGFyZ2V0KSkge1xuICAgICAgICAgICAgcmVzdWx0W2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIGRlZXBNZXJnZShzb3VyY2U6IFBsYWluT2JqZWN0LCB0YXJnZXQ6IFBsYWluT2JqZWN0KTogdm9pZCB7XG4gICAgZm9yIChjb25zdCBzb3VyY2VLZXkgb2YgT2JqZWN0LmtleXMoc291cmNlKSkge1xuICAgICAgICBjb25zdCB0YXJnZXRWYWx1ZTogYW55ID0gdGFyZ2V0W3NvdXJjZUtleV07XG4gICAgICAgIGNvbnN0IHNvdXJjZVZhbHVlOiBhbnkgPSBzb3VyY2Vbc291cmNlS2V5XTtcblxuICAgICAgICBpZiAodGFyZ2V0VmFsdWUgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgdGFyZ2V0VmFsdWUgPT09IG51bGwgfHxcbiAgICAgICAgICAgIHRhcmdldFZhbHVlLmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnIHx8XG4gICAgICAgICAgICBzb3VyY2VWYWx1ZS5jb25zdHJ1Y3Rvci5uYW1lICE9PSAnT2JqZWN0Jykge1xuICAgICAgICAgICAgdGFyZ2V0W3NvdXJjZUtleV0gPSBzb3VyY2VWYWx1ZTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgZGVlcE1lcmdlKHNvdXJjZVZhbHVlLCB0YXJnZXRWYWx1ZSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBzZXR1cFZpZXdCdXR0b24odHh0OiBIVE1MSW5wdXRFbGVtZW50LCBidXR0b25OYW1lOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBidG46IEhUTUxJbnB1dEVsZW1lbnQgPSBnZXRFbGVtZW50QnlJZChidXR0b25OYW1lKTtcbiAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGlmICh0eHQudHlwZSA9PT0gJ3Bhc3N3b3JkJykge1xuICAgICAgICAgICAgdHh0LnR5cGUgPSAnaW5wdXQnO1xuICAgICAgICAgICAgYnRuLmlubmVySFRNTCA9ICdIaWRlJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHR4dC50eXBlID0gJ3Bhc3N3b3JkJztcbiAgICAgICAgICAgIGJ0bi5pbm5lckhUTUwgPSAnVmlldyc7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuY29uc3QgY29weVJlc3VsdFBhc3N3b3JkVG9DbGlwYm9hcmRGZWVkYmFja09iamVjdDogVmlzdWFsRmVlZGJhY2sgPSBuZXcgVmlzdWFsRmVlZGJhY2soc3BuQ29weVJlc3VsdFBhc3N3b3JkRmVlZGJhY2spO1xuY29uc3QgY29weVB1YmxpY1BhcnRUb0NsaXBib2FyZEZlZWRiYWNrT2JqZWN0OiBWaXN1YWxGZWVkYmFjayA9IG5ldyBWaXN1YWxGZWVkYmFjayhzcG5Db3B5UHVibGljUGFydEZlZWRiYWNrKTtcblxuYXN5bmMgZnVuY3Rpb24gd3JpdGVUb0NsaXBib2FyZCh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICB0cnkge1xuICAgICAgICBhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dCh0ZXh0KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvci5zdGFjayB8fCBlcnJvcik7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHNldHVwQ29weUJ1dHRvbih0eHQ6IEhUTUxJbnB1dEVsZW1lbnQsIGJ1dHRvbjogSFRNTElucHV0RWxlbWVudCwgZmVlZGJhY2s6IFZpc3VhbEZlZWRiYWNrKTogdm9pZCB7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBpZiAoYXdhaXQgd3JpdGVUb0NsaXBib2FyZCh0eHQudmFsdWUpKSB7XG4gICAgICAgICAgICBmZWVkYmFjay5zZXRUZXh0KCdDb3BpZWQnLCAzMDAwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZlZWRiYWNrLnNldFRleHQoJzxzcGFuIHN0eWxlPVwiY29sb3I6IHJlZFwiPkZhaWxlZCB0byBjb3B5PC9zcGFuPicsIDMwMDApO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZVJlc3VsdFBhc3N3b3JkTGVuZ3RoKCkge1xuICAgIHNwblJlc3VsdFBhc3N3b3JkTGVuZ3RoLmlubmVySFRNTCA9IHR4dFJlc3VsdFBhc3N3b3JkLnZhbHVlLmxlbmd0aC50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcgJyk7XG59XG5cbnNldHVwVmlld0J1dHRvbih0eHRSZXN1bHRQYXNzd29yZCwgJ2J0blZpZXdSZXN1bHRQYXNzd29yZCcpO1xuXG5zZXR1cENvcHlCdXR0b24odHh0UHVibGljUGFydCwgYnRuQ29weVB1YmxpY1BhcnQsIGNvcHlQdWJsaWNQYXJ0VG9DbGlwYm9hcmRGZWVkYmFja09iamVjdCk7XG5zZXR1cENvcHlCdXR0b24odHh0UmVzdWx0UGFzc3dvcmQsIGJ0bkNvcHlSZXN1bHRQYXNzd29yZCwgY29weVJlc3VsdFBhc3N3b3JkVG9DbGlwYm9hcmRGZWVkYmFja09iamVjdCk7XG5cbmZ1bmN0aW9uIGlzQWxwaGFiZXRWYWxpZChhbHBoYWJldDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3Qgc29ydGVkQWxwaGFiZXQ6IHN0cmluZ1tdID0gYWxwaGFiZXQuc3BsaXQoJycpO1xuICAgIHNvcnRlZEFscGhhYmV0LnNvcnQoKTtcblxuICAgIGZvciAobGV0IGk6IG51bWJlciA9IDE7IGkgPCBzb3J0ZWRBbHBoYWJldC5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBpZiAoc29ydGVkQWxwaGFiZXRbaSAtIDFdID09PSBzb3J0ZWRBbHBoYWJldFtpXSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG59XG5cbnR5cGUgSUNoYWluSW5mbyA9IHtcbiAgICBoZWFkOiBQbGFpbk9iamVjdCxcbiAgICB0YWlsUGFyZW50OiBQbGFpbk9iamVjdCxcbiAgICB0YWlsOiBQbGFpbk9iamVjdFxufTtcblxuLy8gVHJhbnNmb3JtcyBhIHBhdGggbGlrZSBcImEvYi9jL2RcIiBpbnRvIGEgaGllcmFyY2h5IG9mIG9iamVjdHMgbGlrZSB7IFwiYVwiOiB7IFwiYlwiOiB7IFwiY1wiOiB7IFwiZFwiOiB7fSB9IH0gfSB9XG4vLyBGcm9tIHRoZSByZXN1bHQgb2JqZWN0LCBoZWFkIGlzIHRoZSByb290IG9iamVjdCB0aGF0IGNvbnRhaW5zIFwiYVwiLCB0YWlsIGlzIHRoZSB2YWx1ZSBvZiBcImRcIiwgYW5kIHRhaWxQYXJlbnQgaXMgdGhlIHZhbHVlIG9mIFwiY1wiXG5mdW5jdGlvbiBwYXRoVG9PYmplY3RDaGFpbihwYXRoOiBzdHJpbmcsIGNoYWluSW5mbzogSUNoYWluSW5mbyB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZCk6IElDaGFpbkluZm8ge1xuICAgIGNvbnN0IHNlcGFyYXRvckluZGV4OiBudW1iZXIgPSBwYXRoLmluZGV4T2YoJy8nKTtcblxuICAgIGNvbnN0IHRhaWw6IFBsYWluT2JqZWN0ID0ge307XG5cbiAgICBjb25zdCBmaXJzdFBhdGg6IHN0cmluZyA9IHNlcGFyYXRvckluZGV4ID49IDAgPyBwYXRoLnN1YnN0cigwLCBzZXBhcmF0b3JJbmRleCkgOiBwYXRoO1xuICAgIGNvbnN0IHJlbWFpbmluZ1BhdGg6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHNlcGFyYXRvckluZGV4ID49IDAgPyBwYXRoLnN1YnN0cihzZXBhcmF0b3JJbmRleCArIDEpIDogdW5kZWZpbmVkO1xuXG4gICAgaWYgKGNoYWluSW5mbyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IG5vZGU6IFBsYWluT2JqZWN0ID0ge307XG4gICAgICAgIG5vZGVbZmlyc3RQYXRoXSA9IHRhaWw7XG4gICAgICAgIGNoYWluSW5mbyA9IHtcbiAgICAgICAgICAgIGhlYWQ6IG5vZGUsXG4gICAgICAgICAgICB0YWlsUGFyZW50OiBub2RlLFxuICAgICAgICAgICAgdGFpbFxuICAgICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNoYWluSW5mby50YWlsW2ZpcnN0UGF0aF0gPSB0YWlsO1xuICAgICAgICBjaGFpbkluZm8udGFpbFBhcmVudCA9IGNoYWluSW5mby50YWlsO1xuICAgICAgICBjaGFpbkluZm8udGFpbCA9IHRhaWw7XG4gICAgfVxuXG4gICAgaWYgKHJlbWFpbmluZ1BhdGgpIHtcbiAgICAgICAgcmV0dXJuIHBhdGhUb09iamVjdENoYWluKHJlbWFpbmluZ1BhdGgsIGNoYWluSW5mbyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNoYWluSW5mbztcbn1cblxuZnVuY3Rpb24gdXBkYXRlUGFzc3dvcmRHZW5lcmF0aW9uUGFyYW1ldGVycygpOiB2b2lkIHtcbiAgICBpZiAoY2FuUnVuKCkgPT09IGZhbHNlKSB7XG4gICAgICAgIHR4dFBhcmFtZXRlcnMudmFsdWUgPSAnJztcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGNoYWluSW5mbzogSUNoYWluSW5mbyA9IHBhdGhUb09iamVjdENoYWluKHR4dFBhdGgudmFsdWUpO1xuICAgIGNvbnN0IGxlYWY6IFBsYWluT2JqZWN0ID0gY2hhaW5JbmZvLnRhaWw7XG5cbiAgICBsZWFmLnB1YmxpYyA9IHR4dFB1YmxpY1BhcnQudmFsdWU7XG5cbiAgICBjb25zdCBudW1lcmljVmFsdWU6IG51bWJlciA9IHBhcnNlSW50KG51bU91dHB1dFNpemVOdW0udmFsdWUsIDEwKTtcbiAgICBpZiAobnVtZXJpY1ZhbHVlICE9PSBERUZBVUxUX0xFTkdUSCkge1xuICAgICAgICBsZWFmLmxlbmd0aCA9IG51bWVyaWNWYWx1ZTtcbiAgICB9XG5cbiAgICBjb25zdCBhbHBoYWJldDogc3RyaW5nID0gdHh0QWxwaGFiZXQudmFsdWU7XG4gICAgaWYgKGFscGhhYmV0ICE9PSBERUZBVUxUX0FMUEhBQkVUKSB7XG4gICAgICAgIGxlYWYuYWxwaGFiZXQgPSBhbHBoYWJldDtcbiAgICB9XG5cbiAgICBjb25zdCBjdXN0b21LZXlzOiBQbGFpbk9iamVjdCB8IG51bGwgPSBwYXJzZUN1c3RvbUtleXMoKTtcbiAgICB1cGRhdGVDdXN0b21LZXlzRGlzcGxheShjdXN0b21LZXlzICE9PSBudWxsKTtcbiAgICBjb25zdCByZXN1bHRQYXJhbWV0ZXJzOiBQbGFpbk9iamVjdCA9IHNoYWxsb3dNZXJnZShjdXN0b21LZXlzLCBsZWFmKTtcblxuICAgIGlmIChPYmplY3Qua2V5cyhyZXN1bHRQYXJhbWV0ZXJzKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gU2V0IHRoZSB2YWx1ZSBvZiB0aGUgZmlyc3QgKHNpbmdsZSkgcHJvcGVydHkgb2YgdGhlIG9iamVjdCB0byBudWxsLlxuICAgICAgICBjaGFpbkluZm8udGFpbFBhcmVudFtPYmplY3Qua2V5cyhjaGFpbkluZm8udGFpbFBhcmVudClbMF1dID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjaGFpbkluZm8udGFpbFBhcmVudFtPYmplY3Qua2V5cyhjaGFpbkluZm8udGFpbFBhcmVudClbMF1dID0gcmVzdWx0UGFyYW1ldGVycztcbiAgICB9XG5cbiAgICB0eHRQYXJhbWV0ZXJzLnZhbHVlID0gSlNPTi5zdHJpbmdpZnkoY2hhaW5JbmZvLmhlYWQsIHVuZGVmaW5lZCwgNCk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZU91dHB1dFNpemVSYW5nZVRvTnVtKCk6IHZvaWQge1xuICAgIG51bU91dHB1dFNpemVOdW0udmFsdWUgPSBudW1PdXRwdXRTaXplUmFuZ2UudmFsdWU7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZU91dHB1dFNpemVOdW1Ub1JhbmdlKCk6IHZvaWQge1xuICAgIGNvbnN0IG1pbjogbnVtYmVyID0gcGFyc2VJbnQobnVtT3V0cHV0U2l6ZVJhbmdlLm1pbiwgMTApO1xuICAgIGNvbnN0IHZhbDogbnVtYmVyID0gcGFyc2VJbnQobnVtT3V0cHV0U2l6ZU51bS52YWx1ZSwgMTApO1xuICAgIGNvbnN0IG1heDogbnVtYmVyID0gcGFyc2VJbnQobnVtT3V0cHV0U2l6ZVJhbmdlLm1heCwgMTApO1xuICAgIG51bU91dHB1dFNpemVSYW5nZS52YWx1ZSA9IE1hdGgubWF4KG1pbiwgTWF0aC5taW4odmFsLCBtYXgpKS50b1N0cmluZygpO1xufVxuXG5udW1PdXRwdXRTaXplUmFuZ2UuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgdXBkYXRlT3V0cHV0U2l6ZVJhbmdlVG9OdW0oKTtcbiAgICBydW4oKTtcbn0pO1xuXG5udW1PdXRwdXRTaXplTnVtLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgIHVwZGF0ZU91dHB1dFNpemVOdW1Ub1JhbmdlKCk7XG4gICAgdXBkYXRlT3V0cHV0U2l6ZVJhbmdlVG9OdW0oKTtcbiAgICBydW4oKTtcbn0pO1xuXG5mdW5jdGlvbiB1cGRhdGVBbHBoYWJldFNpemUoKTogdm9pZCB7XG4gICAgc3BuQWxwaGFiZXRTaXplLmlubmVySFRNTCA9IHR4dEFscGhhYmV0LnZhbHVlLmxlbmd0aC50b1N0cmluZygpO1xuXG4gICAgY29uc3QgYWxwaGFiZXRTaXplRGlnaXRDb3VudDogbnVtYmVyID0gdHh0QWxwaGFiZXQudmFsdWUubGVuZ3RoLnRvU3RyaW5nKCkubGVuZ3RoO1xuICAgIGlmIChhbHBoYWJldFNpemVEaWdpdENvdW50IDwgMikge1xuICAgICAgICAvLyBBZGQgYSBzcGFjZSB0byBrZWVwIGEgbmljZSB2aXN1YWwgYWxpZ25tZW50LlxuICAgICAgICBzcG5BbHBoYWJldFNpemUuaW5uZXJIVE1MID0gc3BuQWxwaGFiZXRTaXplLmlubmVySFRNTC5wYWRTdGFydCgyLCAnICcpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gdXBkYXRlQWxwaGFiZXRWYWxpZGl0eURpc3BsYXkoaXNBbHBoYWJldFZhbGlkOiBib29sZWFuKTogdm9pZCB7XG4gICAgaWYgKGlzQWxwaGFiZXRWYWxpZCkge1xuICAgICAgICB0eHRBbHBoYWJldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnYmFja2dyb3VuZCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHR4dEFscGhhYmV0LnN0eWxlLnNldFByb3BlcnR5KCdiYWNrZ3JvdW5kJywgRVJST1JfQ09MT1IpO1xuICAgIH1cbn1cblxudHh0QWxwaGFiZXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgY29uc3QgaXNBbHBoYWJldFZhbGlkUmVzdWx0OiBib29sZWFuID0gaXNBbHBoYWJldFZhbGlkKHR4dEFscGhhYmV0LnZhbHVlKTtcblxuICAgIHVwZGF0ZUFscGhhYmV0VmFsaWRpdHlEaXNwbGF5KGlzQWxwaGFiZXRWYWxpZFJlc3VsdCk7XG5cbiAgICBpZiAoaXNBbHBoYWJldFZhbGlkUmVzdWx0ID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdXBkYXRlQWxwaGFiZXRTaXplKCk7XG4gICAgcnVuKCk7XG59KTtcblxuYnRuUmVzZXRBbHBoYWJldC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICByZXNldEFscGhhYmV0KCk7XG4gICAgdXBkYXRlQWxwaGFiZXRTaXplKCk7XG4gICAgcnVuKCk7XG59KTtcblxuZnVuY3Rpb24gY2xlYXJPdXRwdXRzKCk6IHZvaWQge1xuICAgIHR4dFJlc3VsdFBhc3N3b3JkLnZhbHVlID0gJyc7XG5cbiAgICB1cGRhdGVSZXN1bHRQYXNzd29yZExlbmd0aCgpO1xufVxuXG5mdW5jdGlvbiBjYW5SdW4oKTogYm9vbGVhbiB7XG4gICAgY29uc3QgYWxwaGFiZXQ6IHN0cmluZyA9IHR4dEFscGhhYmV0LnZhbHVlO1xuXG4gICAgaWYgKGlzQWxwaGFiZXRWYWxpZChhbHBoYWJldCkgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoZ2V0UHJpdmF0ZVBhcnQoKS5sZW5ndGggPD0gMCB8fCB0eHRQdWJsaWNQYXJ0LnZhbHVlLmxlbmd0aCA8IDggfHwgYWxwaGFiZXQubGVuZ3RoIDwgMikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHJ1bigpIHtcbiAgICB1cGRhdGVQYXNzd29yZEdlbmVyYXRpb25QYXJhbWV0ZXJzKCk7XG5cbiAgICBpZiAoY2FuUnVuKCkgPT09IGZhbHNlKSB7XG4gICAgICAgIGNsZWFyT3V0cHV0cygpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcHJpdmF0ZVBhcnRTdHJpbmc6IHN0cmluZyA9IGdldFByaXZhdGVQYXJ0KCk7XG4gICAgY29uc3QgcHVibGljUGFydFN0cmluZyA9IHR4dFB1YmxpY1BhcnQudmFsdWU7XG5cbiAgICBjb25zdCBwcml2YXRlUHJpdmF0ZUJ5dGVzOiBBcnJheUJ1ZmZlciA9IHN0cmluZ1V0aWxzLnN0cmluZ1RvQXJyYXkocHJpdmF0ZVBhcnRTdHJpbmcpO1xuICAgIGNvbnN0IHB1YmxpY1BhcnRCeXRlczogQXJyYXlCdWZmZXIgPSBzdHJpbmdVdGlscy5zdHJpbmdUb0FycmF5KHB1YmxpY1BhcnRTdHJpbmcpO1xuXG4gICAgY29uc3Qga2V5Qnl0ZXM6IEFycmF5QnVmZmVyID0gYXdhaXQgY3J5cHRvLmdlbmVyYXRlUGFzc3dvcmQocHJpdmF0ZVByaXZhdGVCeXRlcywgcHVibGljUGFydEJ5dGVzLCAnUGFzc3dvcmQnKTtcblxuICAgIGNvbnN0IGtleVN0cmluZzogc3RyaW5nID0gYXJyYXlVdGlscy50b0N1c3RvbUJhc2Uoa2V5Qnl0ZXMsIHR4dEFscGhhYmV0LnZhbHVlKTtcbiAgICB0eHRSZXN1bHRQYXNzd29yZC52YWx1ZSA9IHN0cmluZ1V0aWxzLnRydW5jYXRlKGtleVN0cmluZywgcGFyc2VJbnQobnVtT3V0cHV0U2l6ZVJhbmdlLnZhbHVlLCAxMCkpO1xuXG4gICAgdXBkYXRlUmVzdWx0UGFzc3dvcmRMZW5ndGgoKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gcmVzZXRBbHBoYWJldCgpIHtcbiAgICB0eHRBbHBoYWJldC52YWx1ZSA9IERFRkFVTFRfQUxQSEFCRVQ7XG4gICAgdXBkYXRlQWxwaGFiZXRTaXplKCk7XG5cbiAgICBjb25zdCBpc0FscGhhYmV0VmFsaWRSZXN1bHQ6IGJvb2xlYW4gPSBpc0FscGhhYmV0VmFsaWQodHh0QWxwaGFiZXQudmFsdWUpO1xuXG4gICAgdXBkYXRlQWxwaGFiZXRWYWxpZGl0eURpc3BsYXkoaXNBbHBoYWJldFZhbGlkUmVzdWx0KTtcblxuICAgIGlmIChpc0FscGhhYmV0VmFsaWRSZXN1bHQpIHtcbiAgICAgICAgYXdhaXQgcnVuKCk7XG4gICAgfVxufVxuXG5jb25zdCBwcm90ZWN0UHJpdmF0ZVBhcnRBY3Rpb246IFRpbWVkQWN0aW9uID0gbmV3IFRpbWVkQWN0aW9uKHByb3RlY3RQcml2YXRlUGFydCwgUFJJVkFURV9QQVJUX1BST1RFQ1RJT05fVElNRU9VVCk7XG5cbnR4dFByaXZhdGVQYXJ0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgIGNsZWFyUHJpdmF0ZVBhcnRQcm90ZWN0aW9uKCk7XG4gICAgc3BuUHJpdmF0ZVBhcnRTaXplLmlubmVySFRNTCA9IHR4dFByaXZhdGVQYXJ0LnZhbHVlLmxlbmd0aC50b1N0cmluZygpO1xuICAgIHVwZGF0ZVByaXZhdGVQYXJ0c01hdGNoaW5nKCk7XG4gICAgcnVuKCk7XG4gICAgcHJvdGVjdFByaXZhdGVQYXJ0QWN0aW9uLnJlc2V0KCk7XG59KTtcblxuZnVuY3Rpb24gdXBkYXRlUHJpdmF0ZVBhcnRzTWF0Y2hpbmcoKTogdm9pZCB7XG4gICAgaWYgKHR4dFByaXZhdGVQYXJ0Q29uZmlybWF0aW9uLnZhbHVlID09PSB0eHRQcml2YXRlUGFydC52YWx1ZSkge1xuICAgICAgICB0eHRQcml2YXRlUGFydENvbmZpcm1hdGlvbi5zdHlsZS5zZXRQcm9wZXJ0eSgnYmFja2dyb3VuZCcsIFNVQ0NFU1NfQ09MT1IpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHR4dFByaXZhdGVQYXJ0Q29uZmlybWF0aW9uLnN0eWxlLnNldFByb3BlcnR5KCdiYWNrZ3JvdW5kJywgRVJST1JfQ09MT1IpO1xuICAgIH1cbn07XG5cbnR4dFByaXZhdGVQYXJ0Q29uZmlybWF0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgIHNwblByaXZhdGVQYXJ0U2l6ZUNvbmZpcm1hdGlvbi5pbm5lckhUTUwgPSB0eHRQcml2YXRlUGFydENvbmZpcm1hdGlvbi52YWx1ZS5sZW5ndGgudG9TdHJpbmcoKTtcbiAgICB1cGRhdGVQcml2YXRlUGFydHNNYXRjaGluZygpO1xufSk7XG5cbnR4dFBhdGguYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgdXBkYXRlUGFzc3dvcmRHZW5lcmF0aW9uUGFyYW1ldGVycygpO1xufSk7XG5cbnR4dFB1YmxpY1BhcnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgdXBkYXRlUGFzc3dvcmRHZW5lcmF0aW9uUGFyYW1ldGVycygpO1xuICAgIHJ1bigpO1xufSk7XG5cbnR4dEN1c3RvbUtleXMuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgdXBkYXRlUGFzc3dvcmRHZW5lcmF0aW9uUGFyYW1ldGVycygpO1xufSk7XG5cbnVwZGF0ZU91dHB1dFNpemVSYW5nZVRvTnVtKCk7XG5yZXNldEFscGhhYmV0KCk7XG51cGRhdGVQcml2YXRlUGFydHNNYXRjaGluZygpO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGltZWRBY3Rpb24ge1xuICAgIHByaXZhdGUgdGltZW91dDogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihwcml2YXRlIGFjdGlvbjogRnVuY3Rpb24sIHByaXZhdGUgZGVsYXk6IG51bWJlcikge1xuICAgIH1cblxuICAgIHB1YmxpYyByZXNldChvdmVycmlkZURlbGF5OiBudW1iZXIgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMudGltZW91dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRlbGF5ID0gb3ZlcnJpZGVEZWxheSAhPT0gdW5kZWZpbmVkID8gb3ZlcnJpZGVEZWxheSA6IHRoaXMuZGVsYXk7XG5cbiAgICAgICAgdGhpcy50aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFjdGlvbigpO1xuICAgICAgICAgICAgdGhpcy50aW1lb3V0ID0gdW5kZWZpbmVkO1xuICAgICAgICB9LCBkZWxheSk7XG4gICAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==
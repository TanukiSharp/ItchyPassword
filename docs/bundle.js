!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";function r(t,e){const n=BigInt(e.length);let r="",i=function(t){const e=t.byteLength,n=new DataView(t,0);let r=0n;for(let t=0;t<e;t+=1)r+=BigInt(n.getUint8(t))*256n**BigInt(t);return r}(t);for(;i>0n;){const t=i%n;i/=n,r+=e[BigInt.asUintN(64,t)]}return r}function i(t){return(new TextEncoder).encode(t).buffer}n.r(e);class a{constructor(t){this.hkdfPurpose=i(t),this._description=`HKDF(PBKDF2, HMAC512) [purpose: ${t}]`}get version(){return 1}get description(){return this._description}async generatePassword(t,e){const n=await l(t,e),r=await crypto.subtle.importKey("raw",n,{name:"HMAC",hash:{name:"SHA-512"}},!1,["sign"]);return await crypto.subtle.sign("HMAC",r,this.hkdfPurpose)}}const o=new Uint8Array([242,207,239,142,19,64,70,73,146,42,222,92,188,136,56,168]).buffer;class s{get version(){return 1}get description(){return"PBKDF2 + AES-GCM"}async encrypt(t,e){const n=new ArrayBuffer(28+t.byteLength),r=new DataView(n,0,12);crypto.getRandomValues(new Uint8Array(n,0,12));const i={name:"AES-GCM",iv:r},a=await crypto.subtle.importKey("raw",await l(e,o),{name:"AES-GCM",length:256},!1,["encrypt"]),s=await crypto.subtle.encrypt(i,a,t);return new Uint8Array(n).set(new Uint8Array(s),12),n}async decrypt(t,e){const n=new DataView(t,0,12),r=new DataView(t,12),i={name:"AES-GCM",iv:n},a=await l(e,o),s=await crypto.subtle.importKey("raw",a,{name:"AES-GCM",length:256},!1,["decrypt"]);return await crypto.subtle.decrypt(i,s,r)}}const u="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";new a("Password"),new s;async function l(t,e){const n=await crypto.subtle.importKey("raw",t,"PBKDF2",!1,["deriveKey"]),r={name:"PBKDF2",hash:"SHA-512",iterations:1e5,salt:e},i=await crypto.subtle.deriveKey(r,n,{name:"AES-CBC",length:256},!0,["encrypt"]);return await crypto.subtle.exportKey("raw",i)}function c(t=64,e=u){return r(function(t=64){const e=new Uint8Array(t);return crypto.getRandomValues(e).buffer}(t),e)}class d{constructor(t){this.element=t}setText(t,e){this.element.innerHTML=t,this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.element.innerHTML="",e)}}const p=new a("Password");new s;function y(t){const e=document.getElementById(t);if(null===t)throw new Error(`DOM element '${t}' not found.`);return e}const v="Stores the string in memory and removes it from the UI component. Prevents a physical intruder from copy/pasting the value.",f="Removes the string form memory and re-enables the UI component.",b=y("txtPrivatePart"),h=y("txtPrivatePartConfirmation"),g=y("btnProtect"),m=y("spnProtectedConfirmation"),w=y("txtPath"),P=y("txtPublicPart"),L=y("btnGeneratePublicPart"),S=y("btnClearPublicPart"),M=y("btnCopyPublicPart"),T=y("spnCopyPublicPartFeedback"),x=y("spnPrivatePartSize"),E=y("spnPrivatePartSizeConfirmation"),H=y("numOutputSizeRange"),k=y("numOutputSizeNum"),A=y("txtAlphabet"),C=y("spnAlphabetSize"),O=y("btnResetAlphabet"),D=y("txtResultPassword"),j=y("spnResultPasswordLength"),I=y("btnCopyResultPassword"),K=y("spnCopyResultPasswordFeedback"),F=y("txtParameters"),B=y("txtCustomKeys"),R=64,U="!\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}~",V="#D0FFD0",_="#FFD0D0",G=["alphabet","length","public","datetime"];let z,N;function J(){N=P.value.length>0?(new Date).toISOString():void 0}function $(){return void 0!==z?z:b.value}function q(){0!==b.value.length&&(z=b.value,m.innerHTML="Protected",b.value="",h.value="",x.innerHTML="0",E.innerHTML="0",b.disabled=!0,h.disabled=!0,g.innerHTML="Clear and unlock",g.title=f,ct())}function Q(){void 0===z?q():(z=void 0,m.innerHTML="",b.disabled=!1,h.disabled=!1,g.innerHTML="Protect and lock",g.title=v,g.disabled=!0)}H.max=R.toString(),H.value=R.toString(),S.addEventListener("click",()=>{P.value.length>0&&"y"!==prompt("Are you sure you want to clear the public part ?\nType 'y' to accept","")||(P.value="",J(),et())}),L.addEventListener("click",()=>{if(P.value.length>0&&"y"!==prompt("Are you sure you want to generate a new public part ?\nType 'y' to accept",""))return;const t=c();P.value=t,J(),st()}),g.addEventListener("click",()=>{Q()});const W=new d(K),X=new d(T);function Y(t,e,n){e.addEventListener("click",async()=>{await async function(t){try{return await navigator.clipboard.writeText(t),!0}catch(t){return console.error(t.stack||t),!1}}(t.value)?n.setText("Copied",3e3):n.setText('<span style="color: red">Failed to copy</span>',3e3)})}function Z(){j.innerHTML=D.value.length.toString().padStart(2," ")}function tt(t){const e=t.split("");e.sort();for(let t=1;t<e.length;t+=1)if(e[t-1]===e[t])return!1;return!0}function et(){if(!1===ot())return void at();const t=function t(e,n){const r=e.indexOf("/"),i={},a=r>=0?e.substr(0,r):e,o=r>=0?e.substr(r+1):void 0;if(void 0===n){const t={};t[a]=i,n={head:t,tailParent:t,tail:i}}else n.tail[a]=i,n.tailParent=n.tail,n.tail=i;return o?t(o,n):n}(w.value),e=t.tail;e.public=P.value,e.datetime=N;const n=parseInt(k.value,10);n!==R&&(e.length=n);const r=A.value;r!==U&&(e.alphabet=r);const i=function(){if(""===B.value)return{};try{const t=JSON.parse(B.value);return null===t||"Object"!==t.constructor.name?null:t}catch{return null}}();null!==i?B.style.removeProperty("background"):B.style.setProperty("background",_);const a=function(t,e){const n={};if(null!==t)for(const[e,r]of Object.entries(t))!1===G.includes(e)&&(n[e]=r);if(null!==e)for(const[t,r]of Object.entries(e))n[t]=r;return n}(i,e);0===Object.keys(a).length?t.tailParent[Object.keys(t.tailParent)[0]]=null:t.tailParent[Object.keys(t.tailParent)[0]]=a,F.value=JSON.stringify(t.head,void 0,4)}function nt(){k.value=H.value}function rt(){C.innerHTML=A.value.length.toString(),A.value.length.toString().length<2&&(C.innerHTML=C.innerHTML.padStart(2," "))}function it(t){t?A.style.removeProperty("background"):A.style.setProperty("background",_)}function at(){D.value="",F.value="",Z()}function ot(){const t=A.value;return!1!==tt(t)&&!($().length<=0||P.value.length<8||t.length<2)}async function st(){if(et(),!1===ot())return void at();const t=$(),e=P.value,n=i(t),a=i(e),o=r(await p.generatePassword(n,a),A.value);var s,u;D.value=(s=o,u=parseInt(H.value,10),s.length<=u?s:s.substr(0,u)),Z()}async function ut(){A.value=U,rt();const t=tt(A.value);it(t),t&&await st()}!function(t,e){const n=y(e);n.addEventListener("click",()=>{"password"===t.type?(t.type="input",n.innerHTML="Hide"):(t.type="password",n.innerHTML="View")})}(D,"btnViewResultPassword"),Y(P,M,X),Y(D,I,W),H.addEventListener("input",()=>{nt(),st()}),k.addEventListener("input",()=>{!function(){const t=parseInt(H.min,10),e=parseInt(k.value,10),n=parseInt(H.max,10);H.value=Math.max(t,Math.min(e,n)).toString()}(),nt(),st()}),A.addEventListener("input",()=>{const t=tt(A.value);it(t),!1!==t&&(rt(),st())}),O.addEventListener("click",()=>{ut(),rt(),st()});const lt=new class{constructor(t,e){this.action=t,this.delay=e}reset(t){void 0!==this.timeout&&clearTimeout(this.timeout);const e=void 0!==t?t:this.delay;this.timeout=setTimeout(()=>{this.action(),this.timeout=void 0},e)}}(q,6e4);function ct(){h.value===b.value?h.style.setProperty("background",V):h.style.setProperty("background",_)}b.addEventListener("input",()=>{g.disabled=0===b.value.length,x.innerHTML=b.value.length.toString(),ct(),st(),lt.reset()}),h.addEventListener("input",()=>{E.innerHTML=h.value.length.toString(),ct()}),w.addEventListener("input",()=>{et()}),P.addEventListener("input",()=>{J(),et(),st()}),B.addEventListener("input",()=>{et()}),nt(),ut(),ct(),g.title=v}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FycmF5VXRpbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0cmluZ1V0aWxzLnRzIiwid2VicGFjazovLy8uL3NyYy9wYXNzd29yZEdlbmVyYXRvcnMvdjEudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NpcGhlcnMvdjEudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NyeXB0by50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVmlzdWFsRmVlZGJhY2sudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3VpLnRzIiwid2VicGFjazovLy8uL3NyYy9UaW1lZEFjdGlvbi50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsInRvQ3VzdG9tQmFzZSIsImJ5dGVzIiwiYWxwaGFiZXQiLCJhbHBoYWJldExlbmd0aCIsIkJpZ0ludCIsImxlbmd0aCIsInJlc3VsdCIsIm51bWJlciIsImFycmF5QnVmZmVyIiwiYnl0ZUxlbmd0aCIsImFycmF5VmlldyIsIkRhdGFWaWV3IiwiZ2V0VWludDgiLCJhcnJheUJ1ZmZlclRvVW5zaWduZWRCaWdJbnQiLCJyZW1haW5kZXIiLCJhc1VpbnROIiwic3RyaW5nVG9BcnJheSIsInN0ciIsIlRleHRFbmNvZGVyIiwiZW5jb2RlIiwiYnVmZmVyIiwiaGtkZlB1cnBvc2UiLCJ0aGlzIiwiX2Rlc2NyaXB0aW9uIiwicHJpdmF0ZVBhcnQiLCJwdWJsaWNQYXJ0IiwiZGVyaXZlZEtleSIsImdldERlcml2ZWRCeXRlcyIsImhrZGZLZXkiLCJjcnlwdG8iLCJzdWJ0bGUiLCJpbXBvcnRLZXkiLCJoYXNoIiwic2lnbiIsImVuY3J5cHRpb25LZXlEZXJpdmF0aW9uU2FsdCIsIlVpbnQ4QXJyYXkiLCJpbnB1dCIsInBhc3N3b3JkIiwib3V0cHV0IiwiQXJyYXlCdWZmZXIiLCJub25jZSIsImdldFJhbmRvbVZhbHVlcyIsImFlc0djbVBhcmFtcyIsIml2IiwicGFzc3dvcmRLZXkiLCJlbmNyeXB0Iiwic2V0IiwicGF5bG9hZCIsImRlY3J5cHQiLCJCQVNFNjJfQUxQSEFCRVQiLCJhc3luYyIsInNhbHQiLCJiYXNlS2V5IiwiYWxnb3JpdGhtIiwiaXRlcmF0aW9ucyIsImRlcml2ZUtleSIsImV4cG9ydEtleSIsImdlbmVyYXRlUmFuZG9tU3RyaW5nIiwiYnl0ZUNvdW50IiwiYXJyYXkiLCJnZW5lcmF0ZVJhbmRvbUJ5dGVzIiwiVmlzdWFsRmVlZGJhY2siLCJlbGVtZW50IiwidGV4dCIsImR1cmF0aW9uIiwiaW5uZXJIVE1MIiwidGltZW91dCIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJwYXNzd29yZEdlbmVyYXRvciIsImdldEVsZW1lbnRCeUlkIiwiZWxlbWVudE5hbWUiLCJkb2N1bWVudCIsIkVycm9yIiwiYnRuUHJvdGVjdFRpdGxlRm9yUHJvdGVjdCIsImJ0blByb3RlY3RUaXRsZUZvckNsZWFyIiwidHh0UHJpdmF0ZVBhcnQiLCJ0eHRQcml2YXRlUGFydENvbmZpcm1hdGlvbiIsImJ0blByb3RlY3QiLCJzcG5Qcm90ZWN0ZWRDb25maXJtYXRpb24iLCJ0eHRQYXRoIiwidHh0UHVibGljUGFydCIsImJ0bkdlbmVyYXRlUHVibGljUGFydCIsImJ0bkNsZWFyUHVibGljUGFydCIsImJ0bkNvcHlQdWJsaWNQYXJ0Iiwic3BuQ29weVB1YmxpY1BhcnRGZWVkYmFjayIsInNwblByaXZhdGVQYXJ0U2l6ZSIsInNwblByaXZhdGVQYXJ0U2l6ZUNvbmZpcm1hdGlvbiIsIm51bU91dHB1dFNpemVSYW5nZSIsIm51bU91dHB1dFNpemVOdW0iLCJ0eHRBbHBoYWJldCIsInNwbkFscGhhYmV0U2l6ZSIsImJ0blJlc2V0QWxwaGFiZXQiLCJ0eHRSZXN1bHRQYXNzd29yZCIsInNwblJlc3VsdFBhc3N3b3JkTGVuZ3RoIiwiYnRuQ29weVJlc3VsdFBhc3N3b3JkIiwic3BuQ29weVJlc3VsdFBhc3N3b3JkRmVlZGJhY2siLCJ0eHRQYXJhbWV0ZXJzIiwidHh0Q3VzdG9tS2V5cyIsIkRFRkFVTFRfTEVOR1RIIiwiREVGQVVMVF9BTFBIQUJFVCIsIlNVQ0NFU1NfQ09MT1IiLCJFUlJPUl9DT0xPUiIsIlJFU0VSVkVEX0tFWVMiLCJwYXNzd29yZFB1YmxpY1BhcnRMYXN0Q2hhbmdlIiwidXBkYXRlUGFzc3dvcmRQdWJsaWNQYXJ0TGFzdFVwZGF0ZSIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInVuZGVmaW5lZCIsImdldFByaXZhdGVQYXJ0IiwicHJvdGVjdEFuZExvY2tQcml2YXRlUGFydCIsImRpc2FibGVkIiwidGl0bGUiLCJ1cGRhdGVQcml2YXRlUGFydHNNYXRjaGluZyIsInRvZ2dsZVByaXZhdGVQYXJ0UHJvdGVjdGlvbiIsIm1heCIsInRvU3RyaW5nIiwiYWRkRXZlbnRMaXN0ZW5lciIsInByb21wdCIsInVwZGF0ZVBhc3N3b3JkR2VuZXJhdGlvblBhcmFtZXRlcnMiLCJyYW5kb21TdHJpbmciLCJydW4iLCJjb3B5UmVzdWx0UGFzc3dvcmRUb0NsaXBib2FyZEZlZWRiYWNrT2JqZWN0IiwiY29weVB1YmxpY1BhcnRUb0NsaXBib2FyZEZlZWRiYWNrT2JqZWN0Iiwic2V0dXBDb3B5QnV0dG9uIiwidHh0IiwiYnV0dG9uIiwiZmVlZGJhY2siLCJuYXZpZ2F0b3IiLCJjbGlwYm9hcmQiLCJ3cml0ZVRleHQiLCJlcnJvciIsImNvbnNvbGUiLCJzdGFjayIsIndyaXRlVG9DbGlwYm9hcmQiLCJzZXRUZXh0IiwidXBkYXRlUmVzdWx0UGFzc3dvcmRMZW5ndGgiLCJwYWRTdGFydCIsImlzQWxwaGFiZXRWYWxpZCIsInNvcnRlZEFscGhhYmV0Iiwic3BsaXQiLCJzb3J0IiwiY2FuUnVuIiwiY2xlYXJPdXRwdXRzIiwiY2hhaW5JbmZvIiwicGF0aFRvT2JqZWN0Q2hhaW4iLCJwYXRoIiwic2VwYXJhdG9ySW5kZXgiLCJpbmRleE9mIiwidGFpbCIsImZpcnN0UGF0aCIsInN1YnN0ciIsInJlbWFpbmluZ1BhdGgiLCJub2RlIiwiaGVhZCIsInRhaWxQYXJlbnQiLCJsZWFmIiwicHVibGljIiwiZGF0ZXRpbWUiLCJudW1lcmljVmFsdWUiLCJwYXJzZUludCIsImN1c3RvbUtleXMiLCJvYmoiLCJKU09OIiwicGFyc2UiLCJjb25zdHJ1Y3RvciIsInBhcnNlQ3VzdG9tS2V5cyIsInN0eWxlIiwicmVtb3ZlUHJvcGVydHkiLCJzZXRQcm9wZXJ0eSIsInJlc3VsdFBhcmFtZXRlcnMiLCJzb3VyY2UiLCJ0YXJnZXQiLCJlbnRyaWVzIiwiaW5jbHVkZXMiLCJzaGFsbG93TWVyZ2UiLCJrZXlzIiwic3RyaW5naWZ5IiwidXBkYXRlT3V0cHV0U2l6ZVJhbmdlVG9OdW0iLCJ1cGRhdGVBbHBoYWJldFNpemUiLCJ1cGRhdGVBbHBoYWJldFZhbGlkaXR5RGlzcGxheSIsInByaXZhdGVQYXJ0U3RyaW5nIiwicHVibGljUGFydFN0cmluZyIsInByaXZhdGVQcml2YXRlQnl0ZXMiLCJwdWJsaWNQYXJ0Qnl0ZXMiLCJrZXlTdHJpbmciLCJnZW5lcmF0ZVBhc3N3b3JkIiwicmVzZXRBbHBoYWJldCIsImlzQWxwaGFiZXRWYWxpZFJlc3VsdCIsImJ1dHRvbk5hbWUiLCJidG4iLCJ0eXBlIiwic2V0dXBWaWV3QnV0dG9uIiwibWluIiwidmFsIiwiTWF0aCIsInVwZGF0ZU91dHB1dFNpemVOdW1Ub1JhbmdlIiwicHJvdGVjdFByaXZhdGVQYXJ0QWN0aW9uIiwiYWN0aW9uIiwiZGVsYXkiLCJv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LEdBRTNEeEIsRUFBMkIwRixNQUFNRSxZQUFZLGFBQWNuRSxHQWJuRTFCLEVBQWV5QyxpQkFBaUIsUUFBUyxLQUNyQ3ZDLEVBQVdpQyxTQUEyQyxJQUFoQ25DLEVBQWUzRixNQUFNb0IsT0FFM0NpRixFQUFtQnJCLFVBQVlXLEVBQWUzRixNQUFNb0IsT0FBTytHLFdBQzNESCxLQUNBUSxLQUNBNEUsR0FBeUJJLFVBVzdCNUgsRUFBMkJ3QyxpQkFBaUIsUUFBUyxLQUNqRDlCLEVBQStCdEIsVUFBWVksRUFBMkI1RixNQUFNb0IsT0FBTytHLFdBQ25GSCxPQUdKakMsRUFBUXFDLGlCQUFpQixRQUFTLEtBQzlCRSxPQUdKdEMsRUFBY29DLGlCQUFpQixRQUFTLEtBQ3BDWixJQUNBYyxLQUNBRSxPQUdKdkIsRUFBY21CLGlCQUFpQixRQUFTLEtBQ3BDRSxPQUdKMkQsS0FDQVMsS0FDQTFFLEtBQ0FuQyxFQUFXa0MsTUFBUXRDIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImV4cG9ydCBmdW5jdGlvbiBjb3B5KHNvdXJjZTogVWludDhBcnJheSwgc291cmNlSW5kZXg6IG51bWJlciwgdGFyZ2V0OiBVaW50OEFycmF5LCB0YXJnZXRJbmRleDogbnVtYmVyLCBsZW5ndGg6IG51bWJlcik6IHZvaWQge1xuICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICB0YXJnZXRbaSArIHRhcmdldEluZGV4XSA9IHNvdXJjZVtpICsgc291cmNlSW5kZXhdO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFycmF5QnVmZmVyVG9VbnNpZ25lZEJpZ0ludChhcnJheUJ1ZmZlcjogQXJyYXlCdWZmZXIpOiBiaWdpbnQge1xuICAgIGNvbnN0IGxlbmd0aDogbnVtYmVyID0gYXJyYXlCdWZmZXIuYnl0ZUxlbmd0aDtcbiAgICBjb25zdCBhcnJheVZpZXc6IERhdGFWaWV3ID0gbmV3IERhdGFWaWV3KGFycmF5QnVmZmVyLCAwKTtcblxuICAgIGxldCByZXN1bHQ6IGJpZ2ludCA9IDBuO1xuXG4gICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIHJlc3VsdCArPSBCaWdJbnQoYXJyYXlWaWV3LmdldFVpbnQ4KGkpKSAqICgyNTZuICoqIEJpZ0ludChpKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRvQ3VzdG9tQmFzZShieXRlczogQXJyYXlCdWZmZXIsIGFscGhhYmV0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGFscGhhYmV0TGVuZ3RoOiBiaWdpbnQgPSBCaWdJbnQoYWxwaGFiZXQubGVuZ3RoKTtcblxuICAgIGxldCByZXN1bHQ6IHN0cmluZyA9ICcnO1xuICAgIGxldCBudW1iZXI6IGJpZ2ludCA9IGFycmF5QnVmZmVyVG9VbnNpZ25lZEJpZ0ludChieXRlcyk7XG5cbiAgICB3aGlsZSAobnVtYmVyID4gMG4pXG4gICAge1xuICAgICAgICBjb25zdCByZW1haW5kZXI6IGJpZ2ludCA9IG51bWJlciAlIGFscGhhYmV0TGVuZ3RoO1xuICAgICAgICBudW1iZXIgLz0gYWxwaGFiZXRMZW5ndGg7XG5cbiAgICAgICAgY29uc3QgaW5kZXg6IG51bWJlciA9IDxudW1iZXI+PGFueT5CaWdJbnQuYXNVaW50Tig2NCwgcmVtYWluZGVyKTtcblxuICAgICAgICByZXN1bHQgKz0gYWxwaGFiZXRbaW5kZXhdO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0b0Jhc2UxNihidWZmZXI6IEFycmF5QnVmZmVyKTogc3RyaW5nIHtcbiAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKFxuICAgICAgICBuZXcgVWludDhBcnJheShidWZmZXIpLFxuICAgICAgICB4ID0+ICgnMDAnICsgeC50b1N0cmluZygxNikpLnNsaWNlKC0yKVxuICAgICkuam9pbignJyk7XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gdHJ1bmNhdGUoaW5wdXQ6IHN0cmluZywgbGVuZ3RoOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGlmIChpbnB1dC5sZW5ndGggPD0gbGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBpbnB1dDtcbiAgICB9XG5cbiAgICByZXR1cm4gaW5wdXQuc3Vic3RyKDAsIGxlbmd0aCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdUb0FycmF5KHN0cjogc3RyaW5nKTogQXJyYXlCdWZmZXIge1xuICAgIGNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoLyondXRmLTgnKi8pO1xuICAgIHJldHVybiBlbmNvZGVyLmVuY29kZShzdHIpLmJ1ZmZlcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21CYXNlMTYoc3RyOiBzdHJpbmcpOiBBcnJheUJ1ZmZlciB7XG4gICAgaWYgKHN0ci5sZW5ndGggJSAyICE9PSAwKSB7XG4gICAgICAgIHN0ciA9ICcwJyArIHN0cjtcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHQ6IFVpbnQ4QXJyYXkgPSBuZXcgVWludDhBcnJheShzdHIubGVuZ3RoIC8gMik7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3VsdC5ieXRlTGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgcmVzdWx0W2ldID0gcGFyc2VJbnQoc3RyLnN1YnN0cihpICogMiwgMiksIDE2KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0LmJ1ZmZlcjtcbn1cbiIsImltcG9ydCB7IHN0cmluZ1RvQXJyYXkgfSBmcm9tICcuLi9zdHJpbmdVdGlscyc7XG5pbXBvcnQgeyBJUGFzc3dvcmRHZW5lcmF0b3IsIGdldERlcml2ZWRCeXRlcyB9IGZyb20gJy4uL2NyeXB0byc7XG5cbmV4cG9ydCBjbGFzcyBQYXNzd29yZEdlbmVyYXRvclYxIGltcGxlbWVudHMgSVBhc3N3b3JkR2VuZXJhdG9yIHtcbiAgICBwcml2YXRlIGhrZGZQdXJwb3NlOiBBcnJheUJ1ZmZlcjtcbiAgICBwcml2YXRlIF9kZXNjcmlwdGlvbjogc3RyaW5nO1xuXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKGhrZGZQdXJwb3NlOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5oa2RmUHVycG9zZSA9IHN0cmluZ1RvQXJyYXkoaGtkZlB1cnBvc2UpO1xuICAgICAgICB0aGlzLl9kZXNjcmlwdGlvbiA9IGBIS0RGKFBCS0RGMiwgSE1BQzUxMikgW3B1cnBvc2U6ICR7aGtkZlB1cnBvc2V9XWA7XG4gICAgfVxuXG4gICAgcHVibGljIGdldCB2ZXJzaW9uKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiAxO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgZGVzY3JpcHRpb24oKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Rlc2NyaXB0aW9uO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBnZW5lcmF0ZVBhc3N3b3JkKHByaXZhdGVQYXJ0OiBBcnJheUJ1ZmZlciwgcHVibGljUGFydDogQXJyYXlCdWZmZXIpOiBQcm9taXNlPEFycmF5QnVmZmVyPiB7XG4gICAgICAgIGNvbnN0IGRlcml2ZWRLZXk6IEFycmF5QnVmZmVyID0gYXdhaXQgZ2V0RGVyaXZlZEJ5dGVzKHByaXZhdGVQYXJ0LCBwdWJsaWNQYXJ0KTtcblxuICAgICAgICBjb25zdCBobWFjUGFyYW1ldGVyczogSG1hY0ltcG9ydFBhcmFtcyA9IHtcbiAgICAgICAgICAgIG5hbWU6ICdITUFDJyxcbiAgICAgICAgICAgIGhhc2g6IHsgbmFtZTogJ1NIQS01MTInIH1cbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBoa2RmS2V5OiBDcnlwdG9LZXkgPSBhd2FpdCBjcnlwdG8uc3VidGxlLmltcG9ydEtleShcbiAgICAgICAgICAgICdyYXcnLFxuICAgICAgICAgICAgZGVyaXZlZEtleSxcbiAgICAgICAgICAgIGhtYWNQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICBbJ3NpZ24nXVxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiBhd2FpdCBjcnlwdG8uc3VidGxlLnNpZ24oJ0hNQUMnLCBoa2RmS2V5LCB0aGlzLmhrZGZQdXJwb3NlKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBJQ2lwaGVyLCBnZXREZXJpdmVkQnl0ZXMgfSBmcm9tICcuLi9jcnlwdG8nO1xuXG5jb25zdCBlbmNyeXB0aW9uS2V5RGVyaXZhdGlvblNhbHQ6IEFycmF5QnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoWyAweGYyLCAweGNmLCAweGVmLCAweDhlLCAweDEzLCAweDQwLCAweDQ2LCAweDQ5LCAweDkyLCAweDJhLCAweGRlLCAweDVjLCAweGJjLCAweDg4LCAweDM4LCAweGE4IF0pLmJ1ZmZlcjtcblxuZXhwb3J0IGNsYXNzIENpcGhlclYxIGltcGxlbWVudHMgSUNpcGhlciB7XG4gICAgcHVibGljIGdldCB2ZXJzaW9uKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiAxO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgZGVzY3JpcHRpb24oKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuICdQQktERjIgKyBBRVMtR0NNJztcbiAgICB9XG5cbiAgICBhc3luYyBlbmNyeXB0KGlucHV0OiBBcnJheUJ1ZmZlciwgcGFzc3dvcmQ6IEFycmF5QnVmZmVyKTogUHJvbWlzZTxBcnJheUJ1ZmZlcj4ge1xuICAgICAgICBjb25zdCBvdXRwdXQ6IEFycmF5QnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKDEyICsgMTYgKyBpbnB1dC5ieXRlTGVuZ3RoKTtcblxuICAgICAgICBjb25zdCBub25jZTogRGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcob3V0cHV0LCAwLCAxMik7XG4gICAgICAgIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQ4QXJyYXkob3V0cHV0LCAwLCAxMikpO1xuXG4gICAgICAgIGNvbnN0IGFlc0djbVBhcmFtczogQWVzR2NtUGFyYW1zID0ge1xuICAgICAgICAgICAgbmFtZTogJ0FFUy1HQ00nLFxuICAgICAgICAgICAgaXY6IG5vbmNlXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgYWVzS2V5QWxnb3JpdGhtOiBBZXNLZXlBbGdvcml0aG0gPSB7XG4gICAgICAgICAgICBuYW1lOiAnQUVTLUdDTScsXG4gICAgICAgICAgICBsZW5ndGg6IDI1NlxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHBhc3N3b3JkS2V5OiBDcnlwdG9LZXkgPSBhd2FpdCBjcnlwdG8uc3VidGxlLmltcG9ydEtleShcbiAgICAgICAgICAgICdyYXcnLFxuICAgICAgICAgICAgYXdhaXQgZ2V0RGVyaXZlZEJ5dGVzKHBhc3N3b3JkLCBlbmNyeXB0aW9uS2V5RGVyaXZhdGlvblNhbHQpLFxuICAgICAgICAgICAgYWVzS2V5QWxnb3JpdGhtLFxuICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICBbJ2VuY3J5cHQnXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdDogQXJyYXlCdWZmZXIgPSBhd2FpdCBjcnlwdG8uc3VidGxlLmVuY3J5cHQoYWVzR2NtUGFyYW1zLCBwYXNzd29yZEtleSwgaW5wdXQpO1xuXG4gICAgICAgIG5ldyBVaW50OEFycmF5KG91dHB1dCkuc2V0KG5ldyBVaW50OEFycmF5KHJlc3VsdCksIDEyKTtcblxuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cblxuICAgIGFzeW5jIGRlY3J5cHQoaW5wdXQ6IEFycmF5QnVmZmVyLCBwYXNzd29yZDogQXJyYXlCdWZmZXIpOiBQcm9taXNlPEFycmF5QnVmZmVyPiB7XG4gICAgICAgIGNvbnN0IG5vbmNlOiBEYXRhVmlldyA9IG5ldyBEYXRhVmlldyhpbnB1dCwgMCwgMTIpO1xuICAgICAgICBjb25zdCBwYXlsb2FkOiBEYXRhVmlldyA9IG5ldyBEYXRhVmlldyhpbnB1dCwgMTIpO1xuXG4gICAgICAgIGNvbnN0IGFlc0djbVBhcmFtczogQWVzR2NtUGFyYW1zID0ge1xuICAgICAgICAgICAgbmFtZTogJ0FFUy1HQ00nLFxuICAgICAgICAgICAgaXY6IG5vbmNlXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgYWVzS2V5QWxnb3JpdGhtOiBBZXNLZXlBbGdvcml0aG0gPSB7XG4gICAgICAgICAgICBuYW1lOiAnQUVTLUdDTScsXG4gICAgICAgICAgICBsZW5ndGg6IDI1NlxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGRlcml2ZWRLZXk6IEFycmF5QnVmZmVyID0gYXdhaXQgZ2V0RGVyaXZlZEJ5dGVzKHBhc3N3b3JkLCBlbmNyeXB0aW9uS2V5RGVyaXZhdGlvblNhbHQpO1xuXG4gICAgICAgIGNvbnN0IHBhc3N3b3JkS2V5OiBDcnlwdG9LZXkgPSBhd2FpdCBjcnlwdG8uc3VidGxlLmltcG9ydEtleShcbiAgICAgICAgICAgICdyYXcnLFxuICAgICAgICAgICAgZGVyaXZlZEtleSxcbiAgICAgICAgICAgIGFlc0tleUFsZ29yaXRobSxcbiAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgWydkZWNyeXB0J11cbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gYXdhaXQgY3J5cHRvLnN1YnRsZS5kZWNyeXB0KGFlc0djbVBhcmFtcywgcGFzc3dvcmRLZXksIHBheWxvYWQpO1xuICAgIH1cbn1cbiIsImltcG9ydCAqIGFzIGFycmF5VXRpbHMgZnJvbSAnLi9hcnJheVV0aWxzJztcbmltcG9ydCB7IFBhc3N3b3JkR2VuZXJhdG9yVjEgfSBmcm9tICcuL3Bhc3N3b3JkR2VuZXJhdG9ycy92MSc7XG5pbXBvcnQgeyBDaXBoZXJWMSB9IGZyb20gJy4vY2lwaGVycy92MSc7XG5cbmV4cG9ydCBjb25zdCBCQVNFNjJfQUxQSEFCRVQ6IHN0cmluZyA9ICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaMDEyMzQ1Njc4OSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVBhc3N3b3JkR2VuZXJhdG9yIHtcbiAgICByZWFkb25seSB2ZXJzaW9uOiBudW1iZXI7XG4gICAgcmVhZG9ubHkgZGVzY3JpcHRpb246IHN0cmluZztcbiAgICBnZW5lcmF0ZVBhc3N3b3JkKHByaXZhdGVQYXJ0OiBBcnJheUJ1ZmZlciwgcHVibGljUGFydDogQXJyYXlCdWZmZXIpOiBQcm9taXNlPEFycmF5QnVmZmVyPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJQ2lwaGVyIHtcbiAgICByZWFkb25seSB2ZXJzaW9uOiBudW1iZXI7XG4gICAgcmVhZG9ubHkgZGVzY3JpcHRpb246IHN0cmluZztcbiAgICBlbmNyeXB0KGlucHV0OiBBcnJheUJ1ZmZlciwgcGFzc3dvcmQ6IEFycmF5QnVmZmVyKTogUHJvbWlzZTxBcnJheUJ1ZmZlcj47XG4gICAgZGVjcnlwdChpbnB1dDogQXJyYXlCdWZmZXIsIHBhc3N3b3JkOiBBcnJheUJ1ZmZlcik6IFByb21pc2U8QXJyYXlCdWZmZXI+O1xufVxuXG5leHBvcnQgY29uc3QgcGFzc3dvcmRHZW5lcmF0b3JzOiBJUGFzc3dvcmRHZW5lcmF0b3JbXSA9IFtcbiAgICBuZXcgUGFzc3dvcmRHZW5lcmF0b3JWMSgnUGFzc3dvcmQnKSxcbl07XG5cbmV4cG9ydCBjb25zdCBjaXBoZXJzOiBJQ2lwaGVyW10gPSBbXG4gICAgbmV3IENpcGhlclYxKCksXG5dO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RGVyaXZlZEJ5dGVzKHBhc3N3b3JkOiBBcnJheUJ1ZmZlciwgc2FsdDogQXJyYXlCdWZmZXIpOiBQcm9taXNlPEFycmF5QnVmZmVyPiB7XG4gICAgY29uc3QgYmFzZUtleTogQ3J5cHRvS2V5ID0gYXdhaXQgY3J5cHRvLnN1YnRsZS5pbXBvcnRLZXkoXG4gICAgICAgICdyYXcnLFxuICAgICAgICBwYXNzd29yZCxcbiAgICAgICAgJ1BCS0RGMicsXG4gICAgICAgIGZhbHNlLFxuICAgICAgICBbJ2Rlcml2ZUtleSddXG4gICAgKTtcblxuICAgIGNvbnN0IGFsZ29yaXRobTogUGJrZGYyUGFyYW1zID0ge1xuICAgICAgICBuYW1lOiAnUEJLREYyJyxcbiAgICAgICAgaGFzaDogJ1NIQS01MTInLFxuICAgICAgICBpdGVyYXRpb25zOiAxMDAwMDAsXG4gICAgICAgIHNhbHRcbiAgICB9O1xuXG4gICAgY29uc3QgZGVyaXZlZEtleVR5cGU6IEFlc0Rlcml2ZWRLZXlQYXJhbXMgPSB7XG4gICAgICAgIG5hbWU6ICdBRVMtQ0JDJyxcbiAgICAgICAgbGVuZ3RoOiAyNTZcbiAgICB9O1xuXG4gICAgY29uc3QgcmVzdWx0OiBDcnlwdG9LZXkgPSBhd2FpdCBjcnlwdG8uc3VidGxlLmRlcml2ZUtleShcbiAgICAgICAgYWxnb3JpdGhtLFxuICAgICAgICBiYXNlS2V5LFxuICAgICAgICBkZXJpdmVkS2V5VHlwZSxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICAgWydlbmNyeXB0J11cbiAgICApO1xuXG4gICAgY29uc3Qga2V5OiBBcnJheUJ1ZmZlciA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuZXhwb3J0S2V5KCdyYXcnLCByZXN1bHQpO1xuXG4gICAgcmV0dXJuIGtleTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlUmFuZG9tQnl0ZXMoYnl0ZUNvdW50OiBudW1iZXIgPSA2NCk6IEFycmF5QnVmZmVyIHtcbiAgICBjb25zdCBhcnJheTogVWludDhBcnJheSA9IG5ldyBVaW50OEFycmF5KGJ5dGVDb3VudCk7XG4gICAgcmV0dXJuIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMoYXJyYXkpLmJ1ZmZlcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlUmFuZG9tU3RyaW5nKGJ5dGVDb3VudDogbnVtYmVyID0gNjQsIGFscGhhYmV0OiBzdHJpbmcgPSBCQVNFNjJfQUxQSEFCRVQpOiBzdHJpbmcge1xuICAgIGNvbnN0IGFycmF5OiBBcnJheUJ1ZmZlciA9IGdlbmVyYXRlUmFuZG9tQnl0ZXMoYnl0ZUNvdW50KTtcbiAgICByZXR1cm4gYXJyYXlVdGlscy50b0N1c3RvbUJhc2UoYXJyYXksIGFscGhhYmV0KTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFZpc3VhbEZlZWRiYWNrIHtcbiAgICBwcml2YXRlIGVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgdGltZW91dDogbnVtYmVyIHwgdW5kZWZpbmVkO1xuXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKGVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgfVxuXG4gICAgcHVibGljIHNldFRleHQodGV4dDogc3RyaW5nLCBkdXJhdGlvbjogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSB0ZXh0O1xuICAgICAgICBpZiAodGhpcy50aW1lb3V0KSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSAnJywgZHVyYXRpb24pO1xuICAgIH1cbn1cbiIsImltcG9ydCAqIGFzIGNyeXB0byBmcm9tICcuL2NyeXB0byc7XG5pbXBvcnQgKiBhcyBzdHJpbmdVdGlscyBmcm9tICcuL3N0cmluZ1V0aWxzJztcbmltcG9ydCAqIGFzIGFycmF5VXRpbHMgZnJvbSAnLi9hcnJheVV0aWxzJztcblxuaW1wb3J0IFZpc3VhbEZlZWRiYWNrIGZyb20gJy4vVmlzdWFsRmVlZGJhY2snO1xuaW1wb3J0IFRpbWVkQWN0aW9uIGZyb20gJy4vVGltZWRBY3Rpb24nO1xuaW1wb3J0IHsgUGxhaW5PYmplY3QgfSBmcm9tICcuL1BsYWluT2JqZWN0JztcblxuaW1wb3J0IHsgUGFzc3dvcmRHZW5lcmF0b3JWMSB9IGZyb20gJy4vcGFzc3dvcmRHZW5lcmF0b3JzL3YxJztcbmltcG9ydCB7IENpcGhlclYxIH0gZnJvbSAnLi9jaXBoZXJzL3YxJztcblxuaW1wb3J0IHsgSVN0b3JhZ2UgfSBmcm9tICcuL3N0b3JhZ2VzL0lTdG9yYWdlJztcbmltcG9ydCB7IEdpdEh1YlN0b3JhZ2UgfSBmcm9tICcuL3N0b3JhZ2VzL0dpdEh1YlN0b3JhZ2UnO1xuXG5jb25zdCBwYXNzd29yZEdlbmVyYXRvcjogY3J5cHRvLklQYXNzd29yZEdlbmVyYXRvciA9IG5ldyBQYXNzd29yZEdlbmVyYXRvclYxKCdQYXNzd29yZCcpO1xuY29uc3QgY2lwaGVyOiBjcnlwdG8uSUNpcGhlciA9IG5ldyBDaXBoZXJWMSgpO1xuXG5mdW5jdGlvbiBnZXRFbGVtZW50QnlJZChlbGVtZW50TmFtZTogc3RyaW5nKTogSFRNTElucHV0RWxlbWVudCB7XG4gICAgY29uc3QgZWxlbWVudDogSFRNTEVsZW1lbnR8bnVsbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnROYW1lKTtcblxuICAgIGlmIChlbGVtZW50TmFtZSA9PT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERPTSBlbGVtZW50ICcke2VsZW1lbnROYW1lfScgbm90IGZvdW5kLmApO1xuICAgIH1cblxuICAgIHJldHVybiBlbGVtZW50IGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG59XG5cbmNvbnN0IGJ0blByb3RlY3RUaXRsZUZvclByb3RlY3QgPSAnU3RvcmVzIHRoZSBzdHJpbmcgaW4gbWVtb3J5IGFuZCByZW1vdmVzIGl0IGZyb20gdGhlIFVJIGNvbXBvbmVudC4gUHJldmVudHMgYSBwaHlzaWNhbCBpbnRydWRlciBmcm9tIGNvcHkvcGFzdGluZyB0aGUgdmFsdWUuJztcbmNvbnN0IGJ0blByb3RlY3RUaXRsZUZvckNsZWFyID0gJ1JlbW92ZXMgdGhlIHN0cmluZyBmb3JtIG1lbW9yeSBhbmQgcmUtZW5hYmxlcyB0aGUgVUkgY29tcG9uZW50Lic7XG5cbmNvbnN0IHR4dFByaXZhdGVQYXJ0OiBIVE1MSW5wdXRFbGVtZW50ID0gZ2V0RWxlbWVudEJ5SWQoJ3R4dFByaXZhdGVQYXJ0Jyk7XG5jb25zdCB0eHRQcml2YXRlUGFydENvbmZpcm1hdGlvbjogSFRNTElucHV0RWxlbWVudCA9IGdldEVsZW1lbnRCeUlkKCd0eHRQcml2YXRlUGFydENvbmZpcm1hdGlvbicpO1xuY29uc3QgYnRuUHJvdGVjdDogSFRNTElucHV0RWxlbWVudCA9IGdldEVsZW1lbnRCeUlkKCdidG5Qcm90ZWN0Jyk7XG5jb25zdCBzcG5Qcm90ZWN0ZWRDb25maXJtYXRpb246IEhUTUxJbnB1dEVsZW1lbnQgPSBnZXRFbGVtZW50QnlJZCgnc3BuUHJvdGVjdGVkQ29uZmlybWF0aW9uJyk7XG5jb25zdCB0eHRQYXRoOiBIVE1MSW5wdXRFbGVtZW50ID0gZ2V0RWxlbWVudEJ5SWQoJ3R4dFBhdGgnKTtcbmNvbnN0IHR4dFB1YmxpY1BhcnQ6IEhUTUxJbnB1dEVsZW1lbnQgPSBnZXRFbGVtZW50QnlJZCgndHh0UHVibGljUGFydCcpO1xuY29uc3QgYnRuR2VuZXJhdGVQdWJsaWNQYXJ0OiBIVE1MSW5wdXRFbGVtZW50ID0gZ2V0RWxlbWVudEJ5SWQoJ2J0bkdlbmVyYXRlUHVibGljUGFydCcpO1xuY29uc3QgYnRuQ2xlYXJQdWJsaWNQYXJ0OiBIVE1MSW5wdXRFbGVtZW50ID0gZ2V0RWxlbWVudEJ5SWQoJ2J0bkNsZWFyUHVibGljUGFydCcpO1xuY29uc3QgYnRuQ29weVB1YmxpY1BhcnQ6IEhUTUxJbnB1dEVsZW1lbnQgPSBnZXRFbGVtZW50QnlJZCgnYnRuQ29weVB1YmxpY1BhcnQnKTtcbmNvbnN0IHNwbkNvcHlQdWJsaWNQYXJ0RmVlZGJhY2s6IEhUTUxJbnB1dEVsZW1lbnQgPSBnZXRFbGVtZW50QnlJZCgnc3BuQ29weVB1YmxpY1BhcnRGZWVkYmFjaycpO1xuXG5jb25zdCBzcG5Qcml2YXRlUGFydFNpemU6IEhUTUxJbnB1dEVsZW1lbnQgPSBnZXRFbGVtZW50QnlJZCgnc3BuUHJpdmF0ZVBhcnRTaXplJyk7XG5jb25zdCBzcG5Qcml2YXRlUGFydFNpemVDb25maXJtYXRpb246IEhUTUxJbnB1dEVsZW1lbnQgPSBnZXRFbGVtZW50QnlJZCgnc3BuUHJpdmF0ZVBhcnRTaXplQ29uZmlybWF0aW9uJyk7XG5cbmNvbnN0IG51bU91dHB1dFNpemVSYW5nZTogSFRNTElucHV0RWxlbWVudCA9IGdldEVsZW1lbnRCeUlkKCdudW1PdXRwdXRTaXplUmFuZ2UnKTtcbmNvbnN0IG51bU91dHB1dFNpemVOdW06IEhUTUxJbnB1dEVsZW1lbnQgPSBnZXRFbGVtZW50QnlJZCgnbnVtT3V0cHV0U2l6ZU51bScpO1xuXG5jb25zdCB0eHRBbHBoYWJldDogSFRNTElucHV0RWxlbWVudCA9IGdldEVsZW1lbnRCeUlkKCd0eHRBbHBoYWJldCcpO1xuY29uc3Qgc3BuQWxwaGFiZXRTaXplOiBIVE1MSW5wdXRFbGVtZW50ID0gZ2V0RWxlbWVudEJ5SWQoJ3NwbkFscGhhYmV0U2l6ZScpO1xuY29uc3QgYnRuUmVzZXRBbHBoYWJldDogSFRNTElucHV0RWxlbWVudCA9IGdldEVsZW1lbnRCeUlkKCdidG5SZXNldEFscGhhYmV0Jyk7XG5cbmNvbnN0IHR4dFJlc3VsdFBhc3N3b3JkOiBIVE1MSW5wdXRFbGVtZW50ID0gZ2V0RWxlbWVudEJ5SWQoJ3R4dFJlc3VsdFBhc3N3b3JkJyk7XG5jb25zdCBzcG5SZXN1bHRQYXNzd29yZExlbmd0aDogSFRNTElucHV0RWxlbWVudCA9IGdldEVsZW1lbnRCeUlkKCdzcG5SZXN1bHRQYXNzd29yZExlbmd0aCcpO1xuY29uc3QgYnRuQ29weVJlc3VsdFBhc3N3b3JkOiBIVE1MSW5wdXRFbGVtZW50ID0gZ2V0RWxlbWVudEJ5SWQoJ2J0bkNvcHlSZXN1bHRQYXNzd29yZCcpO1xuY29uc3Qgc3BuQ29weVJlc3VsdFBhc3N3b3JkRmVlZGJhY2s6IEhUTUxJbnB1dEVsZW1lbnQgPSBnZXRFbGVtZW50QnlJZCgnc3BuQ29weVJlc3VsdFBhc3N3b3JkRmVlZGJhY2snKTtcblxuY29uc3QgdHh0UGFyYW1ldGVyczogSFRNTElucHV0RWxlbWVudCA9IGdldEVsZW1lbnRCeUlkKCd0eHRQYXJhbWV0ZXJzJyk7XG5jb25zdCB0eHRDdXN0b21LZXlzOiBIVE1MSW5wdXRFbGVtZW50ID0gZ2V0RWxlbWVudEJ5SWQoJ3R4dEN1c3RvbUtleXMnKTtcblxuY29uc3QgREVGQVVMVF9MRU5HVEg6IG51bWJlciA9IDY0O1xuXG4vLyBBbHBoYWJldCB2MSBpcyBzY3Jld2VkLCB0aGUgY2hhcmFjdGVyIHsgYXBwZWFycyB0d2ljZSBhbmQgfSBpcyBtaXNzaW5nLlxuY29uc3QgREVGQVVMVF9BTFBIQUJFVF9WMTogc3RyaW5nID0gJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVowMTIzNDU2Nzg5YH4hQCMkJV4mKigpXy09K1t7XXt8OzpcXCdcIiw8Lj4vPyc7XG4vLyBBbHBoYWJldCB2MiBpcyBjb3JyZWN0IGFuZCBpbiBBU0NJSSBvcmRlci5cbmNvbnN0IERFRkFVTFRfQUxQSEFCRVRfVjI6IHN0cmluZyA9ICchXCIjJCUmXFwnKCkqKywtLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaW11eX2BhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ent8fX4nO1xuXG5jb25zdCBERUZBVUxUX0FMUEhBQkVUOiBzdHJpbmcgPSBERUZBVUxUX0FMUEhBQkVUX1YyO1xuXG5jb25zdCBQUklWQVRFX1BBUlRfUFJPVEVDVElPTl9USU1FT1VUOiBudW1iZXIgPSA2MCAqIDEwMDA7XG5cbmNvbnN0IFNVQ0NFU1NfQ09MT1I6IHN0cmluZyA9ICcjRDBGRkQwJztcbmNvbnN0IEVSUk9SX0NPTE9SOiBzdHJpbmcgPSAnI0ZGRDBEMCc7XG5cbmNvbnN0IFJFU0VSVkVEX0tFWVM6IHN0cmluZ1tdID0gWydhbHBoYWJldCcsICdsZW5ndGgnLCAncHVibGljJywgJ2RhdGV0aW1lJ107XG5cbi8vIGRhZnVxIT9cbm51bU91dHB1dFNpemVSYW5nZS5tYXggPSBERUZBVUxUX0xFTkdUSC50b1N0cmluZygpO1xubnVtT3V0cHV0U2l6ZVJhbmdlLnZhbHVlID0gREVGQVVMVF9MRU5HVEgudG9TdHJpbmcoKTtcblxubGV0IHByaXZhdGVQYXJ0OiBzdHJpbmcgfCB1bmRlZmluZWQ7XG5sZXQgcGFzc3dvcmRQdWJsaWNQYXJ0TGFzdENoYW5nZTogc3RyaW5nIHwgdW5kZWZpbmVkO1xuXG5idG5DbGVhclB1YmxpY1BhcnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgaWYgKHR4dFB1YmxpY1BhcnQudmFsdWUubGVuZ3RoID4gMCkge1xuICAgICAgICBpZiAocHJvbXB0KCdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gY2xlYXIgdGhlIHB1YmxpYyBwYXJ0ID9cXG5UeXBlIFxcJ3lcXCcgdG8gYWNjZXB0JywgJycpICE9PSAneScpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHR4dFB1YmxpY1BhcnQudmFsdWUgPSAnJztcblxuICAgIHVwZGF0ZVBhc3N3b3JkUHVibGljUGFydExhc3RVcGRhdGUoKTtcbiAgICB1cGRhdGVQYXNzd29yZEdlbmVyYXRpb25QYXJhbWV0ZXJzKCk7XG59KTtcblxuYnRuR2VuZXJhdGVQdWJsaWNQYXJ0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGlmICh0eHRQdWJsaWNQYXJ0LnZhbHVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgaWYgKHByb21wdCgnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGdlbmVyYXRlIGEgbmV3IHB1YmxpYyBwYXJ0ID9cXG5UeXBlIFxcJ3lcXCcgdG8gYWNjZXB0JywgJycpICE9PSAneScpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHJhbmRvbVN0cmluZzogc3RyaW5nID0gY3J5cHRvLmdlbmVyYXRlUmFuZG9tU3RyaW5nKCk7XG4gICAgdHh0UHVibGljUGFydC52YWx1ZSA9IHJhbmRvbVN0cmluZztcblxuICAgIHVwZGF0ZVBhc3N3b3JkUHVibGljUGFydExhc3RVcGRhdGUoKTtcblxuICAgIHJ1bigpO1xufSk7XG5cbmZ1bmN0aW9uIHVwZGF0ZVBhc3N3b3JkUHVibGljUGFydExhc3RVcGRhdGUoKTogdm9pZCB7XG4gICAgaWYgKHR4dFB1YmxpY1BhcnQudmFsdWUubGVuZ3RoID4gMCkge1xuICAgICAgICBwYXNzd29yZFB1YmxpY1BhcnRMYXN0Q2hhbmdlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHBhc3N3b3JkUHVibGljUGFydExhc3RDaGFuZ2UgPSB1bmRlZmluZWQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRQcml2YXRlUGFydCgpOiBzdHJpbmcge1xuICAgIGlmIChwcml2YXRlUGFydCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBwcml2YXRlUGFydDtcbiAgICB9XG4gICAgcmV0dXJuIHR4dFByaXZhdGVQYXJ0LnZhbHVlO1xufVxuXG5mdW5jdGlvbiBwcm90ZWN0QW5kTG9ja1ByaXZhdGVQYXJ0KCk6IHZvaWQge1xuICAgIGlmICh0eHRQcml2YXRlUGFydC52YWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHByaXZhdGVQYXJ0ID0gdHh0UHJpdmF0ZVBhcnQudmFsdWU7XG4gICAgc3BuUHJvdGVjdGVkQ29uZmlybWF0aW9uLmlubmVySFRNTCA9ICdQcm90ZWN0ZWQnO1xuXG4gICAgdHh0UHJpdmF0ZVBhcnQudmFsdWUgPSAnJztcbiAgICB0eHRQcml2YXRlUGFydENvbmZpcm1hdGlvbi52YWx1ZSA9ICcnO1xuICAgIHNwblByaXZhdGVQYXJ0U2l6ZS5pbm5lckhUTUwgPSAnMCc7XG4gICAgc3BuUHJpdmF0ZVBhcnRTaXplQ29uZmlybWF0aW9uLmlubmVySFRNTCA9ICcwJztcblxuICAgIHR4dFByaXZhdGVQYXJ0LmRpc2FibGVkID0gdHJ1ZTtcbiAgICB0eHRQcml2YXRlUGFydENvbmZpcm1hdGlvbi5kaXNhYmxlZCA9IHRydWU7XG5cbiAgICBidG5Qcm90ZWN0LmlubmVySFRNTCA9ICdDbGVhciBhbmQgdW5sb2NrJztcbiAgICBidG5Qcm90ZWN0LnRpdGxlID0gYnRuUHJvdGVjdFRpdGxlRm9yQ2xlYXI7XG5cbiAgICB1cGRhdGVQcml2YXRlUGFydHNNYXRjaGluZygpO1xufVxuXG5mdW5jdGlvbiBjbGVhckFuZFVuTG9ja1ByaXZhdGVQYXJ0KCk6IHZvaWQge1xuICAgIHByaXZhdGVQYXJ0ID0gdW5kZWZpbmVkO1xuICAgIHNwblByb3RlY3RlZENvbmZpcm1hdGlvbi5pbm5lckhUTUwgPSAnJztcblxuICAgIHR4dFByaXZhdGVQYXJ0LmRpc2FibGVkID0gZmFsc2U7XG4gICAgdHh0UHJpdmF0ZVBhcnRDb25maXJtYXRpb24uZGlzYWJsZWQgPSBmYWxzZTtcblxuICAgIGJ0blByb3RlY3QuaW5uZXJIVE1MID0gJ1Byb3RlY3QgYW5kIGxvY2snO1xuICAgIGJ0blByb3RlY3QudGl0bGUgPSBidG5Qcm90ZWN0VGl0bGVGb3JQcm90ZWN0O1xuICAgIGJ0blByb3RlY3QuZGlzYWJsZWQgPSB0cnVlO1xufVxuXG5mdW5jdGlvbiB0b2dnbGVQcml2YXRlUGFydFByb3RlY3Rpb24oKTogdm9pZCB7XG4gICAgaWYgKHByaXZhdGVQYXJ0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcHJvdGVjdEFuZExvY2tQcml2YXRlUGFydCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNsZWFyQW5kVW5Mb2NrUHJpdmF0ZVBhcnQoKTtcbiAgICB9XG59XG5cbmJ0blByb3RlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgdG9nZ2xlUHJpdmF0ZVBhcnRQcm90ZWN0aW9uKCk7XG59KTtcblxuZnVuY3Rpb24gdXBkYXRlQ3VzdG9tS2V5c0Rpc3BsYXkoaXNWYWxpZDogYm9vbGVhbik6IHZvaWQge1xuICAgIGlmIChpc1ZhbGlkKSB7XG4gICAgICAgIHR4dEN1c3RvbUtleXMuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2JhY2tncm91bmQnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHR4dEN1c3RvbUtleXMuc3R5bGUuc2V0UHJvcGVydHkoJ2JhY2tncm91bmQnLCBFUlJPUl9DT0xPUik7XG59XG5cbmZ1bmN0aW9uIHBhcnNlQ3VzdG9tS2V5cygpOiBQbGFpbk9iamVjdCB8IG51bGwge1xuICAgIGlmICh0eHRDdXN0b21LZXlzLnZhbHVlID09PSAnJykge1xuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgb2JqOiBhbnkgPSBKU09OLnBhcnNlKHR4dEN1c3RvbUtleXMudmFsdWUpO1xuICAgICAgICBpZiAob2JqID09PSBudWxsIHx8IG9iai5jb25zdHJ1Y3Rvci5uYW1lICE9PSAnT2JqZWN0Jykge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iaiBhcyBQbGFpbk9iamVjdDtcbiAgICB9IGNhdGNoIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBzaGFsbG93TWVyZ2Uoc291cmNlOiBQbGFpbk9iamVjdCB8IG51bGwsIHRhcmdldDogUGxhaW5PYmplY3QgfCBudWxsKTogUGxhaW5PYmplY3Qge1xuICAgIGNvbnN0IHJlc3VsdDogUGxhaW5PYmplY3QgPSB7fTtcblxuICAgIGlmIChzb3VyY2UgIT09IG51bGwpIHtcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoc291cmNlKSkge1xuICAgICAgICAgICAgaWYgKFJFU0VSVkVEX0tFWVMuaW5jbHVkZXMoa2V5KSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRhcmdldCAhPT0gbnVsbCkge1xuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh0YXJnZXQpKSB7XG4gICAgICAgICAgICByZXN1bHRba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gZGVlcE1lcmdlKHNvdXJjZTogUGxhaW5PYmplY3QsIHRhcmdldDogUGxhaW5PYmplY3QpOiB2b2lkIHtcbiAgICBmb3IgKGNvbnN0IHNvdXJjZUtleSBvZiBPYmplY3Qua2V5cyhzb3VyY2UpKSB7XG4gICAgICAgIGNvbnN0IHRhcmdldFZhbHVlOiBhbnkgPSB0YXJnZXRbc291cmNlS2V5XTtcbiAgICAgICAgY29uc3Qgc291cmNlVmFsdWU6IGFueSA9IHNvdXJjZVtzb3VyY2VLZXldO1xuXG4gICAgICAgIGlmICh0YXJnZXRWYWx1ZSA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICB0YXJnZXRWYWx1ZSA9PT0gbnVsbCB8fFxuICAgICAgICAgICAgdGFyZ2V0VmFsdWUuY29uc3RydWN0b3IubmFtZSAhPT0gJ09iamVjdCcgfHxcbiAgICAgICAgICAgIHNvdXJjZVZhbHVlLmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG4gICAgICAgICAgICB0YXJnZXRbc291cmNlS2V5XSA9IHNvdXJjZVZhbHVlO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBkZWVwTWVyZ2Uoc291cmNlVmFsdWUsIHRhcmdldFZhbHVlKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHNldHVwVmlld0J1dHRvbih0eHQ6IEhUTUxJbnB1dEVsZW1lbnQsIGJ1dHRvbk5hbWU6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IGJ0bjogSFRNTElucHV0RWxlbWVudCA9IGdldEVsZW1lbnRCeUlkKGJ1dHRvbk5hbWUpO1xuICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgaWYgKHR4dC50eXBlID09PSAncGFzc3dvcmQnKSB7XG4gICAgICAgICAgICB0eHQudHlwZSA9ICdpbnB1dCc7XG4gICAgICAgICAgICBidG4uaW5uZXJIVE1MID0gJ0hpZGUnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdHh0LnR5cGUgPSAncGFzc3dvcmQnO1xuICAgICAgICAgICAgYnRuLmlubmVySFRNTCA9ICdWaWV3JztcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5jb25zdCBjb3B5UmVzdWx0UGFzc3dvcmRUb0NsaXBib2FyZEZlZWRiYWNrT2JqZWN0OiBWaXN1YWxGZWVkYmFjayA9IG5ldyBWaXN1YWxGZWVkYmFjayhzcG5Db3B5UmVzdWx0UGFzc3dvcmRGZWVkYmFjayk7XG5jb25zdCBjb3B5UHVibGljUGFydFRvQ2xpcGJvYXJkRmVlZGJhY2tPYmplY3Q6IFZpc3VhbEZlZWRiYWNrID0gbmV3IFZpc3VhbEZlZWRiYWNrKHNwbkNvcHlQdWJsaWNQYXJ0RmVlZGJhY2spO1xuXG5hc3luYyBmdW5jdGlvbiB3cml0ZVRvQ2xpcGJvYXJkKHRleHQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KHRleHQpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yLnN0YWNrIHx8IGVycm9yKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc2V0dXBDb3B5QnV0dG9uKHR4dDogSFRNTElucHV0RWxlbWVudCwgYnV0dG9uOiBIVE1MSW5wdXRFbGVtZW50LCBmZWVkYmFjazogVmlzdWFsRmVlZGJhY2spOiB2b2lkIHtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGlmIChhd2FpdCB3cml0ZVRvQ2xpcGJvYXJkKHR4dC52YWx1ZSkpIHtcbiAgICAgICAgICAgIGZlZWRiYWNrLnNldFRleHQoJ0NvcGllZCcsIDMwMDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZmVlZGJhY2suc2V0VGV4dCgnPHNwYW4gc3R5bGU9XCJjb2xvcjogcmVkXCI+RmFpbGVkIHRvIGNvcHk8L3NwYW4+JywgMzAwMCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlUmVzdWx0UGFzc3dvcmRMZW5ndGgoKSB7XG4gICAgc3BuUmVzdWx0UGFzc3dvcmRMZW5ndGguaW5uZXJIVE1MID0gdHh0UmVzdWx0UGFzc3dvcmQudmFsdWUubGVuZ3RoLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJyAnKTtcbn1cblxuc2V0dXBWaWV3QnV0dG9uKHR4dFJlc3VsdFBhc3N3b3JkLCAnYnRuVmlld1Jlc3VsdFBhc3N3b3JkJyk7XG5cbnNldHVwQ29weUJ1dHRvbih0eHRQdWJsaWNQYXJ0LCBidG5Db3B5UHVibGljUGFydCwgY29weVB1YmxpY1BhcnRUb0NsaXBib2FyZEZlZWRiYWNrT2JqZWN0KTtcbnNldHVwQ29weUJ1dHRvbih0eHRSZXN1bHRQYXNzd29yZCwgYnRuQ29weVJlc3VsdFBhc3N3b3JkLCBjb3B5UmVzdWx0UGFzc3dvcmRUb0NsaXBib2FyZEZlZWRiYWNrT2JqZWN0KTtcblxuZnVuY3Rpb24gaXNBbHBoYWJldFZhbGlkKGFscGhhYmV0OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCBzb3J0ZWRBbHBoYWJldDogc3RyaW5nW10gPSBhbHBoYWJldC5zcGxpdCgnJyk7XG4gICAgc29ydGVkQWxwaGFiZXQuc29ydCgpO1xuXG4gICAgZm9yIChsZXQgaTogbnVtYmVyID0gMTsgaSA8IHNvcnRlZEFscGhhYmV0Lmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGlmIChzb3J0ZWRBbHBoYWJldFtpIC0gMV0gPT09IHNvcnRlZEFscGhhYmV0W2ldKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxudHlwZSBJQ2hhaW5JbmZvID0ge1xuICAgIGhlYWQ6IFBsYWluT2JqZWN0LFxuICAgIHRhaWxQYXJlbnQ6IFBsYWluT2JqZWN0LFxuICAgIHRhaWw6IFBsYWluT2JqZWN0XG59O1xuXG4vLyBUcmFuc2Zvcm1zIGEgcGF0aCBsaWtlIFwiYS9iL2MvZFwiIGludG8gYSBoaWVyYXJjaHkgb2Ygb2JqZWN0cyBsaWtlIHsgXCJhXCI6IHsgXCJiXCI6IHsgXCJjXCI6IHsgXCJkXCI6IHt9IH0gfSB9IH1cbi8vIEZyb20gdGhlIHJlc3VsdCBvYmplY3QsIGhlYWQgaXMgdGhlIHJvb3Qgb2JqZWN0IHRoYXQgY29udGFpbnMgXCJhXCIsIHRhaWwgaXMgdGhlIHZhbHVlIG9mIFwiZFwiLCBhbmQgdGFpbFBhcmVudCBpcyB0aGUgdmFsdWUgb2YgXCJjXCJcbmZ1bmN0aW9uIHBhdGhUb09iamVjdENoYWluKHBhdGg6IHN0cmluZywgY2hhaW5JbmZvOiBJQ2hhaW5JbmZvIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkKTogSUNoYWluSW5mbyB7XG4gICAgY29uc3Qgc2VwYXJhdG9ySW5kZXg6IG51bWJlciA9IHBhdGguaW5kZXhPZignLycpO1xuXG4gICAgY29uc3QgdGFpbDogUGxhaW5PYmplY3QgPSB7fTtcblxuICAgIGNvbnN0IGZpcnN0UGF0aDogc3RyaW5nID0gc2VwYXJhdG9ySW5kZXggPj0gMCA/IHBhdGguc3Vic3RyKDAsIHNlcGFyYXRvckluZGV4KSA6IHBhdGg7XG4gICAgY29uc3QgcmVtYWluaW5nUGF0aDogc3RyaW5nIHwgdW5kZWZpbmVkID0gc2VwYXJhdG9ySW5kZXggPj0gMCA/IHBhdGguc3Vic3RyKHNlcGFyYXRvckluZGV4ICsgMSkgOiB1bmRlZmluZWQ7XG5cbiAgICBpZiAoY2hhaW5JbmZvID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3Qgbm9kZTogUGxhaW5PYmplY3QgPSB7fTtcbiAgICAgICAgbm9kZVtmaXJzdFBhdGhdID0gdGFpbDtcbiAgICAgICAgY2hhaW5JbmZvID0ge1xuICAgICAgICAgICAgaGVhZDogbm9kZSxcbiAgICAgICAgICAgIHRhaWxQYXJlbnQ6IG5vZGUsXG4gICAgICAgICAgICB0YWlsXG4gICAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY2hhaW5JbmZvLnRhaWxbZmlyc3RQYXRoXSA9IHRhaWw7XG4gICAgICAgIGNoYWluSW5mby50YWlsUGFyZW50ID0gY2hhaW5JbmZvLnRhaWw7XG4gICAgICAgIGNoYWluSW5mby50YWlsID0gdGFpbDtcbiAgICB9XG5cbiAgICBpZiAocmVtYWluaW5nUGF0aCkge1xuICAgICAgICByZXR1cm4gcGF0aFRvT2JqZWN0Q2hhaW4ocmVtYWluaW5nUGF0aCwgY2hhaW5JbmZvKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2hhaW5JbmZvO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVQYXNzd29yZEdlbmVyYXRpb25QYXJhbWV0ZXJzKCk6IHZvaWQge1xuICAgIGlmIChjYW5SdW4oKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgY2xlYXJPdXRwdXRzKCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjaGFpbkluZm86IElDaGFpbkluZm8gPSBwYXRoVG9PYmplY3RDaGFpbih0eHRQYXRoLnZhbHVlKTtcbiAgICBjb25zdCBsZWFmOiBQbGFpbk9iamVjdCA9IGNoYWluSW5mby50YWlsO1xuXG4gICAgbGVhZi5wdWJsaWMgPSB0eHRQdWJsaWNQYXJ0LnZhbHVlO1xuICAgIGxlYWYuZGF0ZXRpbWUgPSBwYXNzd29yZFB1YmxpY1BhcnRMYXN0Q2hhbmdlO1xuXG4gICAgY29uc3QgbnVtZXJpY1ZhbHVlOiBudW1iZXIgPSBwYXJzZUludChudW1PdXRwdXRTaXplTnVtLnZhbHVlLCAxMCk7XG4gICAgaWYgKG51bWVyaWNWYWx1ZSAhPT0gREVGQVVMVF9MRU5HVEgpIHtcbiAgICAgICAgbGVhZi5sZW5ndGggPSBudW1lcmljVmFsdWU7XG4gICAgfVxuXG4gICAgY29uc3QgYWxwaGFiZXQ6IHN0cmluZyA9IHR4dEFscGhhYmV0LnZhbHVlO1xuICAgIGlmIChhbHBoYWJldCAhPT0gREVGQVVMVF9BTFBIQUJFVCkge1xuICAgICAgICBsZWFmLmFscGhhYmV0ID0gYWxwaGFiZXQ7XG4gICAgfVxuXG4gICAgY29uc3QgY3VzdG9tS2V5czogUGxhaW5PYmplY3QgfCBudWxsID0gcGFyc2VDdXN0b21LZXlzKCk7XG4gICAgdXBkYXRlQ3VzdG9tS2V5c0Rpc3BsYXkoY3VzdG9tS2V5cyAhPT0gbnVsbCk7XG4gICAgY29uc3QgcmVzdWx0UGFyYW1ldGVyczogUGxhaW5PYmplY3QgPSBzaGFsbG93TWVyZ2UoY3VzdG9tS2V5cywgbGVhZik7XG5cbiAgICBpZiAoT2JqZWN0LmtleXMocmVzdWx0UGFyYW1ldGVycykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIC8vIFNldCB0aGUgdmFsdWUgb2YgdGhlIGZpcnN0IChzaW5nbGUpIHByb3BlcnR5IG9mIHRoZSBvYmplY3QgdG8gbnVsbC5cbiAgICAgICAgY2hhaW5JbmZvLnRhaWxQYXJlbnRbT2JqZWN0LmtleXMoY2hhaW5JbmZvLnRhaWxQYXJlbnQpWzBdXSA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY2hhaW5JbmZvLnRhaWxQYXJlbnRbT2JqZWN0LmtleXMoY2hhaW5JbmZvLnRhaWxQYXJlbnQpWzBdXSA9IHJlc3VsdFBhcmFtZXRlcnM7XG4gICAgfVxuXG4gICAgdHh0UGFyYW1ldGVycy52YWx1ZSA9IEpTT04uc3RyaW5naWZ5KGNoYWluSW5mby5oZWFkLCB1bmRlZmluZWQsIDQpO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVPdXRwdXRTaXplUmFuZ2VUb051bSgpOiB2b2lkIHtcbiAgICBudW1PdXRwdXRTaXplTnVtLnZhbHVlID0gbnVtT3V0cHV0U2l6ZVJhbmdlLnZhbHVlO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVPdXRwdXRTaXplTnVtVG9SYW5nZSgpOiB2b2lkIHtcbiAgICBjb25zdCBtaW46IG51bWJlciA9IHBhcnNlSW50KG51bU91dHB1dFNpemVSYW5nZS5taW4sIDEwKTtcbiAgICBjb25zdCB2YWw6IG51bWJlciA9IHBhcnNlSW50KG51bU91dHB1dFNpemVOdW0udmFsdWUsIDEwKTtcbiAgICBjb25zdCBtYXg6IG51bWJlciA9IHBhcnNlSW50KG51bU91dHB1dFNpemVSYW5nZS5tYXgsIDEwKTtcbiAgICBudW1PdXRwdXRTaXplUmFuZ2UudmFsdWUgPSBNYXRoLm1heChtaW4sIE1hdGgubWluKHZhbCwgbWF4KSkudG9TdHJpbmcoKTtcbn1cblxubnVtT3V0cHV0U2l6ZVJhbmdlLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgIHVwZGF0ZU91dHB1dFNpemVSYW5nZVRvTnVtKCk7XG4gICAgcnVuKCk7XG59KTtcblxubnVtT3V0cHV0U2l6ZU51bS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICB1cGRhdGVPdXRwdXRTaXplTnVtVG9SYW5nZSgpO1xuICAgIHVwZGF0ZU91dHB1dFNpemVSYW5nZVRvTnVtKCk7XG4gICAgcnVuKCk7XG59KTtcblxuZnVuY3Rpb24gdXBkYXRlQWxwaGFiZXRTaXplKCk6IHZvaWQge1xuICAgIHNwbkFscGhhYmV0U2l6ZS5pbm5lckhUTUwgPSB0eHRBbHBoYWJldC52YWx1ZS5sZW5ndGgudG9TdHJpbmcoKTtcblxuICAgIGNvbnN0IGFscGhhYmV0U2l6ZURpZ2l0Q291bnQ6IG51bWJlciA9IHR4dEFscGhhYmV0LnZhbHVlLmxlbmd0aC50b1N0cmluZygpLmxlbmd0aDtcbiAgICBpZiAoYWxwaGFiZXRTaXplRGlnaXRDb3VudCA8IDIpIHtcbiAgICAgICAgLy8gQWRkIGEgc3BhY2UgdG8ga2VlcCBhIG5pY2UgdmlzdWFsIGFsaWdubWVudC5cbiAgICAgICAgc3BuQWxwaGFiZXRTaXplLmlubmVySFRNTCA9IHNwbkFscGhhYmV0U2l6ZS5pbm5lckhUTUwucGFkU3RhcnQoMiwgJyAnKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUFscGhhYmV0VmFsaWRpdHlEaXNwbGF5KGlzQWxwaGFiZXRWYWxpZDogYm9vbGVhbik6IHZvaWQge1xuICAgIGlmIChpc0FscGhhYmV0VmFsaWQpIHtcbiAgICAgICAgdHh0QWxwaGFiZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2JhY2tncm91bmQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0eHRBbHBoYWJldC5zdHlsZS5zZXRQcm9wZXJ0eSgnYmFja2dyb3VuZCcsIEVSUk9SX0NPTE9SKTtcbiAgICB9XG59XG5cbnR4dEFscGhhYmV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgIGNvbnN0IGlzQWxwaGFiZXRWYWxpZFJlc3VsdDogYm9vbGVhbiA9IGlzQWxwaGFiZXRWYWxpZCh0eHRBbHBoYWJldC52YWx1ZSk7XG5cbiAgICB1cGRhdGVBbHBoYWJldFZhbGlkaXR5RGlzcGxheShpc0FscGhhYmV0VmFsaWRSZXN1bHQpO1xuXG4gICAgaWYgKGlzQWxwaGFiZXRWYWxpZFJlc3VsdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHVwZGF0ZUFscGhhYmV0U2l6ZSgpO1xuICAgIHJ1bigpO1xufSk7XG5cbmJ0blJlc2V0QWxwaGFiZXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgcmVzZXRBbHBoYWJldCgpO1xuICAgIHVwZGF0ZUFscGhhYmV0U2l6ZSgpO1xuICAgIHJ1bigpO1xufSk7XG5cbmZ1bmN0aW9uIGNsZWFyT3V0cHV0cygpOiB2b2lkIHtcbiAgICB0eHRSZXN1bHRQYXNzd29yZC52YWx1ZSA9ICcnO1xuICAgIHR4dFBhcmFtZXRlcnMudmFsdWUgPSAnJztcblxuICAgIHVwZGF0ZVJlc3VsdFBhc3N3b3JkTGVuZ3RoKCk7XG59XG5cbmZ1bmN0aW9uIGNhblJ1bigpOiBib29sZWFuIHtcbiAgICBjb25zdCBhbHBoYWJldDogc3RyaW5nID0gdHh0QWxwaGFiZXQudmFsdWU7XG5cbiAgICBpZiAoaXNBbHBoYWJldFZhbGlkKGFscGhhYmV0KSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChnZXRQcml2YXRlUGFydCgpLmxlbmd0aCA8PSAwIHx8IHR4dFB1YmxpY1BhcnQudmFsdWUubGVuZ3RoIDwgOCB8fCBhbHBoYWJldC5sZW5ndGggPCAyKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gcnVuKCkge1xuICAgIHVwZGF0ZVBhc3N3b3JkR2VuZXJhdGlvblBhcmFtZXRlcnMoKTtcblxuICAgIGlmIChjYW5SdW4oKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgY2xlYXJPdXRwdXRzKCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBwcml2YXRlUGFydFN0cmluZzogc3RyaW5nID0gZ2V0UHJpdmF0ZVBhcnQoKTtcbiAgICBjb25zdCBwdWJsaWNQYXJ0U3RyaW5nID0gdHh0UHVibGljUGFydC52YWx1ZTtcblxuICAgIGNvbnN0IHByaXZhdGVQcml2YXRlQnl0ZXM6IEFycmF5QnVmZmVyID0gc3RyaW5nVXRpbHMuc3RyaW5nVG9BcnJheShwcml2YXRlUGFydFN0cmluZyk7XG4gICAgY29uc3QgcHVibGljUGFydEJ5dGVzOiBBcnJheUJ1ZmZlciA9IHN0cmluZ1V0aWxzLnN0cmluZ1RvQXJyYXkocHVibGljUGFydFN0cmluZyk7XG5cbiAgICBjb25zdCBrZXlCeXRlczogQXJyYXlCdWZmZXIgPSBhd2FpdCBwYXNzd29yZEdlbmVyYXRvci5nZW5lcmF0ZVBhc3N3b3JkKHByaXZhdGVQcml2YXRlQnl0ZXMsIHB1YmxpY1BhcnRCeXRlcyk7XG5cbiAgICBjb25zdCBrZXlTdHJpbmc6IHN0cmluZyA9IGFycmF5VXRpbHMudG9DdXN0b21CYXNlKGtleUJ5dGVzLCB0eHRBbHBoYWJldC52YWx1ZSk7XG4gICAgdHh0UmVzdWx0UGFzc3dvcmQudmFsdWUgPSBzdHJpbmdVdGlscy50cnVuY2F0ZShrZXlTdHJpbmcsIHBhcnNlSW50KG51bU91dHB1dFNpemVSYW5nZS52YWx1ZSwgMTApKTtcblxuICAgIHVwZGF0ZVJlc3VsdFBhc3N3b3JkTGVuZ3RoKCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHJlc2V0QWxwaGFiZXQoKSB7XG4gICAgdHh0QWxwaGFiZXQudmFsdWUgPSBERUZBVUxUX0FMUEhBQkVUO1xuICAgIHVwZGF0ZUFscGhhYmV0U2l6ZSgpO1xuXG4gICAgY29uc3QgaXNBbHBoYWJldFZhbGlkUmVzdWx0OiBib29sZWFuID0gaXNBbHBoYWJldFZhbGlkKHR4dEFscGhhYmV0LnZhbHVlKTtcblxuICAgIHVwZGF0ZUFscGhhYmV0VmFsaWRpdHlEaXNwbGF5KGlzQWxwaGFiZXRWYWxpZFJlc3VsdCk7XG5cbiAgICBpZiAoaXNBbHBoYWJldFZhbGlkUmVzdWx0KSB7XG4gICAgICAgIGF3YWl0IHJ1bigpO1xuICAgIH1cbn1cblxuY29uc3QgcHJvdGVjdFByaXZhdGVQYXJ0QWN0aW9uOiBUaW1lZEFjdGlvbiA9IG5ldyBUaW1lZEFjdGlvbihwcm90ZWN0QW5kTG9ja1ByaXZhdGVQYXJ0LCBQUklWQVRFX1BBUlRfUFJPVEVDVElPTl9USU1FT1VUKTtcblxudHh0UHJpdmF0ZVBhcnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgYnRuUHJvdGVjdC5kaXNhYmxlZCA9IHR4dFByaXZhdGVQYXJ0LnZhbHVlLmxlbmd0aCA9PT0gMDtcblxuICAgIHNwblByaXZhdGVQYXJ0U2l6ZS5pbm5lckhUTUwgPSB0eHRQcml2YXRlUGFydC52YWx1ZS5sZW5ndGgudG9TdHJpbmcoKTtcbiAgICB1cGRhdGVQcml2YXRlUGFydHNNYXRjaGluZygpO1xuICAgIHJ1bigpO1xuICAgIHByb3RlY3RQcml2YXRlUGFydEFjdGlvbi5yZXNldCgpO1xufSk7XG5cbmZ1bmN0aW9uIHVwZGF0ZVByaXZhdGVQYXJ0c01hdGNoaW5nKCk6IHZvaWQge1xuICAgIGlmICh0eHRQcml2YXRlUGFydENvbmZpcm1hdGlvbi52YWx1ZSA9PT0gdHh0UHJpdmF0ZVBhcnQudmFsdWUpIHtcbiAgICAgICAgdHh0UHJpdmF0ZVBhcnRDb25maXJtYXRpb24uc3R5bGUuc2V0UHJvcGVydHkoJ2JhY2tncm91bmQnLCBTVUNDRVNTX0NPTE9SKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0eHRQcml2YXRlUGFydENvbmZpcm1hdGlvbi5zdHlsZS5zZXRQcm9wZXJ0eSgnYmFja2dyb3VuZCcsIEVSUk9SX0NPTE9SKTtcbiAgICB9XG59O1xuXG50eHRQcml2YXRlUGFydENvbmZpcm1hdGlvbi5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICBzcG5Qcml2YXRlUGFydFNpemVDb25maXJtYXRpb24uaW5uZXJIVE1MID0gdHh0UHJpdmF0ZVBhcnRDb25maXJtYXRpb24udmFsdWUubGVuZ3RoLnRvU3RyaW5nKCk7XG4gICAgdXBkYXRlUHJpdmF0ZVBhcnRzTWF0Y2hpbmcoKTtcbn0pO1xuXG50eHRQYXRoLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgIHVwZGF0ZVBhc3N3b3JkR2VuZXJhdGlvblBhcmFtZXRlcnMoKTtcbn0pO1xuXG50eHRQdWJsaWNQYXJ0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgIHVwZGF0ZVBhc3N3b3JkUHVibGljUGFydExhc3RVcGRhdGUoKTtcbiAgICB1cGRhdGVQYXNzd29yZEdlbmVyYXRpb25QYXJhbWV0ZXJzKCk7XG4gICAgcnVuKCk7XG59KTtcblxudHh0Q3VzdG9tS2V5cy5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICB1cGRhdGVQYXNzd29yZEdlbmVyYXRpb25QYXJhbWV0ZXJzKCk7XG59KTtcblxudXBkYXRlT3V0cHV0U2l6ZVJhbmdlVG9OdW0oKTtcbnJlc2V0QWxwaGFiZXQoKTtcbnVwZGF0ZVByaXZhdGVQYXJ0c01hdGNoaW5nKCk7XG5idG5Qcm90ZWN0LnRpdGxlID0gYnRuUHJvdGVjdFRpdGxlRm9yUHJvdGVjdDtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFRpbWVkQWN0aW9uIHtcbiAgICBwcml2YXRlIHRpbWVvdXQ6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgICBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSBhY3Rpb246IEZ1bmN0aW9uLCBwcml2YXRlIGRlbGF5OiBudW1iZXIpIHtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVzZXQob3ZlcnJpZGVEZWxheTogbnVtYmVyIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLnRpbWVvdXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkZWxheSA9IG92ZXJyaWRlRGVsYXkgIT09IHVuZGVmaW5lZCA/IG92ZXJyaWRlRGVsYXkgOiB0aGlzLmRlbGF5O1xuXG4gICAgICAgIHRoaXMudGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hY3Rpb24oKTtcbiAgICAgICAgICAgIHRoaXMudGltZW91dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfSwgZGVsYXkpO1xuICAgIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=
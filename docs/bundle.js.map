{"version":3,"file":"bundle.js","mappings":"mBAAO,MACMA,EAAsB,UAE5B,SAASC,EAAeC,GAC3B,MAAMC,EAA4BC,SAASH,eAAeC,GAE1D,GAAoB,OAAhBA,EACA,MAAM,IAAIG,MAAM,gBAAgBH,iBAGpC,OAAOC,CACX,CAEOG,eAAeC,EAAiBC,EAAcC,GACjD,IAEI,aADMC,UAAUC,UAAUC,UAAUJ,IAC7B,C,CACT,MAAOK,GACL,MAAMC,EAAaD,EAGnB,OAFAE,QAAQF,MAAMC,EAAWE,OAASH,GAClCJ,IAAUK,EAAWE,OAASH,IACvB,C,CAEf,CAEO,SAASI,EAAUC,EAAuBC,GAAmB,GAChED,EAAIE,MAAQ,GACRD,GACAD,EAAIG,OAEZ,CA6BO,SAASC,EAAoBC,EAA2BC,EAAqCC,GAChG,MAAMC,EAvBV,SAA+BC,GAC3B,IAAIC,EAEJ,MAAO,CACHC,MAAO,UACaC,IAAZF,IACAG,aAAaH,GACbA,OAAUE,GAEdH,GAAW,EAEfK,IAAK,UACeF,IAAZF,GACAG,aAAaH,GAEjBA,EAAUK,WAAWN,EAW1B,IAX8C,EAGrD,CAK6CO,EAAsB,KAC3DX,EAAOY,UAAUC,OAAO,cACxBb,EAAOY,UAAUC,OAAO,YAAY,IAGlCC,EAAgB/B,UAClBiB,EAAOe,UAAW,EAClBZ,EAAgBG,QAEhB,IACI,MAAMU,EAAef,IAErB,IAAIgB,EAEAA,EADAD,aAAwBE,cACTF,EAENA,OAGET,IAAXU,IAAmC,IAAXA,EACxBjB,EAAOY,UAAUO,IAAI,cAErBnB,EAAOY,UAAUO,IAAI,Y,CAE3B,MAAO7B,GACL,MAAMC,EAAaD,EACnBU,EAAOY,UAAUO,IAAI,aACrB3B,QAAQF,MAAMC,EAAWE,OAASH,GAClCY,IAAWX,EAAWE,OAASH,E,SAE/Ba,EAAgBM,MAChBT,EAAOe,UAAW,C,GAM1B,OAFAf,EAAOoB,iBAAiB,QAASN,GAE1BA,CACX,CAEO,SAASO,EAAgB1B,EAAuBK,EAA2Bd,GAC9E,OAAOa,EAAoBC,GAAQ,IAAMhB,EAAiBW,EAAIE,QAAQX,EAC1E,CAcO,SAASoC,EAAS1C,EAAsB2C,GACvCA,EACA3C,EAAQ4C,MAAMC,eAAe,WAE7B7C,EAAQ4C,MAAME,YAAY,UAAW,OAE7C,CAEO,SAASC,EAAaC,EAAyBL,GAClD,IAAK,MAAM3C,KAAWgD,EAClBN,EAAS1C,EAAS2C,EAE1B,CC1HO,MAAMM,EAckBC,KAbnBC,iBAA2B,EAEnC,kBAAWC,GACP,OAAOC,KAAKF,eAChB,CAEA,kBAAWC,CAAeE,GACtB,GAAIA,EAAQ,GAAKA,GAASD,KAAKH,KAAKK,OAChC,MAAM,IAAIrD,MAAM,sDAAsDmD,KAAKH,KAAKK,OAAS,OAE7FF,KAAKG,aAAaF,EACtB,CAEA,YAA2BJ,GAAA,KAAAA,KAAAA,EACvB,IAAK,IAAIO,EAAI,EAAGA,EAAIJ,KAAKH,KAAKK,OAAQE,GAAK,EACvCP,EAAKO,GAAGC,eAAelB,iBAAiB,SAAS,KAC7Ca,KAAKG,aAAaC,EAAE,IAI5BJ,KAAKG,aAAa,EACtB,CAEQ,YAAAA,CAAaJ,GACjB,GAAIA,IAAmBC,KAAKF,gBACxB,OAGJ,IAAIQ,EAEJ,IAAKA,KAAWN,KAAKH,KAAM,CACvB,MAAM9B,EAASuC,EAAQD,eACvBtC,EAAOwB,MAAMC,eAAe,eAC5BzB,EAAOwB,MAAME,YAAY,QAAS,WAElCa,EAAQC,gBAAgBhB,MAAME,YAAY,UAAW,O,CAGzD,MAAM1B,EAASiC,KAAKH,KAAKE,GAAgBM,eACzCtC,EAAOwB,MAAME,YAAY,cAAe,QACxC1B,EAAOwB,MAAMC,eAAe,SAE5BQ,KAAKH,KAAKE,GAAgBQ,gBAAgBhB,MAAMC,eAAe,WAE/DQ,KAAKF,gBAAkBC,EAEvBC,KAAKH,KAAKE,GAAgBS,eAC9B,ECjDJ,MAAMC,EAA4B,8HAG5BC,EAA0B,EAAkB,gBAE5CC,EAAiB,EAAkB,kBACnCC,EAA6B,EAAkB,8BAC/CC,EAAa,EAAkB,cAC/BC,EAA2B,EAAkB,4BAE7CC,EAAqB,EAAkB,sBACvCC,EAAiC,EAAkB,kCAIzD,IAAIC,EAEJ,MAAMC,EAAoC,GAUnC,SAASC,IACZ,YAAoB7C,IAAhB2C,EACOA,EAEJN,EAAe/C,KAC1B,CAEO,SAASwD,IACwB,IAAhCT,EAAe/C,MAAMsC,SAIzBe,EAAcN,EAAe/C,MAC7BkD,EAAyBO,UAAY,YAErC,EAAaV,GAEb,EAAaC,GACbG,EAAmBM,UAAY,IAC/BL,EAA+BK,UAAY,IAE3CV,EAAe7B,UAAW,EAC1B8B,EAA2B9B,UAAW,EAEtC+B,EAAWQ,UAAY,mBACvBR,EAAWS,MAnDiB,kEAqD5BC,IACJ,CA2BA,SAASC,SAPelD,IAAhB2C,EACAG,KAbJH,OAAc3C,EACdwC,EAAyBO,UAAY,GAErCV,EAAe7B,UAAW,EAC1B8B,EAA2B9B,UAAW,EAEtC+B,EAAWQ,UAAY,mBACvBR,EAAWS,MAAQb,EACnBI,EAAW/B,UAAW,EAa1B,CAEA,MAAM2C,EAAwC,IC3FvC,MAGwBzD,OAA0B0D,MAF7CtD,QAER,YAA2BJ,EAA0B0D,GAA1B,KAAA1D,OAAAA,EAA0B,KAAA0D,MAAAA,CACrD,CAEO,KAAAC,CAAMC,OAAoCtD,QACxBA,IAAjB0B,KAAK5B,SACLG,aAAayB,KAAK5B,SAGtB,MAAMsD,OAA0BpD,IAAlBsD,EAA8BA,EAAgB5B,KAAK0B,MAEjE1B,KAAK5B,QAAUyD,OAAOpD,YAAW,KAC7BuB,KAAKhC,SACLgC,KAAK5B,aAAUE,CAAS,GACzBoD,EACP,GD0E0DN,EAzEd,KA2EhD,SAASU,IAML,IAAIC,EACJ,IAAKA,KANLlB,EAAW/B,SAA2C,IAAhC6B,EAAe/C,MAAMsC,OAE3Ca,EAAmBM,UAAYV,EAAe/C,MAAMsC,OAAO8B,WAC3DT,IAGyBL,GACrBa,IAGJN,EAAyBE,OAC7B,CAEA,SAASJ,IACDX,EAA2BhD,QAAU+C,EAAe/C,MACpDgD,EAA2BrB,MAAME,YAAY,aF7GhB,WE+G7BmB,EAA2BrB,MAAME,YAAY,aAAc,EAEnE,CAEA,SAASwC,IACLjB,EAA+BK,UAAYT,EAA2BhD,MAAMsC,OAAO8B,WACnFP,EAAyBE,QACzBJ,GACJ,CE9GA,MAAMW,EAA0B,6DAEzB,MAAMC,EACT,QAAIC,GACA,MAAO,QACX,CAEA,eAAIC,GACA,MAAO,uCACX,CAEA,MAAAC,CAAOC,GACH,OCkID,SAA0BA,EAAoBC,GAKjD,GAAyB,IAArBD,EAAME,WACN,MAAO,GAGX,MAAMC,EAAsB,IAAIC,SAASJ,EAAO,GAEhD,IAAIK,EAAgB,EACpB,MAAMC,EAAmB,CAAC,GAE1B,IAAK,IAAIzC,EAAI,EAAGA,EAAImC,EAAME,WAAYrC,IAAK,CACvC,IAAK,IAAI0C,EAAI,EAAGA,EAAID,EAAO3C,OAAQ4C,IAC/BD,EAAOC,KAAO,EAGlBD,EAAO,IAAMH,EAAUK,SAAS3C,GAEhCwC,EAAQ,EAER,IAAK,IAAIE,EAAI,EAAGA,EAAID,EAAO3C,OAAQ4C,IAC/BD,EAAOC,IAAMF,EACbA,EAASC,EAAOC,GAAKN,GAAmB,EACxCK,EAAOC,IAAMN,GAGjB,KAAOI,EAAQ,GACXC,EAAOG,KAAKJ,EAAQJ,IACpBI,EAASA,EAAQJ,GAAmB,C,CAI5C,IAAK,IAAIpC,EAAI,EAA6B,IAA1BsC,EAAUK,SAAS3C,IAAYA,EAAImC,EAAME,WAAa,EAAGrC,IACrEyC,EAAOG,KAAK,GAGhB,IAAIhE,EAAS,GAEb,IAAK,IAAIoB,EAAIyC,EAAO3C,OAAS,EAAGE,GAAK,EAAGA,IACpCpB,GAAUwD,EAASK,EAAOzC,IAG9B,OAAOpB,CACX,CDhLe,CAA4BuD,EAAOL,EAC9C,CAEA,MAAAe,CAAOV,GACH,OC8KD,SAA4BA,EAAeC,GAC9C,GAAIA,EAAStC,OAAS,EAClB,MAAM,IAAIrD,MAAM,yEAGpB,GAAqB,IAAjB0F,EAAMrC,OACN,OAAO,IAAIgD,YAAY,GAG3B,IAAK,IAAI9C,EAAI,EAAGA,EAAImC,EAAMrC,OAAQE,IAC9B,IAAoC,IAAhCoC,EAASW,SAASZ,EAAMnC,IACxB,MAAM,IAAIvD,MAAM,OAAO2F,EAAStC,oBAAoBsC,kCAAyCD,EAAMnC,QAI3G,MAAMgD,EAAkB,CAAC,GACzB,IAAIR,EAAQ,EAEZ,IAAK,IAAIxC,EAAI,EAAGA,EAAImC,EAAMrC,OAAQE,IAAK,CACnC,MAAMiD,EAAId,EAAMnC,GAEhB,IAAK,IAAI0C,EAAI,EAAGA,EAAIM,EAAMlD,OAAQ4C,IAC9BM,EAAMN,IAAMN,EAAStC,OAGzBkD,EAAM,IAAMZ,EAASc,QAAQD,GAE7BT,EAAQ,EAER,IAAK,IAAIE,EAAI,EAAGA,EAAIM,EAAMlD,OAAQ4C,IAC9BM,EAAMN,IAAMF,EACZA,EAAQQ,EAAMN,IAAM,EACpBM,EAAMN,IAAM,IAGhB,KAAOF,EAAQ,GACXQ,EAAMJ,KAAa,IAARJ,GACXA,IAAU,C,CAIlB,IAAK,IAAIxC,EAAI,EAAGmC,EAAMnC,KAAOoC,EAAS,IAAMpC,EAAImC,EAAMrC,OAAS,EAAGE,IAC9DgD,EAAMJ,KAAK,GAGf,OAAO,IAAIO,WAAWH,EAAMI,WAAWC,MAC3C,CD5Ne,CAA8BlB,EAAOL,EAChD,EAGG,MAAMwB,EAA0B,iEAoJ1BC,EAAkC,CAC3C,IAnJG,MACH,QAAIvB,GACA,MAAO,QACX,CAEA,eAAIC,GACA,MAAO,aAAaqB,KACxB,CAEA,MAAApB,CAAOC,GACH,OCmED,SAAsBa,EAAoBZ,GAC7C,MAAMoB,EAAyBC,OAAOrB,IAEtC,IAAIxD,EAAiB,GACjB8E,EApER,SAAqCC,GAGjC,MAAM7D,GAFN6D,EAlCJ,SAA8BN,GAC1B,GAAIA,EAAOhB,WAAa,MACpB,MAAM,IAAI5F,MAAM,qBAAqB4G,EAAOhB,oBAGhD,IAAIvC,EAASuD,EAAOhB,WACpB,MAAMuB,EAA6B,IAAIT,WAAW,EAAIE,EAAOhB,YAE7D,IAAK,IAAIrC,EAAY,EAAGA,EAAI,EAAGA,GAAK,EAChC4D,EAAe5D,GAAKF,EAAS,IAC7BA,GAAU,IAKd,OAFA8D,EAAeC,IAAI,IAAIV,WAAWE,GAAS,GAEpCO,EAAeP,MAC1B,CAkBkBS,CAAqBH,IAEAtB,WAC7BC,EAAsB,IAAIC,SAASoB,EAAa,GAEtD,IAAI/E,EAAiB,GACjBmF,EAAqB,GAEzB,IAAK,IAAI/D,EAAY,EAAGA,EAAIF,EAAQE,GAAK,EACrCpB,GAAU6E,OAAOnB,EAAUK,SAAS3C,IAAM+D,EAC1CA,GAAc,KAGlB,OAAOnF,CACX,CAqDyBoF,CAA4BhB,GAEjD,KAAOU,EAAS,IAAI,CAChB,MAAMO,EAAoBP,EAASF,EACnCE,GAAUF,EAIV5E,GAAUwD,EAFyBqB,OAAOS,QAAQ,EAAGD,G,CAKzD,OAAOrF,CACX,CDnFe,CAAwBuD,EAAOmB,EAC1C,CAEA,MAAAT,CAAOV,GACH,OCiFD,SAAwBA,EAAeC,GAC1C,MAAMoB,EAAyBC,OAAOrB,EAAStC,QAE/C,IAAI4D,EAAiB,GACjBK,EAAqB,GAEzB,IAAK,IAAI/D,EAAY,EAAGA,EAAImC,EAAMrC,OAAQE,GAAK,EAG3C0D,GAFsBD,OAAOrB,EAASc,QAAQf,EAAMnC,KAElC+D,EAClBA,GAAcP,EAGlB,OA9EG,SAAqCE,GACxC,MAAM9E,EAAwB,GAE9B,KAAO8E,EAAS,IAAI,CAChB,MAAMO,EAAoBP,EAAS,KACnCA,GAAU,KAEV,MAAMS,EAAoBC,OAAYX,OAAOS,QAAQ,EAAGD,IAExDrF,EAAOgE,KAAKuB,E,CAGhB,IAAIE,EAAsBzF,EAAO,GAC7BA,EAAOkB,OAAS,IAChBuE,GAA2B,IAAZzF,EAAO,IAI1B,MAAM0F,EAAOD,GAAezF,EAAOkB,OAAS,GAE5C,IAAK,IAAIE,EAAY,EAAGA,EAAIsE,EAAMtE,GAAK,EACnCpB,EAAOgE,KAAK,GAGhB,OAAO,IAAIO,WAAWvE,EAAO2F,MAAM,IAAIlB,MAC3C,CAqDWmB,CAA4Bd,EACvC,CD/Fe,CAA0BvB,EAAOmB,EAC5C,GAqIA,IAAIvB,EACJ,IAjIG,MACH,QAAIC,GACA,MAAO,QACX,CAEA,eAAIC,GACA,MAAO,EACX,CAEA,MAAAC,CAAOC,GACH,OAAOvC,KAAK6E,cAAc,IAAItB,WAAWhB,GAC7C,CAEA,MAAAU,CAAOV,GACH,OAAOvC,KAAK8E,cAAcvC,GAAOkB,MACrC,CAEA,cAAAsB,CAAeC,GACX,OAAOA,EAAa,IAAMA,EAAa,GACjCA,EAAa,GACbA,EAAa,IAAMA,EAAa,IAC5BA,EAAa,GACbA,EAAa,IAAMA,EAAa,GAC5BA,EAAa,EACE,KAAfA,EACI,GACe,KAAfA,EACI,GACA,CAC1B,CAEA,aAAAF,CAAcG,EAAqBC,GAI/B,MAAMC,GAFNF,EAAcA,EAAYG,QAAQ,kBAAmB,KAErBlF,OAC1BmF,EAAeH,EACfI,KAAKC,MAAqB,EAAdJ,EAAkB,GAAM,GAAKD,GAAcA,EACxC,EAAdC,EAAkB,GAAM,EAEzBK,EAAc,IAAIjC,WAAW8B,GAEnC,IAAII,EAAc,EAEdC,EAAc,EAElB,IAAK,IAAIC,EAAa,EAAGA,EAAaR,EAAaQ,IAAc,CAC7D,MAAMC,EAAiBD,EAAa,EAIpC,GAFAF,GAAezF,KAAK+E,eAAeE,EAAYY,WAAWF,KAAiB,GAAK,EAAIC,GAE7D,IAAnBA,GAAwBT,EAAcQ,GAAe,EAAG,CACxD,IAAIG,EAAiB,EAErB,KAAOA,EAAiB,GAAKJ,EAAcL,GACvCG,EAAYE,GAAgBD,KAAkB,KAAaK,EAAkB,IAAa,IAC1FA,IACAJ,IAGJD,EAAc,C,EAItB,OAAOD,CACX,CAGA,cAAAO,CAAeC,GACX,OAAOA,EAAa,GACdA,EAAa,GACbA,EAAa,GACTA,EAAa,GACbA,EAAa,GACTA,EAAa,EACE,KAAfA,EACI,GACe,KAAfA,EACI,GACA,EAC1B,CAEA,aAAAnB,CAAcoB,GACV,IAAIH,EAAiB,EACjBI,EAAe,GAEnB,MAAMC,EAAmBF,EAAW/F,OAEpC,IAAIuF,EAAc,EAElB,IAAK,IAAIE,EAAa,EAAGA,EAAaQ,EAAkBR,IAAc,CAClEG,EAAiBH,EAAa,EAO9B,MACMS,EAA2B,GADnB,KAAaN,EAG3BL,GAAeQ,EAAWN,IAAeS,EAElB,IAAnBN,GAAwBG,EAAW/F,OAASyF,GAAe,IAC3DO,GAAgBG,OAAOC,cACnBtG,KAAK+F,eAAgBN,IAAgB,GAAM,IAC3CzF,KAAK+F,eAAgBN,IAAgB,GAAM,IAC3CzF,KAAK+F,eAAgBN,IAAgB,EAAK,IAC1CzF,KAAK+F,eAA6B,GAAdN,IAExBA,EAAc,E,CAItB,MAAMc,EAA6B,IAAnBT,EACV,GACmB,IAAnBA,EACI,IACA,KAEV,OAAOI,EAAaM,UAAU,EAAGN,EAAahG,OAAS,EAAI4F,GAAkBS,CACjF,IE5KG,MAAME,UAA2B5J,MAC5B6J,MAER,QAAWtE,GACP,OAAOpC,KAAK0G,KAChB,CAEA,WAAAC,CAAYC,GACRC,MAAMD,GACN5G,KAAK0G,MAAQD,EAAmBK,WAChCC,OAAOC,eAAehH,gBAAiBiH,UAC3C,CAEOC,kBAAqC,qBAErC,iBAAOC,CAAW9J,GACrB,OAAOA,GAASA,EAAM+E,OAASqE,EAAmBK,UACtD,EAGG,MAAMM,EACDC,cAAwB,EACxBC,OAER,WAAAX,GACI3G,KAAKsH,OAAS,IAAIC,EAAkBvH,KACxC,CAEA,eAAWwH,GACP,OAAOxH,KAAKqH,YAChB,CAEA,SAAWI,GACP,OAAOzH,KAAKsH,MAChB,CAEO,MAAAI,GACH1H,KAAKqH,cAAe,CACxB,EAGG,MAAME,EASWI,OARZT,aAAyC,KAC1C,eAAWU,GAId,OAHgC,OAA5BL,EAAkBM,QAClBN,EAAkBM,MAAQ,IAAIN,EAAkB,IAAIH,IAEjDG,EAAkBM,KAC7B,CAEA,WAAAlB,CAAoBgB,GAAA,KAAAA,OAAAA,CACpB,CAEA,eAAWH,GACP,OAAOxH,KAAK2H,OAAOH,WACvB,EAGG,SAASM,EAAmBC,GAC/B,GAAIA,EAAkBP,YAClB,MAAM,IAAIf,CAElB,CC3DA,MAAMuB,EAAsB,IAAI7F,EAezBrF,eAAemL,EAAgBC,EAAuBC,EAAmBC,EAAoBL,GAChG,MAAMM,QAA2BxG,OAAOyG,OAAOC,OAAOC,UAClD,MACAN,EACA,UACA,EACA,CAAC,cAGLJ,EAAmBC,GAEnB,MAAMU,EAA0B,CAC5BrG,KAAM,SACNsG,KAAM,UACNN,WAAYA,EACZD,QAUEnJ,QAA0B6C,OAAOyG,OAAOC,OAAOI,UACjDF,EACAJ,EATwC,CAGxCjG,KAAM,UACNlC,OAAQ,MAOR,EACA,CAAC,YAGL4H,EAAmBC,GAEnB,MAAMa,QAAyB/G,OAAOyG,OAAOC,OAAOM,UAAU,MAAO7J,GAIrE,OAFA8I,EAAmBC,GAEZa,CACX,CC/BO,SAASE,EAASvG,EAAerC,GACpC,OAAIqC,EAAMrC,QAAUA,EACTqC,EAGJA,EAAMiE,UAAU,EAAGtG,EAC9B,CAEO,SAAS6I,EAAcC,GAE1B,OADgB,IAAIC,aACL3G,OAAO0G,GAAKvF,MAC/B,CCpCO,SAASyF,EAActL,GAC1B,OAAOA,UAEqC,IAAxCA,EAAMuL,eAAe,gBACM,WAA3BvL,EAAM+I,YAAYvE,IAC1B,CAEO,SAASgH,EAAeC,GAC3B,MAAMC,EAAsB,CAAC,EAE7B,IAAK,MAAOV,EAAKhL,KAAUmJ,OAAOwC,QAAQF,GAAQG,MAAK,CAACC,EAAGC,IAAMD,EAAE,GAAGE,cAAcD,EAAE,MAClFJ,EAAOV,GAAOM,EAActL,GAASwL,EAAexL,GAASA,EAGjE,OAAO0L,CACX,CCfA,MAAMM,EAA6B,CAAC,EAM7B,SAASC,EAAWC,GACvB,IAAKA,EACD,MAAM,IAAIC,UAAU,wCAGxB,MAAMC,EAAUJ,EAASE,GAEzB,QAAgBxL,IAAZ0L,EACA,MAAM,IAAInN,MAAM,YAAYiN,yBAGhC,OAAOE,CACX,CAEO,SAASC,EAAgBH,EAAqBI,GACjD,IAAKJ,EACD,MAAM,IAAIC,UAAU,wCAExB,QAAiBzL,IAAb4L,EACA,MAAM,IAAIH,UAAU,4CAGxB,QAA8BzL,IAA1BsL,EAASE,GACT,MAAM,IAAIjN,MAAM,YAAYiN,6BAGhCF,EAASE,GAAeI,CAC5B,CC1BA,MAAeC,EA4BkBC,mBA3B7BlD,gBAA0B,yBAC1BA,2BAAqC,mCAErCA,kCAA4C,kCAC5CA,8BAAwC,oCACxCA,kCAA4C,kCAEpCO,MAAuB,KACvB4C,gBAAiC,KACjCC,wBAAyC,KAEzCC,SAA0B,KAC1BC,eAAgC,KAChCC,cAA+B,KAE7B,WAAAC,GACN,OAAO1K,KAAKuK,QAChB,CAEU,iBAAAI,GACN,OAAO3K,KAAKwK,cAChB,CAEU,gBAAAI,GACN,OAAO5K,KAAKyK,aAChB,CAEA,YAA6BL,GAAA,KAAAA,mBAAAA,CAC7B,CAEO,KAAAS,GACH7K,KAAKoK,mBAAmBU,WAAWX,EAAuBY,4BAC1D/K,KAAKoK,mBAAmBU,WAAWX,EAAuBa,wBAC1DhL,KAAKoK,mBAAmBU,WAAWX,EAAuBc,4BAE1DjL,KAAKoK,mBAAmBU,WAAWX,EAAuBe,oBAC9D,CAEQ,wBAAAC,GACJ,MAAO,SAASnL,KAAKyH,OACzB,CAEQ,qBAAA2D,CAAsBC,EAAgBC,EAAoBC,GAC9D,MAAMC,EAAuB,CACzB,OAAU,iCACV,eAAgB,mBAChB,cAAiBF,GAOrB,OAJItL,KAAKqK,kBACLmB,EAAQ,gBAAkBxL,KAAKqK,iBAG5B,CACHgB,SACAG,UACAD,KAAMA,EAAOE,KAAKC,UAAUH,QAAQjN,EAE5C,CAEQ,YAAAqN,CAAaC,GACjB,MAAO,GAAGzB,EAAuB0B,WAAWD,GAChD,CAEU,aAAME,CAAQC,EAA8BV,EAAgBO,EAAqBN,EAAoBC,OAAYjN,GACvH,MAAM0N,EAAchM,KAAK2L,aAAaC,GAChCK,EAA2BjM,KAAKoL,sBAAsBC,EAAQC,EAAYC,GAEhF,IAAIW,QAA2BC,MAAMH,EAAKC,GAE1C,OAAwB,MAApBC,EAASE,QAAkBL,GAC3B/L,KAAKqK,gBAAkBgC,OAAO,wBAEzBrM,KAAKqK,sBAIGrK,KAAK8L,QAAQC,EAAqBV,EAAQO,EAAaN,EAAYC,GAHrE,MAMRW,CACX,CAEU,oBAAAI,CAAqB1D,EAAa2D,EAAoBC,GAC5D,IAAI5O,EAAuBiE,OAAO4K,aAAaC,QAAQ9D,GAEvD,OAAIhL,IAIJA,EAAQyO,OAAOE,EAAYC,GAEtB5O,GAILiE,OAAO4K,aAAaE,QAAQ/D,EAAKhL,GAE1BA,GALI,KAMf,CAEU,qBAAAgP,GACN,MAAMZ,EAAM,IAAIa,IAAIhL,OAAOiL,SAAS9K,YAEpC,IAAI+K,EAAyB,GACzBC,EAAc,GAElB,GAAqB,eAAjBhB,EAAIiB,SAA2B,CAC/B,MAAMC,EAAelB,EAAImB,SAASC,MAAM,KACpCF,EAAahN,QAAU,IACvB6M,EAAyBG,EAAa,GACtCF,EAAc,GAAGE,EAAa,U,CAIjCF,IACDA,EAAc,sBAGlB,MAAMzC,EAAWvK,KAAKsM,qBAAqBnC,EAAuBY,2BAA4B,2BAA4BgC,GAC1H,IAAKxC,EACD,OAAOtL,QAAQoO,SAAQ,GAE3BrN,KAAKuK,SAAWA,EAEhB,MAAMC,EAAgCxK,KAAKsM,qBAAqBnC,EAAuBa,uBAAwB,gCAAiCgC,GAChJ,IAAKxC,EACD,OAAOvL,QAAQoO,SAAQ,GAE3BrN,KAAKwK,eAAiBA,EAEtB,MAAMC,EAA+BzK,KAAKsM,qBAAqBnC,EAAuBc,2BAA4B,kBAAmB,cACrI,OAAKR,GAGLzK,KAAKyK,cAAgBA,EAEdxL,QAAQoO,SAAQ,IAJZpO,QAAQoO,SAAQ,EAK/B,CAIQ,iBAAMC,GACV,IAAI7F,QAA6BzH,KAAKoK,mBAAmBsC,QAAQvC,EAAuBe,qBAExF,OAAc,OAAVzD,IACAA,QAAczH,KAAKuN,WAEL,OAAV9F,YAKFzH,KAAKoK,mBAAmBuC,QAAQxC,EAAuBe,oBAAqBzD,GAElFzH,KAAKyH,MAAQA,GAEN,EACX,CAEQ,qBAAA+F,GACJ,MAAO,UAAUxN,KAAKuK,YAAYvK,KAAKwK,2BAA2BxK,KAAKyK,eAC3E,CAEO,qBAAMgD,GACT,IAA2C,UAAjCzN,KAAK4M,wBACX,OAAO,KAEX,IAAiC,UAAvB5M,KAAKsN,cACX,OAAO,KAGX,MAAMtB,EAAchM,KAAKwN,wBACnBtB,QAAkClM,KAAK8L,SAAQ,EAAO,MAAOE,EAAKhM,KAAKmL,4BAE7E,GAAiB,OAAbe,EAEA,OADA3O,QAAQmQ,KAAK,mCACN,KAGX,IAAoB,IAAhBxB,EAASyB,GACT,OAAwB,MAApBzB,EAASE,QACTpM,KAAKoK,mBAAmBU,WAAWX,EAAuBe,qBAC1DlL,KAAKyH,MAAQ,KACbzH,KAAKqK,gBAAkB,WAEVrK,KAAKyN,mBACS,MAApBvB,EAASE,aACNpM,KAAK4N,gBAAgB,KAAM,0CAC1B,KAEJ,MAGXrQ,QAAQF,MAAM,+BAA+B2C,KAAKyK,kBAAmByB,GAE9D,MAGX,MAAM2B,QAAwC3B,EAAS4B,OAEvD9N,KAAKsK,wBAA0BuD,EAAgBE,IAE/C,MAAMC,EAAiBC,KAAKJ,EAAgBK,SAE5C,MAA8B,KAA1BF,EAAeG,OACR,KAGJH,CACX,CAEO,qBAAMJ,CAAgBQ,EAAoBC,GAC7C,IAA2C,UAAjCrO,KAAK4M,wBACX,OAAO,EAEX,IAAiC,UAAvB5M,KAAKsN,cACX,OAAO,EAGX,MAAM/B,EAAO,CACT3E,QAASyH,EACTH,QAASI,KAAKF,GACdL,IAAK/N,KAAKsK,yBAGR0B,EAAchM,KAAKwN,wBACnBtB,QAAkClM,KAAK8L,SAAQ,EAAO,MAAOE,EAAKhM,KAAKmL,2BAA4BI,GAEzG,GAAiB,OAAbW,EAEA,OADA3O,QAAQmQ,KAAK,oCACN,EAGX,MAAMG,QAA6B3B,EAAS4B,OAE5C,OAAoB,IAAhB5B,EAASyB,IACTpQ,QAAQF,MAAM,uCAAuC2C,KAAKyK,kBAAmByB,EAAU2B,IAChF,IAGX7N,KAAKsK,wBAA2BuD,EAAgBK,QAA2BH,KAEpE,EACX,CAEO,gBAAAQ,GACH,MAAMhE,EAAW1I,OAAO4K,aAAaC,QAAQvC,EAAuBY,4BAC9DP,EAAiB3I,OAAO4K,aAAaC,QAAQvC,EAAuBa,wBACpEP,EAAgB5I,OAAO4K,aAAaC,QAAQvC,EAAuBc,4BAMzE,MAAO,aAJ6B,MAAZV,EAAmB,SAAW,IAAIA,0BACV,MAAlBC,EAAyB,SAAW,IAAIA,yBACxB,MAAjBC,EAAwB,SAAW,IAAIA,MAGxE,EAKG,MAAM+D,UAA8CrE,EAC7C,QAAAoD,GACN,MAAMkB,EAA2BpC,OAAO,0BACxC,OAAOpN,QAAQoO,QAAQoB,EAC3B,EChRG,MAAMC,EAG2BC,gBAF5BC,cAER,YAAoCD,GAAA,KAAAA,gBAAAA,EAChC3O,KAAK4O,cAAgBC,KAAmBC,OAC5C,CAEO,eAAAC,CAAgBD,GACnB,OAAOA,IAAY9O,KAAKgP,kBAC5B,CAEO,gBAAAA,GACH,OAAOhP,KAAK4O,aAChB,CAEO,cAAMK,CAASC,EAAyBC,EAAoBC,GAC/D,OAA6F,UAAnFpP,KAAK2O,gBAAgBU,cAAcF,EAAYC,EAAeF,KAIxElP,KAAK2O,gBAAgBtO,eAAeiP,SAE7B,EACX,ECJG,MAAMC,EAA4B,SAGnCC,EAAgB,EAAkB,iBAClCC,EAAgB,EAAkB,iBAE3BC,EAA4B,CACrC,IC1BG,MACKtH,WAAqB,IAE7B,WAAW0G,GACP,OAAO,CACX,CAEA,eAAWzM,GACP,MAAO,oCACX,CAEA,aAAMsN,CAAQpN,EAAoB2F,EAAuBH,GACrD,MAAMuB,EAAsB,IAAIpG,YAAY,GAAeX,EAAME,YAE3DmN,EAAoBtH,OAAOuH,gBAAgB,IAAItM,WAAW+F,EAAQ,EAAG,KACrEwG,EAA2BxH,OAAOuH,gBAAgB,IAAItM,WAAW+F,EAAQ,GAAI,KAE7EyG,EAA6B,CAC/B3N,KAAM,UACN4N,GAAIJ,GAQFK,QAA+BpO,OAAOyG,OAAOC,OAAOC,UACtD,YACMP,EAAgBC,EAAU4H,EAAc9P,KAAKoI,WAAYL,GAP1B,CACrC3F,KAAM,UACNlC,OAAQ,IAOR,EACA,CAAC,YAGL4H,EAAmBC,GAEnB,MAAM/I,QAA4B6C,OAAOyG,OAAOC,OAAOoH,QAAQI,EAAcE,EAAa1N,GAM1F,OAJAuF,EAAmBC,GAEnB,IAAIxE,WAAW+F,GAAQrF,IAAI,IAAIV,WAAWvE,GAAS,IAE5CsK,CACX,CAEA,aAAM4G,CAAQ3N,EAAoB2F,EAAuBH,GACrD,MAAM6H,EAAoB,IAAIrM,WAAWhB,EAAO,EAAG,IAC7CuN,EAA2B,IAAIvM,WAAWhB,EAAO,GAAI,IACrD4N,EAAsB,IAAI5M,WAAWhB,EAAO,IAE5CwN,EAA6B,CAC/B3N,KAAM,UACN4N,GAAIJ,GAQFQ,QAAgCnI,EAAgBC,EAAU4H,EAAc9P,KAAKoI,WAAYL,GAE/FD,EAAmBC,GAEnB,MAAMkI,QAA+BpO,OAAOyG,OAAOC,OAAOC,UACtD,MACA4H,EAXqC,CACrChO,KAAM,UACNlC,OAAQ,IAWR,EACA,CAAC,YAGL4H,EAAmBC,GAEnB,MAAM/I,QAA4B6C,OAAOyG,OAAOC,OAAO2H,QAAQH,EAAcE,EAAaE,GAI1F,OAFArI,EAAmBC,GAEZ/I,CACX,GDrDA,IEzBG,MACKoJ,WAAqB,IAE7B,WAAW0G,GACP,OAAO,CACX,CAEA,eAAWzM,GACP,MAAO,oCACX,CAEA,aAAMsN,CAAQpN,EAAoB2F,EAAuBH,GACrD,MAAMuB,EAAsB,IAAIpG,YAAY,GAAeX,EAAME,YAE3DmN,EAAoBtH,OAAOuH,gBAAgB,IAAItM,WAAW+F,EAAQ,EAAG,KACrEwG,EAA2BxH,OAAOuH,gBAAgB,IAAItM,WAAW+F,EAAQ,GAAI,KAE7EyG,EAA6B,CAC/B3N,KAAM,UACN4N,GAAIJ,GAQFK,QAA+BpO,OAAOyG,OAAOC,OAAOC,UACtD,YACMP,EAAgBC,EAAU4H,EAAc9P,KAAKoI,WAAYL,GAP1B,CACrC3F,KAAM,UACNlC,OAAQ,IAOR,EACA,CAAC,YAGL4H,EAAmBC,GAEnB,MAAM/I,QAA4B6C,OAAOyG,OAAOC,OAAOoH,QAAQI,EAAcE,EAAa1N,GAM1F,OAJAuF,EAAmBC,GAEnB,IAAIxE,WAAW+F,GAAQrF,IAAI,IAAIV,WAAWvE,GAAS,IAE5CsK,CACX,CAEA,aAAM4G,CAAQ3N,EAAoB2F,EAAuBH,GACrD,MAAM6H,EAAoB,IAAIrM,WAAWhB,EAAO,EAAG,IAC7CuN,EAA2B,IAAIvM,WAAWhB,EAAO,GAAI,IACrD4N,EAAsB,IAAI5M,WAAWhB,EAAO,IAE5CwN,EAA6B,CAC/B3N,KAAM,UACN4N,GAAIJ,GAQFQ,QAAgCnI,EAAgBC,EAAU4H,EAAc9P,KAAKoI,WAAYL,GAE/FD,EAAmBC,GAEnB,MAAMkI,QAA+BpO,OAAOyG,OAAOC,OAAOC,UACtD,MACA4H,EAXqC,CACrChO,KAAM,UACNlC,OAAQ,IAWR,EACA,CAAC,YAGL4H,EAAmBC,GAEnB,MAAM/I,QAA4B6C,OAAOyG,OAAOC,OAAO2H,QAAQH,EAAcE,EAAaE,GAI1F,OAFArI,EAAmBC,GAEZ/I,CACX,IFpDEqR,EAAwB,EAAkB,yBAE1CC,EAAgB,EAAkB,iBAClCC,EAAkB,EAAkB,mBACpCC,EAAkB,EAAkB,mBAEpCC,GAAmB,EAAkB,oBACrCC,GAAoB,EAAkB,qBACtCC,GAAa,EAAkB,cAC/BC,GAAa,EAAkB,cAE/BC,GAAwB,EAAkB,yBAC1CC,GAAsB,EAAkB,uBACxCC,GAAuB,EAAkB,wBAEzCC,GAAwB,EAAkB,yBAC1CC,GAAsB,EAAkB,uBACxCC,GAAuB,EAAkB,wBAE/C,IAAIC,GAYG,SAAStC,KACZ,GAAuB,IAAnBa,EAAQxP,OACR,MAAM,IAAIrD,MAAM,0BAGpB,IAAIuU,EAA6B1B,EAAQ,GAEzC,IAAK,MAAM2B,KAAU3B,EACb2B,EAAOvC,QAAUsC,EAAWtC,UAC5BsC,EAAaC,GAIrB,OAAOD,CACX,CAYA,SAASE,GAAsClP,GAC3C,IAAK,IAAIhC,EAAI,EAAGA,EAAIuD,EAAmBzD,OAAQE,IAC3C,GAAIuD,EAAmBvD,GAAGgC,OAASA,EAC/B,OAAOhC,EAIf,OAAQ,CACZ,CAEA,SAASmR,KACLhB,EAAgBhR,MAAMC,eAAe,mBACzC,CAUA,SAASgS,KACLjB,EAAgBhR,MAAME,YAAY,mBAAoB,EAC1D,CAUA,SAASgS,KACLF,KApBAf,EAAgBjR,MAAMC,eAAe,oBAIrCkR,GAAkBnR,MAAMC,eAAe,mBAmB3C,CAEA,SAASkS,KACLP,QAAyB7S,CAC7B,CAMA,SAASqT,KACLd,GAAsBe,UAAYrB,EAAgB3S,MAAMsC,OAAO8B,UACnE,CAEA,SAAS6P,KACLb,GAAsBY,UAAYpB,EAAgB5S,MAAMsC,OAAO8B,UACnE,CAEA,SAAS8P,GAAqBlU,EAAemU,GACzC,MAAMC,EAAqBpU,EAAMsC,OAAS,GAAKsQ,EAAgB5S,QAAUA,EAEzE4S,EAAgB5S,MAAQA,EACxBiU,KAEIG,GAAsBD,EAjB1BZ,IAAyB,IAAIc,MAAOC,cAoBhCR,KAOJS,IAHJ,CAMA,SAASA,KACL,MAAMC,EAAgB1B,GAAkB2B,cAElCC,EAAuBF,GAAiB,GAAKA,EAAgBzO,EAAmBzD,OAExD,KAA1BsQ,EAAgB5S,OAAwC,KAAxB0S,EAAc1S,QAAyC,IAAzB0U,EAclE,GATyB,CACrBC,SAAUpB,GACVrC,QAASY,EAAQe,GAAiB4B,eAAevD,QACjD9G,SAAUrE,EAAmByO,GAAehQ,KAC5CxE,MAAO4S,EAAgB5S,OAGd,WAAW0S,EAAc1S,SAXlC,IAcR,CAEOd,eAAe0V,GAAc5U,EAAeyT,EAAwBrJ,EAAqBD,GAC5F,MAAM9G,EAAsBE,IAE5B,GAA2B,IAAvBF,EAAYf,OAEZ,OADA3C,QAAQmQ,KAAK,yBACN,KAGX,MAAMnL,EAAqB,EAA0B3E,GAC/CsK,EAAwB,EAA0BjH,GAElDwR,QAA+BpB,EAAO1B,QAAQpN,EAAO2F,EAAUH,GAIrE,OAFAD,EAAmBC,GAEZC,EAAS1F,OAAOmQ,EAC3B,CAEO3V,eAAe4V,GAAwB9U,EAAeyT,EAAwBrJ,EAAqBD,GACtG,MAAM9G,EAAsBE,IAE5B,GAA2B,IAAvBF,EAAYf,OAEZ,OADA3C,QAAQmQ,KAAK,yBACN,KAGX,IACI,MAAMnL,EAAqByF,EAAS/E,OAAOrF,GACrCsK,EAAwB,EAA0BjH,GAElD0R,QAA+BtB,EAAOnB,QAAQ3N,EAAO2F,EAAUH,GAIrE,OAFAD,EAAmBC,GR3NG6K,EQ6NUD,GR5NpB,IAAIE,aACL5P,OAAO2P,E,CQ4NpB,MAAOvV,GACL,MAAMC,EAAaD,EAKnB,OPpKD,SAA0BA,GAC7B,GAAIoJ,EAAmBU,WAAW9J,GAC9B,MAAMA,CAEd,CO6JQyV,CAAiBxV,GAEjBC,QAAQmQ,KAAK,qBAAoBpQ,EAAWsJ,QAAU,YAAYtJ,EAAWsJ,UAAY,uBAClF,I,CRpOR,IAAuBgM,CQsO9B,CAYA9V,eAAeiW,KAKX,GAJAxC,EAAgB1S,QAChBiU,GAAqB,IAAI,GACzBL,KAEqC,IAAjClB,EAAgB3S,MAAMsC,OAEtB,OADAsR,MACO,EAGX,MAAMxJ,EAAsBrE,EAAmB+M,GAAkB2B,eAE3DW,QAAuCR,GACzCjC,EAAgB3S,MAChB8R,EAAQe,GAAiB4B,eACzBrK,EACAT,EAAkBK,MAGtB,OAAwB,OAApBoL,IAIJlB,GAAqBkB,GAAiB,GACtCb,MAEO,EACX,CAEArV,eAAemW,KAKX,GAJA1C,EAAgB1S,QAChBiU,GAAqB,IAAI,GACzBL,KAEqC,IAAjClB,EAAgB3S,MAAMsC,OAEtB,OADAsR,MACO,EAGX,GAAId,GAAkB2B,cAAgB,GAAK3B,GAAkB2B,eAAiB1O,EAAmBzD,OAE7F,OAlKJwQ,GAAkBnR,MAAME,YAAY,mBAAoB,IAkK7C,EAGX,MAAMuI,EAAsBrE,EAAmB+M,GAAkB2B,eAE3Da,QAAuCR,GACzCnC,EAAgB3S,MAChB8R,EAAQe,GAAiB4B,eACzBrK,EACAT,EAAkBK,MAGtB,OAAwB,OAApBsL,GAlLJ1C,EAAgBjR,MAAME,YAAY,mBAAoB,IAoL3C,IAGXqS,GAAqBoB,GAAiB,IAE/B,EACX,CAuBO,MAAMC,GACO/Q,KAAe,SAExB,YAAA/B,GACH,OAAOmP,CACX,CAEO,aAAAjP,GACH,OAAOkP,CACX,CAEO,aAAAjP,GACH,KACA2R,KACA7B,EAAczS,OAClB,CAEQ,4BAAOuV,CAAsBC,EAAkBlE,GACnD,MACMmE,EAAS,YAAYnE,IAE3B,OAAoC,IAAhCkE,EAASE,WAHE,aAOmB,IAA9BF,EAASG,SAASF,GAHX,KAOJD,EAAS7M,UAAUiN,EAAeJ,EAASnT,OAASoT,EAAOpT,OACtE,CAEO,mBAAMmP,CAAcF,EAAoBC,EAA4BF,GACvEoB,EAAc1S,MAAQ,GACtB2S,EAAgB3S,MAAQ,GACxB+T,KACAnB,EAAgB5S,MAAQ,GACxBiU,KACApB,GAAiB4B,cAAgB5B,GAAiBiD,QAAQxT,OAAS,EACnEwQ,GAAkB2B,cAAgBf,GAAsC/B,GACxE,GAAiC,IACjC,GAAuC,IAEvC,MAAMoE,EAAuBvE,EAAcpH,UA1Vf,SA4VtBA,ET5LP,SAA4B5F,GAC/B,IAAK,MAAM4F,KAAYrE,EACnB,GAAIqE,EAAS5F,OAASA,EAClB,OAAO4F,EAIf,OAAO,IACX,CSoL2C4L,CAAmBD,GAEtD,GAAiB,OAAb3L,EACA,MAAM,IAAInL,MAAM,4BAA4B8W,OAGhD,MAAMhB,QAjJP7V,eAAwCc,EAAekR,EAAiB9G,EAAqBD,GAChG,MAAMsJ,EAnLH,SAA6BvC,GAChC,IAAK,MAAMuC,KAAU3B,EACjB,GAAI2B,EAAOvC,UAAYA,EACnB,OAAOuC,EAIf,OAAO,IACX,CA2KmBwC,CAAoB/E,GAEnC,GAAe,OAAXuC,EACA,MAAM,IAAIxU,MAAM,sCAAsCiS,MAG1D,OAAO4D,GAAwB9U,EAAOyT,EAAQrJ,EAAUD,EAC5D,CAyI+C+L,CACnC1E,EAAcxR,MACdwR,EAAcN,QACd9G,EACAT,EAAkBK,MAGtB,GAAkB,OAAd+K,EAEA,OADAoB,MAAM,6BAA6B5E,QAC5B,EAGX,MAAM6E,EAA6Bb,GAAgBC,sBAAsBlE,EAAiBC,GAE1F,OAAoB,OAAhB6E,GACAzW,QAAQF,MAAM,mDAAmD6R,OACjE6E,MAAM,oDACC,IAGP3E,EAAc6E,YACd,GAAuCxI,KAAKC,UAAU0D,EAAc6E,WAAY,KAAM,WAGnF7E,EAAc6E,WAErB3D,EAAc1S,MAAQuR,EAEtBoB,EAAgB3S,MAAQ+U,EACxBhB,KAEAlB,GAAiB4B,cAxUzB,SAAiDvD,GAC7C,IAAK,IAAI1O,EAAI,EAAGA,EAAIsP,EAAQxP,OAAQE,IAChC,GAAIsP,EAAQtP,GAAG0O,UAAYA,EACvB,OAAO1O,EAIf,OAAQ,CACZ,CAgUyC8T,CAAwC9E,EAAcN,SACvF4B,GAAkB2B,cAAgBf,GAAsCqC,GAExE,GAAiCK,GACjC,GAAqC5E,EAAe,WAAWD,MAExD,EACX,CAEO,YAAAgF,GACH,MAAO,GAAGnU,KAAKoC,KAAKgS,kBAAkB9D,EAAc1S,QACxD,CAEO,IAAAyW,GACH,MACMpX,EADmB,EAA0B,aAClBqX,gCAEjC,EAAmB/D,EAAiBO,GAAqB7T,GACzD,EAAmBuT,EAAiBS,GAAqBhU,GAEzD,EAAuB0T,GAAYoC,GAAsB9V,GACzD,EAAuB2T,GAAYqC,GAAsBhW,GAEzDqT,EAAcnR,iBAAiB,SAAS,KACpCgT,IAAwB,IAG5B5B,EAAgBpR,iBAAiB,SAAS,KACtCwS,KACIpB,EAAgB3S,MAAMsC,OAAS,GAC/BqR,I,IAIRf,EAAgBrR,iBAAiB,SAAS,KACtC0S,IAA0B,IAG9BpB,GAAiBtR,iBAAiB,SAAS,KACvCgT,IAAwB,IAG5B9B,EAAsBlR,iBAAiB,SAAS,KAC5CmR,EAAc1S,MAAQ,GACtB2S,EAAgB3S,MAAQ,GACxB+T,KACAnB,EAAgB5S,MAAQ,GACxBiU,KACApB,GAAiB4B,cAAgB5B,GAAiBiD,QAAQxT,OAAS,EACnEwQ,GAAkB2B,cAAgBf,GAAsC/B,GACxE,KACAmC,KACAD,KAEA,IAAgC,IAGpCV,GAAqB5R,iBAAiB,SAAS,KAC3C,EAAaoR,GAAiB,EAAK,IAGvCW,GAAqB/R,iBAAiB,SAAS,KAC3C2S,GAAqB,IAAI,EAAM,IArK3C,WACI,IAAK,MAAMT,KAAU3B,EAAS,CAC1B,MAAM6E,EAAS3X,SAAS4X,cAAc,UACtCD,EAAOvX,KAAO,IAAIqU,EAAOvC,UACzB2B,GAAiBgE,YAAYF,E,CAGjC9D,GAAiB4B,cAAgB5B,GAAiBiD,QAAQxT,OAAS,CACvE,CAgKQwU,GA9JR,WACI,IAAK,MAAM1M,KAAYrE,EAAoB,CACvC,MAAM4Q,EAAS3X,SAAS4X,cAAc,UACtCD,EAAOvX,KAAOgL,EAAS5F,KACvBmS,EAAOjT,MAAQ0G,EAAS3F,YACxBqO,GAAkB+D,YAAYF,E,CAGlC7D,GAAkB2B,cAAgBf,GAAsC/B,EAC5E,CAsJQoF,GAEA,EAA+B,SAAU,IAAIjG,EAAc1O,MAC/D,EGzdJ,MAAM,GAAsB,IAAImC,EAWzB,MAAMyS,GACT,UAAI1U,GACA,OAAO2B,OAAO4K,aAAavM,MAC/B,CAEA,KAAA2K,GACIhJ,OAAO4K,aAAa5B,OACxB,CAEA,GAAAjC,CAAI3I,GACA,OAAO4B,OAAO4K,aAAa7D,IAAI3I,EACnC,CAEA,UAAA6K,CAAWlC,GACP/G,OAAO4K,aAAa3B,WAAWlC,EACnC,CAEA,aAAM8D,CAAQ9D,GACV,MAAMiM,EAA+BhT,OAAO4K,aAAaC,QAAQ9D,GAEjE,GAAsB,OAAlBiM,EACA,OAAO,KAGX,MAAMC,EAAgB,EAAwBC,KAAIC,GAAKA,IAAGxL,MAAK,CAACC,EAAGC,IAAMA,EAAEoF,QAAUrF,EAAEqF,UAEvF,IAAK,MAAMuC,KAAUyD,EAAe,CAChC,MAAM9V,QAA8B,GAAwC6V,EAAexD,EAAQ,GAAU9J,EAAkBK,MAC/H,GAAe,OAAX5I,EACA,OAAOA,C,CAIf,OAAO,IACX,CAEA,aAAM2N,CAAQ/D,EAAahL,GACvB,MAAM6U,QAAiC,GACnC7U,EACA,KACA,GACA2J,EAAkBK,MAGJ,OAAd6K,EAKJ5Q,OAAO4K,aAAaE,QAAQ/D,EAAK6J,GAJ7BlV,QAAQF,MAAM,4CAKtB,ECrDJ,MAAM4X,GAAgC,EAAkB,oBAElDC,GAA4B,EAAkB,WAC9CC,GAA+B,EAAkB,mBAEjDC,GAAkC,EAAkB,iBACpDC,GAAoC,EAAkB,kBACtDC,GAAkC,EAAkB,iBAE1D,IAwMIC,GACAC,GAzMAC,GAA8B,IAAIjH,EAAsC,IAAIoG,IAUhF,SAASc,GAAkBC,EAAcC,OAAoCtX,GACzE,MAAMuX,EAAyBF,EAAKrS,QAAQ,KAEtCwS,EAAoB,CAAC,EAErBC,EAAoBF,GAAkB,EAAIF,EAAKnP,UAAU,EAAGqP,GAAkBF,EAC9EK,EAAoCH,GAAkB,EAAIF,EAAKnP,UAAUqP,EAAiB,QAAKvX,EAErG,QAAkBA,IAAdsX,EAAyB,CACzB,MAAMK,EAAoB,CAAC,EAC3BA,EAAKF,GAAaD,EAClBF,EAAY,CACRM,KAAMD,EACNE,WAAYF,EACZH,O,MAGJF,EAAUE,KAAKC,GAAaD,EAC5BF,EAAUO,WAAaP,EAAUE,KACjCF,EAAUE,KAAOA,EAGrB,OAAIE,EACON,GAAkBM,EAAeJ,GAGrCA,CACX,CA8BA,SAASQ,MAbT,WACI,MAEMC,EAF6B,EAA0B,SAElCC,0BAA0BpB,GAAQtX,OAE7D,GAAIyY,EAAQ,EAAG,CACX,MAAME,EArBd,SAA4BZ,EAAcU,GACtC,IAAIG,EAAW,EAEf,IAAK,IAAIpW,EAAI,EAAGA,EAAIiW,EAAOjW,GAAK,EAAG,CAE/B,GADAoW,EAAWb,EAAKrS,QAAQ,IAAKkT,GACzBA,EAAW,EAAG,CACdA,EAAWb,EAAKzV,OAAS,EACzB,K,CAEJsW,GAAY,C,CAGhB,OAAOb,EAAKnP,UAAU,EAAGgQ,EAAW,EACxC,CAQ6BC,CAAmBvB,GAAQtX,MAAOyY,GACvDlB,GAAgBvD,UAAY2E,C,MAE5BpB,GAAgBvD,UAAY,EAEpC,CAGI8E,GACAC,IACJ,CAEA,SAASC,KACLD,IACJ,CAEA,SAASE,GAAwBC,GACzBA,EACAxB,GAAc/V,MAAMC,eAAe,cAIvC8V,GAAc/V,MAAME,YAAY,aAAc,EAClD,CAkBA,SAASkX,KACL,QAAuBrY,IAAnBiX,SAAmDjX,IAAnBkX,GAChC,OAGJ,MAAMI,EAAwBF,GAAkB,GAAGR,GAAQtX,SAAS4X,MAC9DuB,EAAoBnB,EAAUE,KAEpC,IAAK,MAAOlN,EAAKhL,KAAUmJ,OAAOwC,QAAQgM,IACtCwB,EAAKnO,GAAOhL,EAGhB,MAAMqW,EA5BV,WACI,GAA4B,KAAxBqB,GAAc1X,MACd,OAAO,KAGX,IACI,MAAMoZ,EAAWvL,KAAKwL,MAAM3B,GAAc1X,OAC1C,OAAY,OAARoZ,GAAyC,WAAzBA,EAAIrQ,YAAYvE,KACzB,KAEJ4U,C,CACT,MACE,OAAO,I,CAEf,CAc2CE,GAEvCL,GAAgD,KAAxBvB,GAAc1X,OAA+B,OAAfqW,GAEnC,OAAfA,IACA8C,EAAK9C,WAAaA,GAGW,IAA7BlN,OAAOoQ,KAAKJ,GAAM7W,SAElB0V,EAAUO,WAAWpP,OAAOoQ,KAAKvB,EAAUO,YAAY,IAAM,MAGjEf,GAAcxX,MAAQ6N,KAAKC,UAAUtC,EAAewM,EAAUM,WAAO5X,EAAW,EACpF,CAEA,SAAS8Y,GAAUzP,EAAqB0P,GACpC,IAAK,MAAMC,KAAavQ,OAAOoQ,KAAKxP,GAAS,CACzC,MAAM4P,EAAmBF,EAAOC,GAC1BE,EAAmB7P,EAAO2P,GAE5BC,SAEiC,WAAjCA,EAAY5Q,YAAYvE,MACS,WAAjCoV,EAAY7Q,YAAYvE,KAK5BgV,GAAUI,EAAaD,GAJnBF,EAAOC,GAAaE,C,CAMhC,CA2BA1a,eAAe2a,KACX,MAAMC,QAAwCjC,GAAahI,kBAE3D,GAAyB,OAArBiK,EACA,OAAO,EAGX,MAAMC,EAAUlM,KAAKwL,MAAM7B,GAAcxX,OACzC,IAAIga,EAAenM,KAAKwL,MAAMS,GAI9BN,GAAUO,EAASC,GAEnB,MAAMhR,EAvCV,WACI,MAAMiR,EAAsCC,GAAgCC,qBAE5E,GAAwB,OAApBF,EACA,MAAM,IAAIhb,MAAM,yCAGpB,IAAImb,EAAeH,EAAgB1D,eAEnC,MAAMoC,EAAuBpB,GAAgBvD,UACvCyB,EAAmB6B,GAAQtX,MAEjC,OAAK2Y,EAIDA,IAAiBlD,EACV,WAAW2E,UAAa3E,KAK5B,WAAW2E,UAAazB,cTzK5B,SAAc3Y,KAAkBqa,GACnC,MAAM5Z,EArBV,SAA8BT,EAAeqa,GACzC,IAAK,IAAI7X,EAAI,EAAGA,EAAIxC,EAAMsC,OAAQE,GAAK,EACnC,IAAiC,IAA7B6X,EAAM9U,SAASvF,EAAMwC,IACrB,OAAOA,EAIf,OAAOxC,EAAMsC,MACjB,CAa0BgY,CAAqBta,EAAOqa,GAC5CzZ,EAZV,SAA4BZ,EAAeqa,GACvC,IAAK,IAAI7X,EAAIxC,EAAMsC,OAAS,EAAGE,GAAK,EAAGA,GAAK,EACxC,IAAiC,IAA7B6X,EAAM9U,SAASvF,EAAMwC,IACrB,OAAOA,EAAI,EAInB,OAAOxC,EAAMsC,MACjB,CAIwBiY,CAAmBva,EAAOqa,GAE9C,OAAOra,EAAM4I,UAAUnI,EAAOG,EAClC,CSkKkC,CAAiB6U,EAAS7M,UAAU+P,EAAarW,QAAS,QAP7E,SAAS8X,UAAa3E,IAUrC,CAgB4B+E,GAElBC,EAA8B5M,KAAKC,UAAUtC,EAAewO,QAAetZ,EAAW,GAAK,KAIjG,aAFMmX,GAAa7H,gBAAgByK,EAAqB,mBAAmBzR,MAEpE,CACX,CAEO,SAAS0R,KACZ/C,QAAiBjX,EACjBkX,QAAiBlX,EACjB,EAAa8W,GACjB,CAKO,SAAS/F,GAAcD,EAA4BmJ,GACtDhD,GAAiBnG,EACjBoG,GAAiB+C,EACjB5B,IACJ,CAEO,SAAS6B,GAAU7C,GACtBT,GAAQtX,MAAQ+X,EAChBS,IACJ,CAEO,SAASqC,GAAgBxE,GAC5BqB,GAAc1X,MAAQqW,CAC1B,CAEO,SAASyE,KACZzD,GAAiB1V,MAAME,YAAY,UAAW,UAClD,CAEO,SAASkZ,KACZ1D,GAAiB1V,MAAME,YAAY,UAAW,OAClD,CAEO,SAASmZ,KACZ1D,GAAQtX,MAAQ,GAChBwX,GAAcxX,MAAQ,GACtB0X,GAAc1X,MAAQ,GACtB2X,QAAiBjX,EACjBkX,QAAiBlX,EACjBuY,IAAwB,EAC5B,CAEO,SAASgC,KACZ1D,GAAgBvD,UAAY,EAChC,CC1PO,MAAMkH,GACoBC,kBAA7B,WAAApS,CAA6BoS,GAAA,KAAAA,kBAAAA,CAC7B,CAEA,eAAAhK,CAAgBD,GACZ,OAAOA,IAAY9O,KAAKgP,kBAC5B,CAEA,gBAAAA,GACI,OAAOgK,EACX,CAEA,wCAAMC,CAAmCC,EAAoB1W,EAAmBtC,EAAiB4O,GAC7FtM,OAAwBlE,IAAbkE,EAAyBA,EAAW2W,GAC/CjZ,OAAoB5B,IAAX4B,EAAuBA,EAASkZ,GACzCtK,OAAsBxQ,IAAZwQ,EAAwBA,EAAUkK,GAE5C,MAAMK,QAAiCC,GAAuBJ,EAAY1W,EAAUsM,EAASvH,EAAkBK,MAE/G,GAAkB,OAAdyR,EACA,OAAO,EAGX,MAAMnR,EAAW,EAAqBmR,EAAW/T,KAAKiU,IAAI,EAAGrZ,IAGvDjD,EADmB,EAA0B,aAClBqX,gCAEjC,aAAa,EAAoBpM,EAAUjL,EAC/C,CAEO,cAAMgS,CAASC,EAAyBE,GAC3C,OAA6E,IAAzEpP,KAAK+Y,kBAAkB1J,cAAcD,EAAeF,WAIlDsK,KAENxZ,KAAK+Y,kBAAkB1Y,eAAeiP,SAE/B,EACX,EC7BJ,MAAMmK,GAAkB,EAAkB,mBACpCC,GAAkB,EAAkB,mBAEpCC,GAAkD,CACpD,ICpBG,MACKC,YACAC,aAER,YAAmBD,GACf5Z,KAAK4Z,YAAc7Q,EAAc6Q,GACjC5Z,KAAK6Z,aAAe,mCAAmCD,IAC3D,CAEA,WAAW9K,GACP,OAAO,CACX,CAEA,eAAWzM,GACP,OAAOrC,KAAK6Z,YAChB,CAEO,sBAAMC,CAAiB7Y,EAA0BiY,EAAyBnR,GAC7E,MAAMqI,QAAgCnI,EAAgBhH,EAAaiY,EAAY,IAASnR,GAExFD,EAAmBC,GAEnB,MAKMgS,QAA2BlY,OAAOyG,OAAOC,OAAOC,UAClD,MACA4H,EAPqC,CACrChO,KAAM,OACNsG,KAAM,CAAEtG,KAAM,aAOd,EACA,CAAC,SAGL0F,EAAmBC,GAEnB,MAAM/I,QAA4B6C,OAAOyG,OAAOC,OAAOyR,KAAK,OAAQD,EAAS/Z,KAAK4Z,aAIlF,OAFA9R,EAAmBC,GAEZ/I,CACX,GDtBwB,YACxB,IErBG,MACK4a,YACAC,aAER,YAAmBD,GACf5Z,KAAK4Z,YAAc7Q,EAAc6Q,GACjC5Z,KAAK6Z,aAAe,mCAAmCD,IAC3D,CAEA,WAAW9K,GACP,OAAO,CACX,CAEA,eAAWzM,GACP,OAAOrC,KAAK6Z,YAChB,CAEO,sBAAMC,CAAiB7Y,EAA0BiY,EAAyBnR,GAC7E,MAAMqI,QAAgCnI,EAAgBhH,EAAaiY,EAAY,IAASnR,GAExFD,EAAmBC,GAEnB,MAKMgS,QAA2BlY,OAAOyG,OAAOC,OAAOC,UAClD,MACA4H,EAPqC,CACrChO,KAAM,OACNsG,KAAM,CAAEtG,KAAM,aAOd,EACA,CAAC,SAGL0F,EAAmBC,GAEnB,MAAM/I,QAA4B6C,OAAOyG,OAAOC,OAAOyR,KAAK,OAAQD,EAAS/Z,KAAK4Z,aAIlF,OAFA9R,EAAmBC,GAEZ/I,CACX,GFrBwB,aAGfga,GAAqC,EAE5CiB,GAA0B,EAAkB,2BAE5CC,GAAgB,EAAkB,iBAClCC,GAAoB,EAAkB,qBACtCC,GAAwB,EAAkB,yBAC1CC,GAAqB,EAAkB,sBACvCC,GAAoB,EAAkB,qBACtCC,GAAsC,EAAkB,uCAExDC,GAAoB,EAAkB,qBACtCC,GAAqB,EAAkB,sBACvCC,GAAmB,EAAkB,oBAErCC,GAAc,EAAkB,eAChCC,GAAc,EAAkB,eAChCC,GAAkB,EAAkB,mBACpCC,GAA6B,EAAkB,8BAC/CC,GAAmB,EAAkB,oBAErCC,GAAqB,EAAkB,sBACvCC,GAAqB,EAAkB,sBAEvCC,GAAoB,EAAkB,qBACtCC,GAA0B,EAAkB,2BAC5CC,GAAwB,EAAkB,yBAC1CC,GAAwB,EAAkB,yBAC1CC,GAAwB,EAAkB,yBAEnClC,GAAyB,GACzBD,GAA2B,iGAExC,IAAIoC,GACAC,GAgCJ,SAASC,KACL,QAAIvB,GAActc,MAAMsC,OAAS,GACgE,MAAzFmM,OAAO,uEAA0E,MAKzF,EAAa6N,IAAe,GAE5BwB,KAEAC,KACAC,KAEO,GACX,CAEA,SAASC,KACL,GAAI3B,GAActc,MAAMsC,OAAS,GACqE,MAA9FmM,OAAO,4EAA+E,IACtF,OAAO,EAIf,MAAMyP,EZrDH,SAA8BC,EAAoB,IACrD,MAAMnJ,EANH,SAA6BmJ,EAAoB,IACpD,MAAMnJ,EAAoB,IAAIrP,WAAWwY,GACzC,OAAOzT,OAAOuH,gBAAgB+C,GAAOnP,MACzC,CAG+BuY,CAAoBD,GAC/C,OAAO/T,EAAS1F,OAAOsQ,EAC3B,CYkDiC,GAQ7B,OAPAsH,GAActc,MAAQke,EACtBJ,KAEAC,KAEAnC,MAEO,CACX,CAEA,SAASmC,KAEDJ,GADArB,GAActc,MAAMsC,OAAS,GACE,IAAI+R,MAAOC,mBAEX5T,CAEvC,CAEA,SAAS2d,KACLd,GAAwB9Z,UAAY6Z,GAAkBtd,MAAMsC,OAAO8B,UACvE,CAEA,SAASka,GAAgB1Z,GACrB,MAAM2Z,EAA2B3Z,EAAS4K,MAAM,IAChD+O,EAAe3S,OAEf,IAAK,IAAIpJ,EAAY,EAAGA,EAAI+b,EAAejc,OAAQE,GAAK,EACpD,GAAI+b,EAAe/b,EAAI,KAAO+b,EAAe/b,GACzC,OAAO,EAIf,OAAO,CACX,CAEA,SAASwb,KACL,IAAiB,IAAbQ,KAEA,YADA,KAIJ,MAAMC,EAAoB1C,GAAmBsB,GAAmB5I,eAEhE,IAAKgK,EACD,MAAM,IAAIxf,MAAM,gDAWpB,GARuC,CACnCyf,OAAQpC,GAActc,MACtB2U,SAAUgJ,GACVzM,QAASuN,EAAkBvN,QAC3B5O,OAAQgb,GAAkBtd,MAAMsC,OAChCsC,SAAUoY,GAAYhd,OAG8B,WAC5D,CAEA,SAAS2e,KACL7B,GAAiB9c,MAAQ6c,GAAmB7c,KAChD,CAEA,SAAS4e,KACL,MAAMC,EAAcC,SAASjC,GAAmBgC,IAAK,IAC/CE,EAAcD,SAAShC,GAAiB9c,MAAO,IAC/C2b,EAAcmD,SAASjC,GAAmBlB,IAAK,IAErD,OAAmB,IAAfqD,MAAMD,KACNlC,GAAmB7c,MAAQ0H,KAAKiU,IAAIkD,EAAKnX,KAAKmX,IAAIE,EAAKpD,IAAMvX,YACtD,EAIf,CAEAlF,eAAe+f,KACXN,WACM/C,IACV,CAEA1c,eAAeggB,KACPN,MACAD,WAEE/C,IACV,CAEA,SAASkC,KACLvB,GAAkB9Y,UAAY6Y,GAActc,MAAMsC,OAAO8B,UAC7D,CAEA,SAAS+a,KACLlC,GAAgBxZ,UAAYuZ,GAAYhd,MAAMsC,OAAO8B,UACzD,CAEA,SAASgb,GAA8Bd,GAC/BA,EACAtB,GAAYrb,MAAMC,eAAe,cAEjCob,GAAYrb,MAAME,YAAY,aAAc,EAEpD,CAEA3C,eAAemgB,KACX,MAAMC,EAAiChB,GAAgBtB,GAAYhd,OAEnEof,GAA8BE,IAEA,IAA1BA,IAIJH,WACMvD,KACV,CAEA1c,eAAeqgB,KACX,OAAwB,IAApBC,aAIE5D,MAEC,EACX,CAEA1c,eAAeugB,KACe1D,GAAmBsB,GAAmB5I,sBAM1DmH,IACV,CAEA,SAAS,KACL,EAAa0B,IACb,KACAe,IACJ,CAEA,SAASG,GAAOlD,GACZ,MAAM1W,EAAmBoY,GAAYhd,MAErC,OAAkC,IAA9Bse,GAAgB1Z,KAIpB0W,EAAaA,GAAcgB,GAActc,QAErC,IAAsCsC,QAAU,GAAKgZ,EAAWhZ,OAAS,GAAKsC,EAAStC,OAAS,GAKxG,CAEOpD,eAAewc,GAAuBJ,EAAoB1W,EAAkBsM,EAAiB/G,GAChG,IAA2B,IAAvBqU,GAAOlD,GACP,OAAO,KAGX,MAAMmD,EA1NV,SAAwCvN,GACpC,IAAK,MAAMuN,KAAqB1C,GAC5B,GAAI0C,GAAmBvN,UAAYA,EAC/B,OAAOuN,EAIf,MAAM,IAAIxf,MAAM,6CAA6CiS,IACjE,CAkN8BwO,CAA+BxO,GAGnDyO,EAAmC,EADP,KAE5BC,EAA+B,EAA0BtE,GAG/D,OdvMG,SAA4B9V,EAAoBZ,GACnD,MAAMoB,EAAyBC,OAAOrB,EAAStC,QAE/C,IAAIlB,EAAiB,GACjB8E,EAjER,SAAkDC,GAC9C,MAAM7D,EAAiB6D,EAAYtB,WAC7BC,EAAsB,IAAIC,SAASoB,EAAa,GAEtD,IAAI/E,EAAiB,GACjBmF,EAAqB,GAEzB,IAAK,IAAI/D,EAAY,EAAGA,EAAIF,EAAQE,GAAK,EACrCpB,GAAU6E,OAAOnB,EAAUK,SAAS3C,IAAM+D,EAC1CA,GAAc,KAGlB,OAAOnF,CACX,CAoDyBye,CAAyCra,GAE9D,KAAOU,EAAS,IAAI,CAChB,MAAMO,EAAoBP,EAASF,EACnCE,GAAUF,EAIV5E,GAAUwD,EAFyBqB,OAAOS,QAAQ,EAAGD,G,CAKzD,OAAOrF,CACX,CcuLW,OAF6Bqd,EAAkBvC,iBAAiByD,EAAqBC,EAAiBzV,GAE9DvF,EACnD,CAEA,MAAMkb,GAAuC,Ib1NtC,MACKC,mBAAqD,KACrDC,YAAkD,KAClDC,cAAwB,EAGhC,aAAWC,GACP,OAA4B,OAArB9d,KAAK4d,WAChB,CAIQ,oBAAMG,CAAeC,GACrBhe,KAAK6d,gBAAkBrZ,OAAOyZ,iBAC9Bje,KAAK6d,cAAgB,EAErB7d,KAAK6d,cAAgB7d,KAAK6d,cAAgB,EAG9C,MAAMK,EAA6Ble,KAAK6d,cAGxC,GAAyB,OAArB7d,KAAK4d,YACL,OAAO,EAGX,GAAgC,OAA5B5d,KAAK2d,qBACL3d,KAAK2d,mBAAmBjW,SAGC,OAArB1H,KAAK4d,aACL,UACU5d,KAAK4d,W,CACb,MAAOvgB,GACL,IAAIoJ,EAAmBU,WAAW9J,GAK9B,MAAMA,EAJN,GAAI2gB,EACA,MAAM3gB,C,CAS1B,OAAO6gB,IAAuBle,KAAK6d,aACvC,CAKO,YAAMnW,CAAOsW,GAAkC,SAC5Che,KAAK+d,eAAeC,EAC9B,CAOO,sBAAMG,CAAiBC,EAAkCJ,GAAkC,GAC9F,IAA0D,UAAhDhe,KAAK+d,eAAeC,GAAmC,CAC7D,IAA+B,IAA3BA,EACA,OAEJ,MAAM,IAAIvX,C,CAGd,IAAI4X,EAAa,IAAIjX,EACrBpH,KAAK2d,mBAAqBU,EAE1B,IAEI,OADAre,KAAK4d,YAAcQ,EAAYpe,KAAK2d,mBAAmBlW,aAC1CzH,KAAK4d,W,CACpB,MAAOvgB,GACL,GAAIoJ,EAAmBU,WAAW9J,KAA8C,IAA3B2gB,EACjD,OAEJ,MAAM3gB,C,SAEN2C,KAAK4d,YAAc,I,CAE3B,Ga0IG9gB,eAAe0c,KAClB,IAAiB,IAAb4C,KAAJ,CAKA,EAAYd,IAAuB,GAEnC,UACUoC,GAAmBS,iBAAiBG,G,SAE1C,EAAYhD,IAAuB,E,OATnC,IAWR,CAEAxe,eAAewhB,GAAQvW,GACnB,MAAMsU,EA5OV,WACI,MAAMA,EAAoB1C,GAAmBsB,GAAmB5I,eAEhE,IAAKgK,EACD,MAAM,IAAIxf,MAAM,wDAAwDoe,GAAmB5I,iBAG/F,OAAOgK,CACX,CAoO8BkC,GAEpBlF,QAAiCC,GAAuBY,GAActc,MAAOgd,GAAYhd,MAAOye,EAAkBvN,QAAS/G,GAC/G,OAAdsR,IAIJ6B,GAAkBtd,MAAQ,EAAqByb,EAAW/T,KAAKiU,IAAI,EAAGmD,SAASjC,GAAmB7c,MAAO,MAEzGqe,KACAL,KAEAJ,KACJ,CAEA,SAAS4B,KACLxC,GAAYhd,MAAQub,GACpB4D,KAEA,MAAMG,EAAiChB,GAAgBtB,GAAYhd,OAInE,OAFAof,GAA8BE,GAEvBA,CACX,CAEApgB,eAAe0hB,KACX9C,KACAC,WACMnC,IACV,CAcA,SAASiF,KACL,OAAuC,IAAnChD,OAIJ,EAAaP,IAAmB,GAChCe,KACAmB,KACA3C,GAAmB7c,MAAQwb,GAAepX,WAC1Cua,KACAtB,GAAmB5I,cAAgB4I,GAAmBvH,QAAQxT,OAAS,EAEvE,KACA,MAEO,EACX,CGnWA,MAAMwe,GAAqC,EAAkB,mBACvDC,GAA+B,EAAkB,mBAEjDC,GAAuC,EAAkB,sBACzDC,GAAuC,EAAkB,sBAEzDC,GAAsC,EAAkB,oBACxDC,GAAoC,EAAkB,kBACtDC,GAAkC,EAAkB,gBAEpDC,GAA6C,EAAkB,2BAC/DC,GAA4C,EAAkB,0BAC9DC,GAA6C,EAAkB,2BAErE,SAASC,GAAmBC,EAAwBC,GAChD,IAAIjO,EAEJ,IAAKA,KAAU3B,EAAS,CACpB,MAAM6P,EAA0B3iB,SAAS4X,cAAc,UACvD+K,EAAK3hB,MAAQyhB,EAAIG,WAAWtf,OAAO8B,WACnCud,EAAKviB,KAAO,GAAGqU,EAAOhP,iBAAiBgP,EAAOvC,WAC9CuQ,EAAIngB,IAAIqgB,E,CAGZF,EAAIzhB,MAAQ0hB,EAAatd,UAC7B,CAEA,SAAS,KACL4c,GAAmBrf,MAAMC,eAAe,mBAC5C,CAmBA1C,eAAe2iB,KAIX,GAHA,EAAaZ,IAAoB,GALjC,KAZAA,GAAmBtf,MAAMC,eAAe,oBAoBA,IAApCof,GAAmBhhB,MAAMsC,OAEzB,OAlBJ0e,GAAmBrf,MAAME,YAAY,mBAAoB,IAkB9C,EAGX,GAAIqf,GAAiBlhB,QAAUmhB,GAAenhB,MAE1C,OAnBJihB,GAAmBtf,MAAME,YAAY,mBAAoB,IAmB9C,EAGX,MAAMwB,EAAsBE,IAC5B,GAA2B,IAAvBF,EAAYf,OAEZ,OADA3C,QAAQmQ,KAAK,0BACN,EAGX,MAAMgS,EAAoBhD,SAASoC,GAAiBlhB,MAAO,IACrD+hB,EAAoBjD,SAASqC,GAAenhB,MAAO,IAEnDsK,EAAwB,EAA0BjH,GAElDsB,EdhDH,SAAoByG,GACnBA,EAAI9I,OAAS,GAAM,IACnB8I,EAAM,IAAMA,GAGhB,MAAMhK,EAAqB,IAAIuE,WAAWyF,EAAI9I,OAAS,GAEvD,IAAK,IAAIE,EAAI,EAAGA,EAAIpB,EAAOyD,WAAYrC,GAAK,EAAG,CAC3C,MAAMoW,EAAe,EAAJpW,EACjBpB,EAAOoB,GAAKsc,SAAS1T,EAAIxC,UAAUgQ,EAAUA,EAAW,GAAI,G,CAGhE,OAAOxX,EAAOyE,MAClB,CcmC+B,CAAuBmb,GAAmBhhB,OAC/D+U,QAA+BjD,EAAQgQ,GAAmBxP,QAAQ3N,EAAO2F,EAAUX,EAAkBK,MACrGgY,QAAiClQ,EAAQiQ,GAAmBhQ,QAAQgD,EAAWzK,EAAUX,EAAkBK,MjBoD9G,IAAkBnE,EiBhDrB,OAFAob,GAAmBjhB,OjBkDE6F,EiBlD0Bmc,EjBmDxCC,MAAM5Y,UAAU8N,IAAI+K,KACvB,IAAIvc,WAAWE,IACduR,IAAe,KAAOA,EAAEhT,SAAS,KAAK2C,OAAO,KAChDob,KAAK,MiBpDA,CACX,CC3FO,MAMDC,GAAkC1a,KAAK2a,MAAMC,IAS5C,MAAMC,GACUC,OACAC,SAAuB,GAEvBC,YACAC,wBACAC,yBAEAC,2BAEA9K,KACA/M,IACAhL,MAEnB,WAAWjB,GACP,OAAOqD,KAAKsgB,WAChB,CAEA,aAAWhhB,GACP,MAA0C,SAAnCU,KAAKsgB,YAAY/gB,MAAMmhB,OAClC,CAEO,oBAAAC,GACH,IAAIC,EAAoB,EAExB,IAAK,MAAMC,KAAS7gB,KAAKqgB,SACjBQ,EAAMvhB,YACNshB,GAAqB,GAI7B,OAAOA,CACX,CAEO,mBAAAE,GACH,IAAuB,IAAnB9gB,KAAKV,UACL,OAAO,EAGX,IAAIyhB,EAAmB,EAEvB,IAAK,MAAMF,KAAS7gB,KAAKqgB,SACrBU,GAAoBF,EAAMC,sBAG9B,OAAOC,CACX,CAEQ,QAAAC,CAASH,GACb7gB,KAAKwgB,yBAAyB/L,YAAYoM,EAAMP,aAChDtgB,KAAKqgB,SAASrd,KAAK6d,EACvB,CAEQ,gBAAAI,CAAiB5X,GACrB,IAAK,MAAO6X,EAAUC,KAAepa,OAAOwC,QAAQF,GAAS,CACzD,MAAM+X,EflBPC,mBAAmBC,OekB2CJ,IACvDL,EAAQ,IAAIV,GAASngB,KAAM,GAAGA,KAAK2V,QAAQyL,IAAmBA,EAAiBD,EAAYnhB,KAAKygB,4BACtGzgB,KAAKghB,SAASH,E,CAEtB,CAEA,WAAAla,CAAYyZ,EAAyBzK,EAAc/M,EAAahL,EAAY6iB,GACxEzgB,KAAKogB,OAASA,EACdpgB,KAAK2V,KAAOA,EACZ3V,KAAK4I,IAAMA,EACX5I,KAAKpC,MAAQA,EACboC,KAAKygB,2BAA6BA,EAElCzgB,KAAKsgB,YAAc1jB,SAAS4X,cAAc,OAC1CxU,KAAKuhB,sBAGLvhB,KAAKugB,wBAA0B3jB,SAAS4X,cAAc,OACtDxU,KAAKwhB,uBAEL,IAAK,MAAM7kB,KAAWqD,KAAKyhB,gCACvBzhB,KAAKugB,wBAAwB9L,YAAY9X,GAG7CqD,KAAKsgB,YAAY7L,YAAYzU,KAAKugB,yBAGlCvgB,KAAKwgB,yBAA2B5jB,SAAS4X,cAAc,OACvDxU,KAAKsgB,YAAY7L,YAAYzU,KAAKwgB,0BAClCxgB,KAAK0hB,mCAEL,MAAMC,EAASlB,EAA2BkB,OAAOhM,EAAM/M,EAAKhL,IAE7C,IAAX+jB,GAAoB,EAA0B/jB,GAC9CoC,KAAKihB,iBAAiBrjB,GACf+jB,GAAU/jB,EAAMqW,YACvBjU,KAAKihB,iBAAiBrjB,EAAMqW,YAG5BmM,GAEApgB,KAAK4hB,mBAAmB,UAEhC,CAEQ,6BAAAH,GACJ,OAAOzhB,KAAKygB,2BAA2BgB,8BAA8BzhB,KAAK2V,KAAM3V,KAAK4I,IAAK5I,KAAKpC,MACnG,CAEQ,mBAAA2jB,GACJvhB,KAAKsgB,YAAY3hB,UAAUO,IAAI,iBAC/Bc,KAAKsgB,YAAY/gB,MAAMmhB,QAAU,OAEjC,IAAImB,EAAS,EACTC,EAAiB,EAEjB9hB,KAAKogB,SACLyB,EA3HgB,IA6HhB7hB,KAAKogB,QAAUpgB,KAAKogB,OAAOA,SAC3B0B,EA3HmB,IA8HvB9hB,KAAKsgB,YAAY/gB,MAAMwiB,iBAAmB,GAAGF,UAC7C7hB,KAAKsgB,YAAY/gB,MAAMyiB,oBAAsB,GAAGF,aACpD,CAEQG,oBAA0C,KAE1C,kBAAAL,CAAmBM,GACvB,MAAMD,EAAsBrlB,SAAS4X,cAAc,OASnD,GARAyN,EAAoBtjB,UAAUO,IAAI,0BAClC+iB,EAAoB1iB,MAAM4iB,WAAa,IACvCF,EAAoB1iB,MAAM6iB,QAAU,IACpCH,EAAoB1iB,MAAM8iB,MAAQ,OAClCJ,EAAoB1iB,MAAM+iB,YAAc,aAAaJ,IACrDliB,KAAKiiB,oBAAsBA,EAC3BjiB,KAAKsgB,YAAY7L,YAAYwN,GAEzBjiB,KAAKogB,QAAUpgB,KAAKogB,OAAOA,OAAQ,CACnC,MAAMmC,EAAwB3lB,SAAS4X,cAAc,OACrD+N,EAAsB5jB,UAAUO,IAAI,4BACpCqjB,EAAsBhjB,MAAM4iB,WAAa,IACzCI,EAAsBhjB,MAAM6iB,QAAU,IACtCG,EAAsBhjB,MAAM8iB,MAAQ,OACpCE,EAAsBhjB,MAAMsiB,OAAS,GAAG7B,OACxCuC,EAAsBhjB,MAAMijB,aAAe,aAAaN,IACxDliB,KAAKsgB,YAAY7L,YAAY8N,E,CAGjCviB,KAAKyiB,aACT,CAEQ,WAAAA,GACJ,GAAiC,OAA7BziB,KAAKiiB,oBACL,OAGJ,MAAMrB,EAAoB5gB,KAAK2gB,uBAE/B,GAA0B,IAAtBC,EAEA,YADA5gB,KAAKiiB,oBAAoB1iB,MAAMsiB,OAAS,OAI5C,IAAIa,EAAwB,EAE5B,IAAK,IAAItiB,EAAI,EAAGA,EAAIwgB,EAAoB,EAAGxgB,GAAK,EACxCJ,KAAKqgB,SAASjgB,GAAGd,YACjBojB,GAAyB1iB,KAAKqgB,SAASjgB,GAAG0gB,uBAIlD,MAAM6B,EAnLc,GAmLID,EAnLJ,GAmLyE1C,GAAkC,EAE/HhgB,KAAKiiB,oBAAoB1iB,MAAMsiB,OAAS,GAAGc,KAC/C,CAEQ,oBAAAnB,GACCxhB,KAAKugB,0BAIVvgB,KAAKugB,wBAAwB5hB,UAAUO,IAAI,kBAC3Cc,KAAKugB,wBAAwBhhB,MAAM4iB,WAAa,aAChDniB,KAAKugB,wBAAwBhhB,MAAM6iB,QAAU,IAC7CpiB,KAAKugB,wBAAwBhhB,MAAMqjB,WAAa,MAChD5iB,KAAKugB,wBAAwBhhB,MAAMsjB,UAAY,SACnD,CAEQ,gCAAAnB,GACJ1hB,KAAKwgB,yBAAyB7hB,UAAUO,IAAI,+BAC5Cc,KAAKwgB,yBAAyBjhB,MAAM4iB,WAAa,IACjDniB,KAAKwgB,yBAAyBjhB,MAAM6iB,QAAU,GAClD,CAEQ,UAAAU,CAAWC,GACf,GAAI/iB,KAAKugB,wBAAyB,CAC9BvgB,KAAKugB,wBAAwBlf,UAAY,GACzC,IAAK,MAAM1E,KAAWqD,KAAKyhB,gCACvBzhB,KAAKugB,wBAAwB9L,YAAY9X,E,CAQjD,GAzNoB,IAqNhBomB,GAA6B/iB,KAAKogB,QAClCpgB,KAAKogB,OAAO0C,WAAWC,GArNL,IAwNlBA,EACA,IAAK,MAAMlC,KAAS7gB,KAAKqgB,SACrBQ,EAAMiC,WAAWC,EAG7B,CAEO,IAAArK,CAAKqK,GAOR,GANA/iB,KAAKsgB,YAAY/gB,MAAMmhB,QAAU,OAjOb,IAmOhBqC,GAA6B/iB,KAAKogB,QAClCpgB,KAAKogB,OAAO1H,KAAKqK,GAnOC,IAsOlBA,EACA,IAAK,MAAMlC,KAAS7gB,KAAKqgB,SACrBQ,EAAMnI,KAAKqK,GAInB/iB,KAAKyiB,aACT,CAEO,IAAA9J,CAAKoK,GAOR,GANA/iB,KAAKsgB,YAAY/gB,MAAMmhB,QAAU,OAjPb,IAmPhBqC,GAA6B/iB,KAAKogB,QAClCpgB,KAAKogB,OAAOzH,KAAKoK,GAnPC,IAsPlBA,EACA,IAAK,MAAMlC,KAAS7gB,KAAKqgB,SACrBQ,EAAMlI,KAAKoK,GAInB/iB,KAAKyiB,aACT,CAEQ,iBAAOO,CAAWhmB,EAAcklB,GACpC,MAAMvlB,EAAUC,SAAS4X,cAAc,QAMvC,OALI0N,IACAvlB,EAAQ4C,MAAM0jB,gBAAkBf,EAChCvlB,EAAQ4C,MAAM2jB,aAAe,OAEjCvmB,EAAQiV,UAAY5U,EACbL,CACX,CAEQ,wBAAOwmB,CAAkBnmB,EAAcomB,GAC3C,MAAMC,EAAOzmB,SAAS4X,cAAc,QAEpC,IAAI8O,EAAM,EAEV,IAAK,MAAMC,KAAUH,EACbG,EAAOD,MAAQA,GACfD,EAAK5O,YAAY0L,GAAS6C,WAAWhmB,EAAKwJ,UAAU8c,EAAKC,EAAOD,OAGpED,EAAK5O,YAAY0L,GAAS6C,WAAWhmB,EAAKwJ,UAAU+c,EAAOD,IAAKC,EAAOD,IAAMC,EAAOC,KAAM,YAE1FF,EAAMC,EAAOD,IAAMC,EAAOC,IAO9B,OAJIF,EAAMtmB,EAAKkD,QACXmjB,EAAK5O,YAAY0L,GAAS6C,WAAWhmB,EAAKwJ,UAAU8c,EAAKtmB,EAAKkD,UAG3DmjB,CACX,CAEQ,sBAAOI,CAAgB9mB,GAC3B,OAAgC,IAA5BA,EAAQ0jB,SAASngB,OACVvD,EAGJwjB,GAASsD,gBAAgB9mB,EAAQ0jB,SAAS,GACrD,CAEO,MAAAqD,CAAOC,EAAoBC,GAC9B,IAAKD,EAID,OAHA3jB,KAAK8iB,WAzSa,GA0SlB9iB,KAAK0Y,KA1Sa,QA2SlB1Y,KAAKyiB,cAIT,GAAuD,IAAnDziB,KAAKugB,wBAAwBf,WAAWtf,OACxC,OAGJ,MAAMkjB,EAA4B,GAE5BS,EAAe1D,GAASsD,gBAAgBzjB,KAAKugB,yBAInD,GAFgBqD,EAAcC,EAAajS,UAAW+R,EAAYP,GAErD,CACT,MAAMvC,EAAQV,GAASgD,kBAAkBU,EAAajS,UAAWwR,GAEjES,EAAaxiB,UAAY,GACzBwiB,EAAapP,YAAYoM,GAEzB7gB,KAAK0Y,KAhUW,GAiUhB1Y,KAAK0Y,KAhUa,E,MAkUlB1Y,KAAK8iB,WAlUa,GAqUtB,IAAK,MAAMjC,KAAS7gB,KAAKqgB,SACrBQ,EAAM6C,OAAOC,EAAYC,GAG7B5jB,KAAKyiB,aACT,ECzUJ,SAASqB,GAAsB9a,GAC3B,OAAOA,EAAIoL,cAAc2P,UAAU,OAAO3e,QAAQ,mBAAoB,GAC1E,CAEA,SAAS4e,GAAgCC,EAAaC,EAAkBC,EAAaf,GACjF,IAAKe,EACD,OAAO,EAGXF,EAAMH,GAAsBG,GAG5B,IAAK,IAAIT,GAFTW,EAAML,GAAsBK,IAETjkB,OAAQsjB,GAAO,EAAGA,GAAO,EAAG,CAC3C,MAAMY,EAAUD,EAAI3d,UAAU,EAAGgd,GAC3Ba,EAAWJ,EAAI3gB,QAAQ8gB,EAASF,GAEtC,GAAIG,GAAY,EAMZ,OALAjB,EAAQpgB,KAAK,CACTsgB,IAAKe,EACLb,IAAKY,EAAQlkB,SAGV8jB,GAAgCC,EAAKI,EAAWD,EAAQlkB,OAAQikB,EAAI3d,UAAUgd,GAAMJ,E,CAInG,OAAO,CACX,CCtBA,MAEMkB,GAAyB7nB,EAAe,0BACxC8nB,GAAyB9nB,EAAe,0BAExC+nB,GAAmB/nB,EAAe,oBAClCgoB,GAAyBhoB,EAAe,0BACxCioB,GAA6BjoB,EAAe,8BAElD,IAAIkoB,GAOJ,MAAMC,GAAoE,CACtE,CAAE5nB,KAAM,QAAS6nB,SDOd,SAAkCZ,EAAaE,EAAaf,GAC/D,OAAOY,GAAgCC,EAAK,EAAGE,EAAKf,EACxD,GCRI,CAAEpmB,KAAM,WAAY6nB,SDUjB,SAAqCZ,EAAaE,EAAaf,GAClE,MAAMnjB,EAAQ6jB,GAAsBG,GAAK3gB,QAAQwgB,GAAsBK,IAEvE,QAAIlkB,EAAQ,IAIZmjB,EAAQpgB,KAAK,CACTsgB,IAAKrjB,EACLujB,IAAKW,EAAIjkB,SAGN,GACX,GCtBI,CAAElD,KAAM,QAAS6nB,SDwBd,SAAkCZ,EAAaE,EAAaf,GAC/D,OAAIU,GAAsBG,KAASH,GAAsBK,KACrDf,EAAQpgB,KAAK,CACTsgB,IAAK,EACLE,IAAKW,EAAIjkB,UAEN,EAIf,IC/BA,SAAS4kB,KACL,IAAKH,GACD,OAGJ,MAAM1kB,EAAgBykB,GAA2BrS,cAC3C0S,EAA2CH,GAAgC3kB,GAAO4kB,SAExFF,GAAahM,KFpCa,GEqC1BgM,GAAajB,OAAOe,GAAuB7mB,MAAMonB,oBAAqBD,EAC1E,CAYA,MAAME,GAKkCC,2BAJnBC,gBACAC,cACAC,sBAEjB,YAAoCH,GAAA,KAAAA,2BAAAA,EAChCllB,KAAKmlB,gBAAkB,EAA0B,YACjDnlB,KAAKolB,cAAgB,EAA0B,UAE/C,MAAME,EAAczjB,OAAO0jB,iBAAiBjB,IAE5CtkB,KAAKqlB,sBAAwBC,EAAYrC,eAC7C,CAEQ,iBAAMuC,CAAY5nB,SAChBoC,KAAKmlB,gBAAgBlM,mCACvBrb,EAAM0e,OACN1e,EAAM4E,SACN5E,EAAMsC,OACNtC,EAAMkR,QAEd,CAEQ,kBAAM2W,CAAa9P,EAAc/X,GACrC,aAAaoC,KAAKmlB,gBAAgBlW,SAAS0G,EAAM/X,EACrD,CAEQ,eAAM8nB,CAAU/P,EAAc/M,EAAahL,GAC/C,aAAaoC,KAAKolB,cAAcnW,SAAS0G,EAAM/M,EAAKhL,EACxD,CAEQ,uBAAO+nB,CAAiB/c,EAAaoO,GACzC,MAAY,aAARpO,MAICoO,IAAQ,EAA0BA,IAA8B,iBAAfA,EAAIsF,QAAuBtF,EAAIsF,OAAOpc,OAAS,EAKzG,CAEQ,qBAAO0lB,CAAe5O,GAC1B,SAAKA,IAAQ,EAA0BA,IAId,iBAAdA,EAAIpZ,OAAsBoZ,EAAIpZ,MAAMsC,QAAU,GAI9B,iBAAhB8W,EAAIlI,SAAwBkI,EAAIlI,QAAU,EAKzD,CAEQ,sBAAO+W,CAAgBjd,EAAaoO,GACxC,GAAY,YAARpO,EACA,OAAO,EAGX,IAAKoO,IAAQ,EAA0BA,GACnC,OAAO,EAGX,IAAK,MAAM8O,KAAO/e,OAAOgf,OAAO/O,GAC5B,IAAKiO,GAAgCW,eAAeE,GAChD,OAAO,EAIf,OAAO,CACX,CAEQ,aAAOE,CAAOpd,EAAahL,GAC/B,QAAIqnB,GAAgCY,gBAAgBjd,EAAKhL,IACrDqnB,GAAgCW,eAAehoB,IAC/CqnB,GAAgCU,iBAAiB/c,EAAKhL,IACtD,EAA0BA,GAKlC,CAEO,MAAA+jB,CAAOhM,EAAc/M,EAAahL,GACrC,SAAIqnB,GAAgCW,eAAehoB,KAC/CqnB,GAAgCU,iBAAiB/c,EAAKhL,MAId,IAArC,EAA0BA,EACrC,CAEQ,wBAAAqoB,CAAyBC,GAC7B,MAEMxhB,EAFMuN,KAAKkU,MACJD,EAAUE,UAKvB,OAFiB9gB,KAAKiU,IAAI,EAAGjU,KAAKmX,IAAI/X,EAAM1E,KAAKklB,6BAE/BllB,KAAKklB,0BAC3B,CAEQ,mBAAOmB,CAAaC,GACxB,MAAO,GAAGA,EAAKC,iBAAiBD,EAAKE,WAAa,KAAKF,EAAKG,WAChE,CAEQ,YAAAC,CAAa1pB,EAAckpB,GAC/B,MAAMnoB,EAASnB,SAAS4X,cAAc,UAEtCzW,EAAOuD,MAAQ,kBAAkB2jB,GAAgCoB,aAAaH,KAE9E,MAAMS,EAAO/pB,SAAS4X,cAAc,OACpCmS,EAAKhoB,UAAUO,IAAI,qBAEnB,MAAM0nB,EAAWhqB,SAAS4X,cAAc,QACxCoS,EAAShV,UAAY5U,EACrB4pB,EAASjoB,UAAUO,IAAI,QACvBynB,EAAKlS,YAAYmS,GAEjB,MAAMC,EAAejqB,SAAS4X,cAAc,OAQ5C,OAPAqS,EAAaloB,UAAUO,IAAI,aAC3B2nB,EAAatnB,MAAM0jB,gBAAkBjjB,KAAKqlB,sBAC1CwB,EAAatnB,MAAM8iB,MAAQ,GAAG/c,KAAKwhB,MAAuD,KAAhD,EAAI9mB,KAAKimB,yBAAyBC,QAC5ES,EAAKlS,YAAYoS,GAEjB9oB,EAAO0W,YAAYkS,GAEZ5oB,CACX,CAEO,6BAAA0jB,CAA8B9L,EAAc/M,EAAahL,GAC5D,GAAIqnB,GAAgCU,iBAAiB/c,EAAKhL,GAAQ,CAC9D,MAAMkR,EAAkBlR,EAAMkR,QACxBiY,EAAW/mB,KAAKmlB,gBAAgBpW,gBAAgBD,GAEhDkY,EAAe,IAAI/U,KAAKrU,EAAM2U,UAE9BxU,EAASiC,KAAK0mB,aAAa,WAAYM,GAC7CjpB,EAAOY,UAAUO,IAAI,YACrBnB,EAAOwB,MAAM0nB,YAAc,QAC3BlpB,EAAOwB,MAAM2nB,SAAW,QAEP,IAAbH,IACAhpB,EAAOopB,aAAa,aAAc,uBAAuBrY,gBAAsB9O,KAAKmlB,gBAAgBnW,sBACpGjR,EAAOY,UAAUO,IAAI,eAGzB,MACMjC,EADmB,EAA0B,aAClBqX,gCAEjC,EAAuBvW,GAAQjB,eAAkBkD,KAAKwlB,YAAY5nB,IAAQX,GAE1E,MAAMmqB,EAAaxqB,SAAS4X,cAAc,UAO1C,OANA4S,EAAWzoB,UAAUO,IAAI,iBACzBkoB,EAAWxV,UAAY,KACvBwV,EAAW9lB,MAAQ,mCAEnB,EAAuB8lB,GAAYtqB,eAAkBkD,KAAKylB,aAAa9P,EAAM/X,IAAQX,GAE9E,CAACc,EAAQqpB,E,CACb,GAAInC,GAAgCW,eAAehoB,GAAQ,CAC9D,MAAMkR,EAAkBlR,EAAMkR,QACxBiY,EAAW/mB,KAAKolB,cAAcrW,gBAAgBD,GAE9CkY,EAAe,IAAI/U,KAAKrU,EAAM2U,UAE9BxU,EAASiC,KAAK0mB,aAAa9d,EAAKoe,GActC,OAbAjpB,EAAOY,UAAUO,IAAI,UACrBnB,EAAOwB,MAAM0nB,YAAc,SAEV,IAAbF,IACAhpB,EAAOopB,aAAa,aAAc,qBAAqBrY,gBAAsB9O,KAAKolB,cAAcpW,sBAChGjR,EAAOY,UAAUO,IAAI,eAMzB,EAAuBnB,GAAQjB,eAAkBkD,KAAK0lB,UAAU/P,EAAM/M,EAAKhL,IAHlD,EAA0B,aAClB0W,iCAI1B,CAACvW,E,CACL,GAAIknB,GAAgCe,OAAOpd,EAAKhL,GAAQ,CAC3D,MAAMypB,EAAQzqB,SAAS4X,cAAc,QAIrC,OAHA6S,EAAM9nB,MAAM0nB,YAAc,QAC1BI,EAAMzV,UAAY,GAAGhJ,MAAQhL,IAEtB,CAACypB,E,CAGZ,MAAMC,EAAM1qB,SAAS4X,cAAc,OAEnC,OADA8S,EAAI1V,UAAYhJ,EACT,CAAC0e,EACZ,ECvPJ,MAAMC,GAAyB9qB,EAAe,0BACxC+qB,GAAyB/qB,EAAe,0BAExCgrB,GAAWhrB,EAAe,YCPzB,MAAMirB,GACQC,eAEjB,YAAmBA,GACf3nB,KAAK2nB,eAAiBA,CAC1B,CAEO,yBAAArR,CAA0BX,GAC7B,OAAO3V,KAAK2nB,eAAerR,0BAA0BX,EACzD,ECWJ,MAAMiS,GAAcnrB,EAAe,eAC7BorB,GAAcprB,EAAe,eAE7BqrB,GAAkBrrB,EAAe,mBACjCsrB,GAAwBtrB,EAAe,yBACvCurB,GAAuBvrB,EAAe,wBAEtC,GAAkB,CACpB,IHkOG,MACa2F,KAAe,gBAExB,aAAA6lB,CAAcC,GAGjBvD,GAAe,IAAIxE,GAAS,KAAM,SAAU,GAAI+H,EAAO,IAAIjD,GAFvC,UAIpBT,GAAiBnjB,UAAY,GAC7BmjB,GAAiB/P,YAAYkQ,GAAahoB,SAE1CmoB,IACJ,CAEO,YAAAzkB,GACH,OAAOikB,EACX,CAEO,aAAA/jB,GACH,OAAOgkB,EACX,CAEO,aAAA/jB,GACHikB,GAAuB5mB,OAC3B,CAEO,YAAAsW,GACH,MAAM,IAAItX,MAAM,iBACpB,CAEO,IAAAwX,IAhPX,WACIqQ,GAA2BrjB,UAAY,GAEvC,IAAK,IAAIgB,KAAeuiB,GAAiC,CACrD,MAAMrQ,EAAS3X,SAAS4X,cAAc,UACtCD,EAAOvX,KAAOqF,EAAYrF,KAC1B0nB,GAA2BjQ,YAAYF,E,CAE/C,CAyOQ4T,GAEA1D,GAAuBtlB,iBAAiB,QAAS2lB,IACjDJ,GAA2BvlB,iBAAiB,SAAU2lB,GAC1D,GGpQA,IFpBG,MACa1iB,KAAe,gBAExB,aAAA6lB,CAAcC,GACjBT,GAAS7pB,MAAQ6N,KAAKC,UAAUwc,OAAO5pB,EAAW,EACtD,CAEO,YAAA+B,GACH,OAAOknB,EACX,CAEO,aAAAhnB,GACH,OAAOinB,EACX,CAEO,aAAAhnB,GACP,CAEO,YAAA2T,GACH,MAAM,IAAItX,MAAM,iBACpB,CAEO,IAAAwX,GACP,IEAExU,GAAmB,GAAS6jB,QAAO0E,QAAsC9pB,IAAhC8pB,EAAe/nB,eACxDgoB,GAA+C,GAAS3E,QAAO0E,QAAgC9pB,IAA1B8pB,EAAiB/T,OAEtFiU,GAAU,IAAI1oB,EAAWC,IAE/B,IAAI,GAA8B,IAAI2O,EAAsC,IAAIoG,IAE5E2T,GAA8C,KAuDlDzrB,eAAe0rB,KACX,G1BpEOrnB,IAAiBjB,OAAS,G0BoER,EAErB,OADA6T,MAAM,uCACC,EAGX,MAAM/U,QArCVlC,iBACI,IAAIoR,QAA+B,GAAaT,kBAEhD,GAAgB,OAAZS,EACA,OAAO,EAGX,IACI,IAKIua,EALAzR,EAAMvL,KAAKwL,MAAM/I,GAMrB,IAAKua,KALLzR,EAAM,EAA2BA,GAEjCuR,GAAcvR,EAGIqR,IACdI,EAAUR,cAAcjR,GAG5B,OAAO,C,CACT,MAAO3Z,GACLkrB,GAAc,KACdxU,MAAM,+EACN,MAAMnN,EAAWvJ,EAAgBuJ,QAKjC,OAJIA,IACAmN,MAAMnN,GACNrJ,QAAQF,MAAMuJ,KAEX,C,CAEf,CAQkC8hB,GAO9B,OALI1pB,IACAoC,I1BzCJV,EAAwBnB,MAAMmhB,QAAU,Q0B6CjC1hB,CACX,CAEA,SAAS2pB,KAC2F,MAA5Ftc,OAAO,0EAA6E,KAIxF,GAAaxB,OACjB,CAEA,SAAS+d,KACL7U,MAAM,GAAaxF,mBACvB,CCxHO,MAAMsa,GACWC,mBAApB,WAAAniB,CAAoBmiB,GAAA,KAAAA,mBAAAA,CACpB,CAEO,6BAAAxU,GACH,OAAQyU,GAAS/oB,KAAKgpB,gBAAgBD,EAC1C,CAEO,eAAAC,IAAmBD,GACtB/oB,KAAK8oB,mBAAmBE,mBAAmBD,EAC/C,ECNJ,MAAME,GAAexsB,EAAe,gBAC9BysB,GAAkBzsB,EAAe,mBAEjC0sB,GAAoB1sB,EAAe,qBACnC2sB,GAAe3sB,EAAe,gBCe9B,GAAkB,CAZS,CAC7B4D,aAAY,IACD5D,EAAe,iBAE1B8D,cAAa,IACF9D,EAAe,iBAE1B,aAAA+D,GACI,IACJ,GAKA,I7B8FG,MACa4B,KAAe,cAExB,YAAA+R,GACH,MAAM,IAAItX,MAAM,iBACpB,CAEO,IAAAwX,GACHxT,EAAW1B,iBAAiB,QAASqC,GACrCb,EAAexB,iBAAiB,QAAS2C,GACzClB,EAA2BzB,iBAAiB,QAAS8C,GAErDV,IACAV,EAAWS,MAAQb,EACnBE,EAAe9C,OACnB,G6B5GA,IZuWG,MACauE,KAAe,WAExB,YAAA/B,GACH,OAAOoZ,EACX,CAEO,aAAAlZ,GACH,OAAOmZ,EACX,CAEO,aAAAlZ,GACH,KACAob,KACA1B,GAAcrc,OAClB,CAEO,YAAAsW,GACH,OAAOnU,KAAKoC,KAAKgS,aACrB,CAEO,aAAA/E,CAAcD,EAA4BF,GAC7C,IAAmB,IAAfuP,KACA,OAAO,EAGX,MAAMzK,GArC0B,KAJTX,EAyCkCnE,GArChDqE,WAHE,aAOmB,IAA9BF,EAASG,SANE,aAGJ,KAOJH,EAAS7M,UAAUiN,EAAeJ,EAASnT,OAASoT,GAZ/D,IAA+BD,EA2CvB,GAAoB,OAAhBW,EAGA,OAFAzW,QAAQF,MAAM,mDAAmD6R,OACjE6E,MAAM,oDACC,EAiBX,GAdI3E,EAAc6E,YACd,GAAuCxI,KAAKC,UAAU0D,EAAc6E,WAAY,KAAM,WAGnF7E,EAAc6E,WAErBiG,GAActc,MAAQwR,EAAckN,OACpCZ,KAEAd,GAAYhd,MAAQwR,EAAc5M,SAClCwa,GAA8Bd,GAAgBtB,GAAYhd,QAC1Dmf,KAEArC,GAAiB9c,MAAQwR,EAAclP,QACF,IAAjCsc,KAGA,OAFAjf,QAAQF,MAAM,6CAA6C6R,OAC3D6E,MAAM,8CACC,EAGX,MAAMsV,EArWd,SAA4Cva,GACxC,IAAK,IAAI1O,EAAI,EAAGA,EAAIuZ,GAAmBzZ,OAAQE,IAC3C,GAAIuZ,GAAmBvZ,GAAG0O,UAAYA,EAClC,OAAO1O,EAIf,OAAQ,CACZ,CA6V8BkpB,CAAmCla,EAAcN,SACvE,OAAIua,EAAgB,GAChB9rB,QAAQF,MAAM,8CAA8C6R,OAC5D6E,MAAM,+CACC,IAEXkH,GAAmB5I,cAAgBgX,EAEnC,GAAiCrV,GACjC,GAAqC5E,EAAe,aAE7C,EACX,CAEO,IAAAiF,GACH,MACMpX,EADmB,EAA0B,aAClBqX,gCjBjblC,IAA2BiV,EFgFF7rB,EAAuBK,EEhFrBwrB,EiBmba/P,GjBlb3CtY,EAAkB8B,KAAKumB,GiBqbnB9O,GAAmBlB,IAAMH,GAAepX,WACxCyY,GAAmB7c,MAAQwb,GAAepX,WAE1C,EAAuBqY,GAAoBoB,GAA8Bxe,GACzE,EAAuBmd,GAAuByB,GAAiC5e,GnB1WvDS,EmB4WLwd,InB5W4Bnd,EmB4WTqd,InB3WnCjc,iBAAiB,SAAS,KACZ,aAAbzB,EAAI8rB,MACJ9rB,EAAI8rB,KAAO,QACXzrB,EAAOsD,UAAY,SAEnB3D,EAAI8rB,KAAO,WACXzrB,EAAOsD,UAAY,O,ImBuWvB,EAAmB6Y,GAAeI,GAAmBrd,GACrDue,GAAuB,EAAmBN,GAAmBG,GAAuBpe,GAEpFwd,GAAmBtb,iBAAiB,QAAS0d,IAC7CnC,GAAiBvb,iBAAiB,QAAS2d,IAE3ClC,GAAYzb,iBAAiB,QAAS8d,IACtC,EAAuBlC,GAAkBoC,GAA4BlgB,GAErEge,GAAmB9b,iBAAiB,QAASke,IAE7CnD,GAAc/a,iBAAiB,QAASqf,IAExC,EAAYlD,IAAuB,GnBjWpC,SAA6Bvd,EAA2B0rB,EAAuB9pB,GAClF,IAAIL,GmBkW4D,EnBjWhEvB,EAAOoB,iBAAiB,SAAS,WAC7BG,GAAaA,EACbI,EAAaC,EAAUL,EAC3B,IACAI,EAAaC,EAAUL,EAC3B,CmB4VQ,CAAuBib,GAAqC,EAAO,CAC/DI,GACAC,GACAC,GACAC,GACAN,GACAC,GACAC,GACAM,GACAC,KAGJS,KACAa,KACAa,KA7JR,WACI,IAAK,MAAMf,KAAqB1C,GAAoB,CAChD,MAAMpF,EAAS3X,SAAS4X,cAAc,UAEtCD,EAAOvX,KAAO,IAAIqf,EAAkBvN,UAEpCmM,GAAmBxG,YAAYF,E,CAGnC0G,GAAmB5I,cAAgB4I,GAAmBvH,QAAQxT,OAAS,CAC3E,CAqJQwpB,GAEAzP,GAAwB9a,iBAAiB,QAASsf,IAElD,EAA+B,WAAY,IAAI3F,GAAgB9Y,MACnE,GY7dA,IAAImT,GACJ,ITmEG,MACa/Q,KAAe,YAExB,YAAA/B,GACH,OAAOqe,EACX,CAEO,aAAAne,GACH,OAAOoe,EACX,CAEO,aAAAne,GACH,KACAoe,GAAmB/gB,OACvB,CAEO,YAAAsW,GACH,MAAM,IAAItX,MAAM,iBACpB,CAEO,IAAAwX,GACH,MACMpX,EADmB,EAA0B,aAClBqX,gCAEjC,EAAmBuK,GAAoBK,GAAwBjiB,GAG/DmiB,GAA2CN,GAAkBpP,EAAQxP,OAAS,GAC9Ekf,GAA2CL,GAAgBrP,EAAQxP,OAAS,GAE5E0e,GAAmBzf,iBAAiB,SAAS,KACrCyf,GAAmBhhB,MAAMsC,OAAS,GAClC,I,IAIR+e,GAAwB9f,iBAAiB,SAAS,KAC9C,EAAayf,IAAoB,EAAK,IAG1CO,GAAwBhgB,iBAAiB,SAAS,KAC9C,EAAa0f,IAAoB,EAAK,IAG1C,EAAuBG,GAAcS,GAAwBxiB,EACjE,GS/GA,IDnBG,MACH,WAAA0J,GACI9E,OAAO1C,iBAAiB,SAAUipB,GAAMpoB,KAAK2pB,QAAQvB,KAAI,GACzDvmB,OAAO1C,iBAAiB,sBAAuBipB,GAAMpoB,KAAK4pB,qBAAqBxB,KAAI,GAEnFe,GAAkBhqB,iBAAiB,SAAS,KACxCiqB,GAAaxrB,MAAQ,EAAE,IAG3B,EAA+B,YAAa,IAAIirB,GAAiB7oB,MACrE,CAEO,eAAAgpB,IAAmBD,GACtB,GAAmB,GAAfA,EAAK7oB,OACL,OAGJ,MAAMimB,GAAM,IAAIlU,MAAOC,cAEvB,IAAItL,EAAUmiB,EAAK,GAAG/mB,WAEtB,IAAK,IAAI5B,EAAI,EAAGA,EAAI2oB,EAAK7oB,OAAQE,IAC7BwG,GAAW,IAAImiB,EAAK3oB,GAAG4B,aAG3BonB,GAAaxrB,OAAS,IAAIuoB,MAAQvf,OACtC,CAEO,oBAAAgjB,CAAqBC,GACxB7pB,KAAKgpB,gBAAgB,6BAA6Ba,EAAWC,SACjE,CAEO,OAAAH,CAAQE,GACX7pB,KAAKgpB,gBAAgB,GAAGa,EAAWjjB,YAAYijB,EAAW7nB,aAC9D,CAEA,YAAA3B,GACI,OAAO6oB,EACX,CAEA,aAAA3oB,GACI,OAAO0oB,EACX,CAEA,aAAAzoB,GACI,IACJ,GC1BA,IdoOG,MACa4B,KAAe,gBAExB,YAAA+R,GACH,MAAM,IAAItX,MAAM,iBACpB,CAEO,IAAAwX,GACH,MACMpX,EADmB,EAA0B,aAClBqX,gCAEjCgB,GAAcnW,iBAAiB,QAASyX,IACxC,EAAuBvB,GAAgBoC,GAAaxa,GACpDiY,GAAQ/V,iBAAiB,QAASiX,GACtC,GcjPA,IH2FG,MACahU,KAAe,QAExB,yBAAAkU,CAA0BX,GAC7B,OArFR,SAAmCA,GAC/B,GAAoB,OAAhB4S,GACA,OAAO,EAGX,IAAIvR,EAAMuR,GAEV,MAAMwB,EAAYpU,EAAKvI,MAAM,KAE7B,IAAK,IAAIhN,EAAI,EAAGA,EAAI2pB,EAAU7pB,OAAQE,GAAK,EAAG,CAC1C,IAAK4W,EAAI+S,EAAU3pB,IACf,OAAOA,EAKX4W,EAAMA,EAAI+S,EAAU3pB,G,CAGxB,OAAO2pB,EAAU7pB,MACrB,CAiEeoW,CAA0BX,EACrC,CAEO,YAAAtV,GACH,OAAOwnB,EACX,CAEO,aAAAtnB,GACH,OAAOqnB,EACX,CAEO,aAAApnB,GACH,KACAX,GAAKyoB,GAAQvoB,gBAAgBS,eACjC,CAEO,YAAA2T,GACH,MAAM,IAAItX,MAAM,iBACpB,CAEO,IAAAwX,GACH,MACMpX,EADmB,EAA0B,aAClBqX,gCAEjCxW,EAAoBgqB,GAAiBU,GAA2BvrB,GAChE8qB,GAAsB5oB,iBAAiB,QAASwpB,IAChDX,GAAqB7oB,iBAAiB,QAASypB,IAE/C,MAAMoB,EAAe,IAAItC,GAAa1nB,MAGtC,IAAIyoB,EACJ,IAAKA,KAHL,EAA+B,QAASuB,GAGtB3B,IACdI,EAAUpU,MAElB,IG/HE,GAAmB,GAASqP,QAAO0E,QAAsC9pB,IAAhC8pB,EAAe/nB,eACxD,GAA2B,GAASqjB,QAAO0E,QAAgC9pB,IAA1B8pB,EAAiB/T,OAElE4V,GAAa,IAAIrqB,EAAW,IA8BrBkY,GAAgB,IA5BtB,MACa1V,KAAe,OAE/B,cACA,CAEO,YAAA+R,GACH,MAAM,IAAItX,MAAM,iBACpB,CAEO,IAAAwX,GACH,IAAIoU,EACJ,IAAKA,KAAa,GACdA,EAAUpU,MAElB,CAEO,kBAAA0D,GACH,MAAM0Q,EAAY,GAAKwB,GAAWlqB,gBAElC,YAAuBzB,IAAnBmqB,EAAUpU,KACHoU,EAGJ,IACX,GC7DE3Z,GAAU,2CAAWtI,UAAU,EAAG,IAGxC/J,EAAe,WAAW4E,UAAY,GAAGyN,2FAEzCgJ,GAAczD,M","sources":["webpack://itchy-password/./src/ui.ts","webpack://itchy-password/./src/TabControl.ts","webpack://itchy-password/./src/components/privatePartComponent.ts","webpack://itchy-password/./src/TimedAction.ts","webpack://itchy-password/./src/encoding.ts","webpack://itchy-password/./src/arrayUtils.ts","webpack://itchy-password/./src/asyncUtils.ts","webpack://itchy-password/./src/crypto.ts","webpack://itchy-password/./src/stringUtils.ts","webpack://itchy-password/./src/PlainObject.ts","webpack://itchy-password/./src/services/serviceManger.ts","webpack://itchy-password/./src/storages/GitHubVaultStorage.ts","webpack://itchy-password/./src/services/cipherService.ts","webpack://itchy-password/./src/components/cipherComponent.ts","webpack://itchy-password/./src/ciphers/v2.ts","webpack://itchy-password/./src/ciphers/v3.ts","webpack://itchy-password/./src/storages/SecureLocalStorage.ts","webpack://itchy-password/./src/components/storageOutputComponent.ts","webpack://itchy-password/./src/services/passwordService.ts","webpack://itchy-password/./src/components/passwordComponent.ts","webpack://itchy-password/./src/passwordGenerators/v1.ts","webpack://itchy-password/./src/passwordGenerators/v2.ts","webpack://itchy-password/./src/components/reEncryptComponent.ts","webpack://itchy-password/./src/components/vaultComponents/TreeNode.ts","webpack://itchy-password/./src/searchMatchFunctions.ts","webpack://itchy-password/./src/components/vaultComponents/treeViewComponent.ts","webpack://itchy-password/./src/components/vaultComponents/textViewComponent.ts","webpack://itchy-password/./src/services/vaultService.ts","webpack://itchy-password/./src/components/vaultComponent.ts","webpack://itchy-password/./src/services/errorLogsService.ts","webpack://itchy-password/./src/components/errorLogsComponent.ts","webpack://itchy-password/./src/components/rootComponent.ts","webpack://itchy-password/./src/index.ts"],"sourcesContent":["export const SUCCESS_COLOR: string = '#D0FFD0';\nexport const ERROR_COLOR: string = '#FFD0D0';\n\nexport function getElementById(elementName: string): HTMLElement {\n    const element: HTMLElement|null = document.getElementById(elementName);\n\n    if (elementName === null) {\n        throw new Error(`DOM element '${elementName}' not found.`);\n    }\n\n    return element as HTMLElement;\n}\n\nexport async function writeToClipboard(text: string, logFunc?: (..._: any[]) => void): Promise<boolean> {\n    try {\n        await navigator.clipboard.writeText(text);\n        return true;\n    } catch (error) {\n        const typedError = error as Error;\n        console.error(typedError.stack || error);\n        logFunc?.(typedError.stack || error);\n        return false;\n    }\n}\n\nexport function clearText(txt: HTMLInputElement, refocus: boolean = false): void {\n    txt.value = '';\n    if (refocus) {\n        txt.focus();\n    }\n}\n\ninterface ThrottleTimeout {\n    start: Function;\n    end: Function;\n}\n\nfunction createThrottleTimeout(clearFunc: Function, duration: number): ThrottleTimeout {\n    let timeout: number | undefined = undefined;\n\n    return {\n        start: () => {\n            if (timeout !== undefined) {\n                clearTimeout(timeout);\n                timeout = undefined;\n            }\n            clearFunc();\n        },\n        end: () => {\n            if (timeout !== undefined) {\n                clearTimeout(timeout);\n            }\n            timeout = setTimeout(clearFunc, duration);\n        }\n    };\n}\n\nexport type FeedbackButtonAsyncFunction = () => Promise<boolean> | boolean | Promise<void> | void;\n\nexport function setupFeedbackButton(button: HTMLButtonElement, action: FeedbackButtonAsyncFunction, logError?: (error: any) => any): () => void {\n    const throttleTimeout: ThrottleTimeout = createThrottleTimeout(() => {\n        button.classList.remove('good-flash');\n        button.classList.remove('bad-flash');\n    }, 1000);\n\n    const clickFunction = async () => {\n        button.disabled = true;\n        throttleTimeout.start();\n\n        try {\n            const actionResult = action();\n\n            let result;\n            if (actionResult instanceof Promise) {\n                result = await actionResult;\n            } else {\n                result = actionResult;\n            }\n\n            if (result === undefined || result === true) {\n                button.classList.add('good-flash');\n            } else {\n                button.classList.add('bad-flash');\n            }\n        } catch (error) {\n            const typedError = error as Error;\n            button.classList.add('bad-flash');\n            console.error(typedError.stack || error);\n            logError?.(typedError.stack || error);\n        } finally {\n            throttleTimeout.end();\n            button.disabled = false;\n        }\n    };\n\n    button.addEventListener('click', clickFunction);\n\n    return clickFunction;\n}\n\nexport function setupCopyButton(txt: HTMLInputElement, button: HTMLButtonElement, logFunc?: (..._: any[]) => void): () => void {\n    return setupFeedbackButton(button, () => writeToClipboard(txt.value), logFunc);\n}\n\nexport function setupViewButton(txt: HTMLInputElement, button: HTMLButtonElement): void {\n    button.addEventListener('click', () => {\n        if (txt.type === 'password') {\n            txt.type = 'input';\n            button.innerHTML = 'Hide';\n        } else {\n            txt.type = 'password';\n            button.innerHTML = 'View';\n        }\n    });\n}\n\nexport function showHide(element: HTMLElement, isVisible: boolean): void {\n    if (isVisible) {\n        element.style.removeProperty('display');\n    } else {\n        element.style.setProperty('display', 'none');\n    }\n}\n\nexport function showHideMany(elements: HTMLElement[], isVisible: boolean): void {\n    for (const element of elements) {\n        showHide(element, isVisible);\n    }\n}\n\nexport function setupShowHideButton(button: HTMLButtonElement, startVisible: boolean, elements: HTMLElement[]): void {\n    let isVisible = startVisible;\n    button.addEventListener('click', function () {\n        isVisible = !isVisible;\n        showHideMany(elements, isVisible);\n    });\n    showHideMany(elements, isVisible);\n}\n","export interface ITabInfo {\n    getTabButton(): HTMLButtonElement;\n    getTabContent(): HTMLElement;\n    onTabSelected(): void;\n}\n\nexport class TabControl {\n    private _activeTabIndex: number = -1;\n\n    public get activeTabIndex(): number {\n        return this._activeTabIndex;\n    }\n\n    public set activeTabIndex(index: number) {\n        if (index < 0 || index >= this.tabs.length) {\n            throw new Error(`Argument 'index' out of range. Must be in range [0;${this.tabs.length - 1}].`);\n        }\n        this.setActiveTab(index);\n    }\n\n    public constructor(private tabs: ITabInfo[]) {\n        for (let i = 0; i < this.tabs.length; i += 1) {\n            tabs[i].getTabButton().addEventListener('click', () => {\n                this.setActiveTab(i);\n            });\n        }\n\n        this.setActiveTab(0);\n    }\n\n    private setActiveTab(activeTabIndex: number) {\n        if (activeTabIndex === this._activeTabIndex) {\n            return;\n        }\n\n        let tabInfo: ITabInfo;\n\n        for (tabInfo of this.tabs) {\n            const button = tabInfo.getTabButton();\n            button.style.removeProperty('font-weight');\n            button.style.setProperty('color', '#C0C0C0');\n\n            tabInfo.getTabContent().style.setProperty('display', 'none');\n        }\n\n        const button = this.tabs[activeTabIndex].getTabButton();\n        button.style.setProperty('font-weight', 'bold');\n        button.style.removeProperty('color');\n\n        this.tabs[activeTabIndex].getTabContent().style.removeProperty('display');\n\n        this._activeTabIndex = activeTabIndex;\n\n        this.tabs[activeTabIndex].onTabSelected();\n    }\n}\n","import * as ui from '../ui';\n\nimport { TimedAction } from '../TimedAction';\nimport { IComponent } from './IComponent';\n\nconst btnProtectTitleForProtect = 'Stores the string in memory and removes it from the UI component. Prevents a physical intruder from copy/pasting the value.';\nconst btnProtectTitleForClear = 'Removes the string form memory and re-enables the UI component.';\n\nconst divPrivatePartContainer = ui.getElementById('divMasterKey');\n\nconst txtPrivatePart = ui.getElementById('txtPrivatePart') as HTMLInputElement;\nconst txtPrivatePartConfirmation = ui.getElementById('txtPrivatePartConfirmation') as HTMLInputElement;\nconst btnProtect = ui.getElementById('btnProtect') as HTMLButtonElement;\nconst spnProtectedConfirmation = ui.getElementById('spnProtectedConfirmation');\n\nconst spnPrivatePartSize = ui.getElementById('spnPrivatePartSize');\nconst spnPrivatePartSizeConfirmation = ui.getElementById('spnPrivatePartSizeConfirmation');\n\nconst PRIVATE_PART_PROTECTION_TIMEOUT: number = 60 * 1000;\n\nlet privatePart: string | undefined;\n\nconst onChangedHandlers: (() => void)[] = [];\n\nexport function registerOnChanged(onChanged: () => void) {\n    onChangedHandlers.push(onChanged);\n}\n\nexport function hasPrivatePart(): boolean {\n    return getPrivatePart().length > 0;\n}\n\nexport function getPrivatePart(): string {\n    if (privatePart !== undefined) {\n        return privatePart;\n    }\n    return txtPrivatePart.value;\n}\n\nexport function protectAndLockPrivatePart(): void {\n    if (txtPrivatePart.value.length === 0) {\n        return;\n    }\n\n    privatePart = txtPrivatePart.value;\n    spnProtectedConfirmation.innerHTML = 'Protected';\n\n    ui.clearText(txtPrivatePart);\n\n    ui.clearText(txtPrivatePartConfirmation);\n    spnPrivatePartSize.innerHTML = '0';\n    spnPrivatePartSizeConfirmation.innerHTML = '0';\n\n    txtPrivatePart.disabled = true;\n    txtPrivatePartConfirmation.disabled = true;\n\n    btnProtect.innerHTML = 'Clear and unlock';\n    btnProtect.title = btnProtectTitleForClear;\n\n    updatePrivatePartsMatching();\n}\n\nexport function hidePrivatePartContainer() {\n    // This cannot be reveresed, the only way is to refresh the page, and that's fine.\n    divPrivatePartContainer.style.display = 'none';\n}\n\nfunction clearAndUnLockPrivatePart(): void {\n    privatePart = undefined;\n    spnProtectedConfirmation.innerHTML = '';\n\n    txtPrivatePart.disabled = false;\n    txtPrivatePartConfirmation.disabled = false;\n\n    btnProtect.innerHTML = 'Protect and lock';\n    btnProtect.title = btnProtectTitleForProtect;\n    btnProtect.disabled = true;\n}\n\nfunction togglePrivatePartProtection(): void {\n    if (privatePart === undefined) {\n        protectAndLockPrivatePart();\n    } else {\n        clearAndUnLockPrivatePart();\n    }\n}\n\nfunction onProtectButtonClick() {\n    togglePrivatePartProtection();\n}\n\nconst protectPrivatePartAction: TimedAction = new TimedAction(protectAndLockPrivatePart, PRIVATE_PART_PROTECTION_TIMEOUT);\n\nfunction onPrivatePartTextInput(): void {\n    btnProtect.disabled = txtPrivatePart.value.length === 0;\n\n    spnPrivatePartSize.innerHTML = txtPrivatePart.value.length.toString();\n    updatePrivatePartsMatching();\n\n    let onChangedHandler: () => void;\n    for (onChangedHandler of onChangedHandlers) {\n        onChangedHandler();\n    }\n\n    protectPrivatePartAction.reset();\n}\n\nfunction updatePrivatePartsMatching(): void {\n    if (txtPrivatePartConfirmation.value === txtPrivatePart.value) {\n        txtPrivatePartConfirmation.style.setProperty('background', ui.SUCCESS_COLOR);\n    } else {\n        txtPrivatePartConfirmation.style.setProperty('background', ui.ERROR_COLOR);\n    }\n};\n\nfunction onPrivatePartConfirmationTextInput(): void {\n    spnPrivatePartSizeConfirmation.innerHTML = txtPrivatePartConfirmation.value.length.toString();\n    protectPrivatePartAction.reset();\n    updatePrivatePartsMatching();\n}\n\nexport class PrivatePartComponent implements IComponent {\n    public readonly name: string = 'PrivatePart';\n\n    public getVaultHint(): string {\n        throw new Error('Not supported.');\n    }\n\n    public init(): void {\n        btnProtect.addEventListener('click', onProtectButtonClick);\n        txtPrivatePart.addEventListener('input', onPrivatePartTextInput);\n        txtPrivatePartConfirmation.addEventListener('input', onPrivatePartConfirmationTextInput);\n\n        updatePrivatePartsMatching();\n        btnProtect.title = btnProtectTitleForProtect;\n        txtPrivatePart.focus();\n    }\n}\n","export class TimedAction {\n    private timeout: number | undefined;\n\n    public constructor(private action: Function, private delay: number) {\n    }\n\n    public reset(overrideDelay: number | undefined = undefined): void {\n        if (this.timeout !== undefined) {\n            clearTimeout(this.timeout);\n        }\n\n        const delay = overrideDelay !== undefined ? overrideDelay : this.delay;\n\n        this.timeout = window.setTimeout(() => {\n            this.action();\n            this.timeout = undefined;\n        }, delay);\n    }\n}\n","import * as arrayUtils from './arrayUtils';\n\nexport interface IEncoding {\n    readonly name: string;\n    readonly description: string;\n    encode(input: ArrayBuffer): string;\n    decode(input: string): ArrayBuffer;\n}\n\nconst BASE58_ALPHABET: string = '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz';\n\nexport class Base58Encoding implements IEncoding {\n    get name(): string {\n        return 'base58';\n    }\n\n    get description(): string {\n        return `Base58 alphabet in ASCII table order.`;\n    }\n\n    encode(input: ArrayBuffer): string {\n        return arrayUtils.toCustomBaseFast(input, BASE58_ALPHABET);\n    }\n\n    decode(input: string): ArrayBuffer {\n        return arrayUtils.fromCustomBaseFast(input, BASE58_ALPHABET);\n    }\n}\n\nexport const BASE62_ALPHABET: string = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n\nexport class Base62Encoding implements IEncoding {\n    get name(): string {\n        return 'base62';\n    }\n\n    get description(): string {\n        return `Alphabet '${BASE62_ALPHABET}'.`;\n    }\n\n    encode(input: ArrayBuffer): string {\n        return arrayUtils.toCustomBase(input, BASE62_ALPHABET);\n    }\n\n    decode(input: string): ArrayBuffer {\n        return arrayUtils.fromCustomBase(input, BASE62_ALPHABET);\n    }\n}\n\n// Code to encode and decode base64 is taken from MDN and adjusted.\n\nexport class Base64Encoding implements IEncoding {\n    get name(): string {\n        return 'base64';\n    }\n\n    get description(): string {\n        return '';\n    }\n\n    encode(input: ArrayBuffer): string {\n        return this._base64Encode(new Uint8Array(input))\n    }\n\n    decode(input: string): ArrayBuffer {\n        return this._base64Decode(input).buffer;\n    }\n\n    _base64ToUint6(base64Char: number): number {\n        return base64Char > 64 && base64Char < 91\n            ? base64Char - 65\n            : base64Char > 96 && base64Char < 123\n                ? base64Char - 71\n                : base64Char > 47 && base64Char < 58\n                    ? base64Char + 4\n                    : base64Char === 43\n                        ? 62\n                        : base64Char === 47\n                            ? 63\n                            : 0;\n    }\n\n    _base64Decode(base64Input: string, blocksSize?: number): Uint8Array {\n        // Remove any non-base64 characters, such as trailing '=', whitespace, and more.\n        base64Input = base64Input.replace(/[^A-Za-z0-9+/]/g, '');\n\n        const inputLength = base64Input.length;\n        const outputLength = blocksSize\n            ? Math.ceil(((inputLength * 3 + 1) >> 2) / blocksSize) * blocksSize\n            : (inputLength * 3 + 1) >> 2;\n\n        const outputBytes = new Uint8Array(outputLength);\n\n        let value24Bits = 0;\n\n        let outputIndex = 0;\n\n        for (let inputIndex = 0; inputIndex < inputLength; inputIndex++) {\n            const inputIndexMod4 = inputIndex % 4;\n\n            value24Bits |= this._base64ToUint6(base64Input.charCodeAt(inputIndex)) << (6 * (3 - inputIndexMod4));\n\n            if (inputIndexMod4 === 3 || inputLength - inputIndex === 1) {\n                let inputIndexMod3 = 0;\n\n                while (inputIndexMod3 < 3 && outputIndex < outputLength) {\n                    outputBytes[outputIndex] = (value24Bits >>> ((0b1_0000 >>> inputIndexMod3) & 0b1_1000)) & 0xFF;\n                    inputIndexMod3++;\n                    outputIndex++;\n                }\n\n                value24Bits = 0;\n            }\n        }\n\n        return outputBytes;\n    }\n\n    /* Base64 string to array encoding */\n    _uint6ToBase64(value6Bits: number): number {\n        return value6Bits < 26\n            ? value6Bits + 65\n            : value6Bits < 52\n                ? value6Bits + 71\n                : value6Bits < 62\n                    ? value6Bits - 4\n                    : value6Bits === 62\n                        ? 43\n                        : value6Bits === 63\n                            ? 47\n                            : 65;\n    }\n\n    _base64Encode(inputBytes: Uint8Array): string {\n        let inputIndexMod3 = 2;\n        let base64Output = '';\n\n        const inputBytesLength = inputBytes.length;\n\n        let value24Bits = 0;\n\n        for (let inputIndex = 0; inputIndex < inputBytesLength; inputIndex++) {\n            inputIndexMod3 = inputIndex % 3;\n\n            // To break your base64 into several 80-character lines, add:\n            // if (inputIndex > 0 && ((inputIndex * 4) / 3) % 76 === 0) {\n            //     base64Output += '\\n';\n            // }\n\n            const shift = 0b1_0000 >>> inputIndexMod3;\n            const constrainedShift = shift & 0b1_1000;\n\n            value24Bits |= inputBytes[inputIndex] << constrainedShift;\n\n            if (inputIndexMod3 === 2 || inputBytes.length - inputIndex === 1) {\n                base64Output += String.fromCodePoint(\n                    this._uint6ToBase64((value24Bits >>> 18) & 63),\n                    this._uint6ToBase64((value24Bits >>> 12) & 63),\n                    this._uint6ToBase64((value24Bits >>> 6) & 63),\n                    this._uint6ToBase64(value24Bits & 63)\n                );\n                value24Bits = 0;\n            }\n        }\n\n        const padding = inputIndexMod3 === 2\n            ? ''\n            : inputIndexMod3 === 1\n                ? '='\n                : '==';\n\n        return base64Output.substring(0, base64Output.length - 2 + inputIndexMod3) + padding;\n    }\n}\n\n// ---------------------------------------------------------------\n\nexport const availableEncodings: IEncoding[] = [\n    new Base62Encoding(),\n    new Base58Encoding(),\n    new Base64Encoding(),\n];\n\nexport function findEncodingByName(name: string): IEncoding | null {\n    for (const encoding of availableEncodings) {\n        if (encoding.name === name) {\n            return encoding;\n        }\n    }\n\n    return null;\n}\n","export function arrayToString(array: ArrayBuffer): string {\n    const decoder = new TextDecoder(/*'utf-8'*/);\n    return decoder.decode(array);\n};\n\nexport function copy(source: Uint8Array, sourceIndex: number, target: Uint8Array, targetIndex: number, length: number): void {\n    for (let i: number = 0; i < length; i += 1) {\n        target[i + targetIndex] = source[i + sourceIndex];\n    }\n}\n\nfunction createHeaderedBuffer(buffer: ArrayBuffer): ArrayBuffer {\n    if (buffer.byteLength > 0xFFFF) {\n        throw new Error(`Buffer too large: ${buffer.byteLength} bytes`);\n    }\n\n    let length = buffer.byteLength;\n    const headeredBuffer: Uint8Array = new Uint8Array(2 + buffer.byteLength);\n\n    for (let i: number = 0; i < 2; i += 1) {\n        headeredBuffer[i] = length % 256;\n        length /= 256;\n    }\n\n    headeredBuffer.set(new Uint8Array(buffer), 2);\n\n    return headeredBuffer.buffer;\n}\n\nfunction arrayBufferToUnsignedBigIntWithoutHeader(arrayBuffer: ArrayBuffer): bigint {\n    const length: number = arrayBuffer.byteLength;\n    const arrayView: DataView = new DataView(arrayBuffer, 0);\n\n    let result: bigint = 0n;\n    let multiplier: bigint = 1n;\n\n    for (let i: number = 0; i < length; i += 1) {\n        result += BigInt(arrayView.getUint8(i)) * multiplier;\n        multiplier *= 256n;\n    }\n\n    return result;\n}\n\nfunction arrayBufferToUnsignedBigInt(arrayBuffer: ArrayBuffer): bigint {\n    arrayBuffer = createHeaderedBuffer(arrayBuffer);\n\n    const length: number = arrayBuffer.byteLength;\n    const arrayView: DataView = new DataView(arrayBuffer, 0);\n\n    let result: bigint = 0n;\n    let multiplier: bigint = 1n;\n\n    for (let i: number = 0; i < length; i += 1) {\n        result += BigInt(arrayView.getUint8(i)) * multiplier;\n        multiplier *= 256n;\n    }\n\n    return result;\n}\n\nexport function unsignedBigIntToArrayBuffer(number: bigint): ArrayBuffer {\n    const result: Array<number> = [];\n\n    while (number > 0n) {\n        const remainder: bigint = number % 256n;\n        number /= 256n;\n\n        const byteValue: number = Number(<any>BigInt.asUintN(8, remainder));\n\n        result.push(byteValue);\n    }\n\n    let totalLength: number = result[0];\n    if (result.length > 1) { // For case where original buffer is of length 1 and contains 0.\n        totalLength += result[1] * 256;\n    }\n\n    // The varable 'result' contains 2 bytes of size header.\n    const diff = totalLength - (result.length - 2);\n\n    for (let i: number = 0; i < diff; i += 1) {\n        result.push(0);\n    }\n\n    return new Uint8Array(result.slice(2)).buffer;\n}\n\n// This is a one way encoding in the sense that decoding is not always deterministic.\n// This can be used to generate strings where decoding it doesn't matter.\nexport function toCustomBaseOneWay(bytes: ArrayBuffer, alphabet: string): string {\n    const alphabetLength: bigint = BigInt(alphabet.length);\n\n    let result: string = '';\n    let number: bigint = arrayBufferToUnsignedBigIntWithoutHeader(bytes);\n\n    while (number > 0n) {\n        const remainder: bigint = number % alphabetLength;\n        number /= alphabetLength;\n\n        const index: number = <number><any>BigInt.asUintN(8, remainder);\n\n        result += alphabet[index];\n    }\n\n    return result;\n}\n\nexport function toCustomBase(bytes: ArrayBuffer, alphabet: string): string {\n    const alphabetLength: bigint = BigInt(alphabet.length);\n\n    let result: string = '';\n    let number: bigint = arrayBufferToUnsignedBigInt(bytes);\n\n    while (number > 0n) {\n        const remainder: bigint = number % alphabetLength;\n        number /= alphabetLength;\n\n        const index: number = <number><any>BigInt.asUintN(8, remainder);\n\n        result += alphabet[index];\n    }\n\n    return result;\n}\n\nexport function fromCustomBase(input: string, alphabet: string): ArrayBuffer {\n    const alphabetLength: bigint = BigInt(alphabet.length);\n\n    let number: bigint = 0n;\n    let multiplier: bigint = 1n;\n\n    for (let i: number = 0; i < input.length; i += 1) {\n        const value: bigint = BigInt(alphabet.indexOf(input[i]));\n\n        number += value * multiplier;\n        multiplier *= alphabetLength;\n    }\n\n    return unsignedBigIntToArrayBuffer(number);\n}\n\nexport function toBase16(buffer: ArrayBuffer): string {\n    return Array.prototype.map.call(\n        new Uint8Array(buffer),\n        (x: number) => ('00' + x.toString(16)).slice(-2)\n    ).join('');\n}\n\n// Code in functions toCustomBaseFast and fromCustomBaseFast is taken from https://www.browserling.com/tools/base58-encode and adjusted.\n\nexport function toCustomBaseFast(input: ArrayBuffer, alphabet: string): string {\n    if (alphabet.length < 2) {\n        throw new Error('Alphabet does not contain enough characters, at least 2 are required.');\n    }\n\n    if (input.byteLength === 0) {\n        return '';\n    }\n\n    const arrayView: DataView = new DataView(input, 0);\n\n    let carry: number = 0;\n    const digits: number[] = [0]\n\n    for (let i = 0; i < input.byteLength; i++) {\n        for (let j = 0; j < digits.length; j++) {\n            digits[j] <<= 8;\n        }\n\n        digits[0] += arrayView.getUint8(i);\n\n        carry = 0;\n\n        for (let j = 0; j < digits.length; j++) {\n            digits[j] += carry;\n            carry = (digits[j] / alphabet.length) | 0;\n            digits[j] %= alphabet.length;\n        }\n\n        while (carry > 0) {\n            digits.push(carry % alphabet.length);\n            carry = (carry / alphabet.length) | 0;\n        }\n    }\n\n    for (let i = 0; arrayView.getUint8(i) === 0 && i < input.byteLength - 1; i++) {\n        digits.push(0);\n    }\n\n    let result = '';\n\n    for (let i = digits.length - 1; i >= 0; i--) {\n        result += alphabet[digits[i]];\n    }\n\n    return result;\n}\n\nexport function fromCustomBaseFast(input: string, alphabet: string): ArrayBuffer {\n    if (alphabet.length < 2) {\n        throw new Error('Alphabet does not contain enough characters, at least 2 are required.');\n    }\n\n    if (input.length === 0) {\n        return new ArrayBuffer(0);\n    }\n\n    for (let i = 0; i < input.length; i++) {\n        if (alphabet.includes(input[i]) === false) {\n            throw new Error(`Base${alphabet.length} alphabet '${alphabet}' does not contain character '${input[i]}'.`);\n        }\n    }\n\n    const bytes: number[] = [0];\n    let carry = 0;\n\n    for (let i = 0; i < input.length; i++) {\n        const c = input[i];\n\n        for (let j = 0; j < bytes.length; j++) {\n            bytes[j] *= alphabet.length;\n        }\n\n        bytes[0] += alphabet.indexOf(c);\n\n        carry = 0;\n\n        for (let j = 0; j < bytes.length; j++) {\n            bytes[j] += carry;\n            carry = bytes[j] >> 8;\n            bytes[j] &= 0xFF;\n        }\n\n        while (carry > 0) {\n            bytes.push(carry & 0xFF);\n            carry >>= 8;\n        }\n    }\n\n    for (let i = 0; input[i] === alphabet[0] && i < input.length - 1; i++) {\n        bytes.push(0);\n    }\n\n    return new Uint8Array(bytes.reverse()).buffer;\n}\n","export class TaskCancelledError extends Error {\n    private _name: string;\n\n    public get name(): string {\n        return this._name;\n    }\n\n    constructor(message?: string) {\n        super(message);\n        this._name = TaskCancelledError.ERROR_NAME;\n        Object.setPrototypeOf(this, new.target.prototype);\n    }\n\n    public static readonly ERROR_NAME: string = 'TaskCancelledError';\n\n    public static isMatching(error: Error) {\n        return error && error.name === TaskCancelledError.ERROR_NAME;\n    }\n}\n\nexport class CancellationTokenSource {\n    private _isCancelled: boolean = false;\n    private _token: CancellationToken;\n\n    constructor() {\n        this._token = new CancellationToken(this);\n    }\n\n    public get isCancelled(): boolean {\n        return this._isCancelled;\n    }\n\n    public get token(): CancellationToken {\n        return this._token;\n    }\n\n    public cancel(): void {\n        this._isCancelled = true;\n    }\n}\n\nexport class CancellationToken {\n    private static _none: CancellationToken | null = null;\n    public static get none(): CancellationToken {\n        if (CancellationToken._none === null) {\n            CancellationToken._none = new CancellationToken(new CancellationTokenSource());\n        }\n        return CancellationToken._none;\n    }\n\n    constructor(private source: CancellationTokenSource) {\n    }\n\n    public get isCancelled(): boolean {\n        return this.source.isCancelled;\n    }\n}\n\nexport function ensureNotCancelled(cancellationToken: CancellationToken): void {\n    if (cancellationToken.isCancelled) {\n        throw new TaskCancelledError();\n    }\n}\n\nexport function rethrowCancelled(error: Error): void {\n    if (TaskCancelledError.isMatching(error)) {\n        throw error;\n    }\n}\n\nexport type TaskFactory<T> = (cancellationToken: CancellationToken) => Promise<T>;\n\n// Manages the lifetime of a single task, and automatically cancels the previous when running a new one.\n// It also awaits for previous task to be fully terminated before running the new one.\nexport class TaskRunner<TValue> {\n    private currentTokenSource: CancellationTokenSource | null = null;\n    private currentTask: Promise<TValue | undefined> | null = null;\n    private microThreadId: number = 0;\n\n    // Gets a value indicating whether a task is currently running or not.\n    public get isRunning(): boolean {\n        return this.currentTask !== null;\n    }\n\n    // Cancels the currently running task, if any.\n    // Returns true if no one called cancelInternal() when it returns.\n    private async cancelInternal(throwTaskCanceledError: boolean): Promise<boolean> {\n        if (this.microThreadId === Number.MAX_SAFE_INTEGER) {\n            this.microThreadId = 0;\n        } else {\n            this.microThreadId = this.microThreadId + 1;\n        }\n\n        const localMicroThreadId: number = this.microThreadId;\n\n        // This corresponds to the end of cancelAndExecute().\n        if (this.currentTask === null) {\n            return true;\n        }\n\n        if (this.currentTokenSource !== null) {\n            this.currentTokenSource.cancel();\n\n            // The above currentTokenSource.cancel() can run the finally block of cancelAndExecute() and set currentTask to null.\n            if (this.currentTask !== null) {\n                try {\n                    await this.currentTask;\n                } catch (error) {\n                    if (TaskCancelledError.isMatching(error as Error)) {\n                        if (throwTaskCanceledError) {\n                            throw error;\n                        }\n                    } else {\n                        throw error;\n                    }\n                }\n            }\n        }\n\n        return localMicroThreadId === this.microThreadId;\n    }\n\n    // Cancels the currently running task, if any.\n    // throwTaskCanceledError: Pass true allow to throw a TaskCancelledError.\n    // Returns a Promise that completes when the current job is fully cancelled.\n    public async cancel(throwTaskCanceledError: boolean = false): Promise<void> {\n        await this.cancelInternal(throwTaskCanceledError);\n    }\n\n    // Cancels the current task if any, and runs a new one.\n    // T: Type of value returned by the task to run.\n    // taskFactory: A task producer that receives a CancellationToken.\n    // throwTaskCanceledError: Pass true allow to throw a TaskCancelledError.\n    // Returns the task produced by the taskFactory.\n    public async cancelAndExecute(taskFactory: TaskFactory<TValue>, throwTaskCanceledError: boolean = false): Promise<TValue | undefined> {\n        if (await this.cancelInternal(throwTaskCanceledError) === false) {\n            if (throwTaskCanceledError === false) {\n                return undefined;\n            }\n            throw new TaskCancelledError();\n        }\n\n        var localToken = new CancellationTokenSource();\n        this.currentTokenSource = localToken;\n\n        try {\n            this.currentTask = taskFactory(this.currentTokenSource.token);\n            return await this.currentTask;\n        } catch (error) {\n            if (TaskCancelledError.isMatching(error as Error) && throwTaskCanceledError === false) {\n                return undefined;\n            }\n            throw error;\n        } finally {\n            this.currentTask = null;\n        }\n    }\n}\n","import { Base58Encoding, IEncoding } from './encoding';\nimport { CancellationToken, ensureNotCancelled } from './asyncUtils';\n\nconst encoding: IEncoding = new Base58Encoding();\n\nexport interface IPasswordGenerator {\n    readonly version: number;\n    readonly description: string;\n    generatePassword(privatePart: ArrayBuffer, publicPart: ArrayBuffer, cancellationToken: CancellationToken): Promise<ArrayBuffer>;\n}\n\nexport interface ICipher {\n    readonly version: number;\n    readonly description: string;\n    encrypt(input: ArrayBuffer, password: ArrayBuffer, cancellationToken: CancellationToken): Promise<ArrayBuffer>;\n    decrypt(input: ArrayBuffer, password: ArrayBuffer, cancellationToken: CancellationToken): Promise<ArrayBuffer>;\n}\n\nexport async function getDerivedBytes(password: ArrayBuffer, salt: ArrayBuffer, iterations: number, cancellationToken: CancellationToken): Promise<ArrayBuffer> {\n    const baseKey: CryptoKey = await window.crypto.subtle.importKey(\n        'raw',\n        password,\n        'PBKDF2',\n        false,\n        ['deriveKey']\n    );\n\n    ensureNotCancelled(cancellationToken);\n\n    const algorithm: Pbkdf2Params = {\n        name: 'PBKDF2',\n        hash: 'SHA-512',\n        iterations: iterations,\n        salt\n    };\n\n    const derivedKeyType: AesDerivedKeyParams = {\n        // Algorithm name must be a recognized one,\n        // but any AES-* produces the same result...\n        name: 'AES-GCM',\n        length: 256\n    };\n\n    const result: CryptoKey = await window.crypto.subtle.deriveKey(\n        algorithm,\n        baseKey,\n        derivedKeyType,\n        true,\n        ['encrypt']\n    );\n\n    ensureNotCancelled(cancellationToken);\n\n    const key: ArrayBuffer = await window.crypto.subtle.exportKey('raw', result);\n\n    ensureNotCancelled(cancellationToken);\n\n    return key;\n}\n\nexport function generateRandomBytes(byteCount: number = 64): ArrayBuffer {\n    const array: Uint8Array = new Uint8Array(byteCount);\n    return crypto.getRandomValues(array).buffer;\n}\n\nexport function generateRandomString(byteCount: number = 64): string {\n    const array: ArrayBuffer = generateRandomBytes(byteCount);\n    return encoding.encode(array);\n}\n","function findNonCharFromStart(value: string, chars: string[]): number {\n    for (let i = 0; i < value.length; i += 1) {\n        if (chars.includes(value[i]) === false) {\n            return i;\n        }\n    }\n\n    return value.length;\n}\n\nfunction findNonCharFromEnd(value: string, chars: string[]): number {\n    for (let i = value.length - 1; i >= 0; i -= 1) {\n        if (chars.includes(value[i]) === false) {\n            return i + 1;\n        }\n    }\n\n    return value.length;\n}\n\nexport function trim(value: string, ...chars: string[]): string {\n    const start: number = findNonCharFromStart(value, chars);\n    const end: number = findNonCharFromEnd(value, chars);\n\n    return value.substring(start, end);\n}\n\nexport function truncate(input: string, length: number): string {\n    if (input.length <= length) {\n        return input;\n    }\n\n    return input.substring(0, length);\n}\n\nexport function stringToArray(str: string): ArrayBuffer {\n    const encoder = new TextEncoder(/*'utf-8'*/);\n    return encoder.encode(str).buffer;\n}\n\nexport function fromBase16(str: string): ArrayBuffer {\n    if (str.length % 2 !== 0) {\n        str = '0' + str;\n    }\n\n    const result: Uint8Array = new Uint8Array(str.length / 2);\n\n    for (let i = 0; i < result.byteLength; i += 1) {\n        const position = i * 2;\n        result[i] = parseInt(str.substring(position, position + 2), 16);\n    }\n\n    return result.buffer;\n}\n\nexport function escapeAndDecodeUtfString(utfString: string): string {\n    return decodeURIComponent(escape(utfString));\n}\n","export type PlainObject = { [key: string]: any };\n\nexport function isPlainObject(value: any): boolean {\n    return value !== undefined &&\n        value !== null &&\n        value.hasOwnProperty('constructor') === false &&\n        value.constructor.name === 'Object';\n}\n\nexport function objectDeepSort(object: PlainObject): PlainObject {\n    const output: PlainObject = {};\n\n    for (const [key, value] of Object.entries(object).sort((a, b) => a[0].localeCompare(b[0]))) {\n        output[key] = isPlainObject(value) ? objectDeepSort(value) : value;\n    }\n\n    return output;\n}\n","type ServiceContainer = { [key: string]: any };\n\nconst services: ServiceContainer = {};\n\nexport function listServices(): string[] {\n    return Object.keys(services);\n}\n\nexport function getService(serviceName: string): any {\n    if (!serviceName) {\n        throw new TypeError(`Argument 'serviceName' is mandatory.`);\n    }\n\n    const service = services[serviceName];\n\n    if (service === undefined) {\n        throw new Error(`Service '${serviceName}' is not registered.`);\n    }\n\n    return service;\n}\n\nexport function registerService(serviceName: string, instance: any): void {\n    if (!serviceName) {\n        throw new TypeError(`Argument 'serviceName' is mandatory.`);\n    }\n    if (instance === undefined) {\n        throw new TypeError(`Argument 'instance' cannot be undefined.`);\n    }\n\n    if (services[serviceName] !== undefined) {\n        throw new Error(`Service '${serviceName}' is already registered.`);\n    }\n\n    services[serviceName] = instance;\n}\n","import { SecureLocalStorage } from './SecureLocalStorage';\nimport { IVaultStorage } from './IVaultStorage';\nimport { PlainObject } from '../PlainObject';\n\ninterface IGitHubContent {\n    sha: string;\n    content: string;\n}\n\nabstract class GitHubVaultStorageBase implements IVaultStorage {\n    static BASE_URL: string = 'https://api.github.com';\n    static AUTH_TOKEN_KEY_NAME: string = 'GitHubVaultStorageBase.AuthToken';\n\n    static LOCAL_STORAGE_KEY_USERNAME: string = 'GitHubVaultStorageBase.Username';\n    static LOCAL_STORAGE_KEY_REPO: string = 'GitHubVaultStorageBase.Repository';\n    static LOCAL_STORAGE_KEY_FILENAME: string = 'GitHubVaultStorageBase.Filename';\n\n    private token: string | null = null;\n    private oneTimePassword: string | null = null;\n    private currentVaultContentHash: string | null = null;\n\n    private username: string | null = null;\n    private repositoryName: string | null = null;\n    private vaultFilename: string | null = null;\n\n    protected getUsername(): string | null {\n        return this.username;\n    }\n\n    protected getRepositoryName(): string | null {\n        return this.repositoryName;\n    }\n\n    protected getVaultFilename(): string | null {\n        return this.vaultFilename;\n    }\n\n    public constructor(protected secureLocalStorage: SecureLocalStorage) {\n    }\n\n    public clear(): void {\n        this.secureLocalStorage.removeItem(GitHubVaultStorageBase.LOCAL_STORAGE_KEY_USERNAME);\n        this.secureLocalStorage.removeItem(GitHubVaultStorageBase.LOCAL_STORAGE_KEY_REPO);\n        this.secureLocalStorage.removeItem(GitHubVaultStorageBase.LOCAL_STORAGE_KEY_FILENAME);\n\n        this.secureLocalStorage.removeItem(GitHubVaultStorageBase.AUTH_TOKEN_KEY_NAME);\n    }\n\n    private constructTokenAuthString(): string {\n        return `token ${this.token}`;\n    }\n\n    private constructFetchRequest(method: string, authHeader: string, body: any): RequestInit {\n        const headers: PlainObject = {\n            'Accept': 'application/vnd.github.v3+json',\n            'Content-Type': 'application/json',\n            'Authorization': authHeader\n        };\n\n        if (this.oneTimePassword) {\n            headers['x-github-otp'] = this.oneTimePassword;\n        }\n\n        return {\n            method,\n            headers,\n            body: body ? JSON.stringify(body) : undefined\n        };\n    }\n\n    private constructUrl(relativeUrl: string): string {\n        return `${GitHubVaultStorageBase.BASE_URL}${relativeUrl}`;\n    }\n\n    protected async request(retryOnUnauthorized: boolean, method: string, relativeUrl: string, authHeader: string, body: any = undefined): Promise<Response | null> {\n        const url: string = this.constructUrl(relativeUrl);\n        const requestInfo: RequestInit = this.constructFetchRequest(method, authHeader, body);\n\n        let response: Response = await fetch(url, requestInfo);\n\n        if (response.status === 401 && retryOnUnauthorized) {\n            this.oneTimePassword = prompt('Input your 2FA code:');\n\n            if (!this.oneTimePassword) {\n                return null;\n            }\n\n            return await this.request(retryOnUnauthorized, method, relativeUrl, authHeader, body);\n        }\n\n        return response;\n    }\n\n    protected getSetVaultParameter(key: string, promptText: string, defaultValue?: string): string | null {\n        let value: string | null = window.localStorage.getItem(key);\n\n        if (value) {\n            return value;\n        }\n\n        value = prompt(promptText, defaultValue);\n\n        if (!value) {\n            return null;\n        }\n\n        window.localStorage.setItem(key, value);\n\n        return value;\n    }\n\n    protected ensureVaultParameters(): Promise<boolean> {\n        const url = new URL(window.location.toString());\n\n        let defaultAccountUsername = '';\n        let defaultRepo = '';\n\n        if (url.hostname === 'github.com') {\n            const pathElements = url.pathname.split('/');\n            if (pathElements.length >= 3) {\n                defaultAccountUsername = pathElements[1];\n                defaultRepo = `${pathElements[2]}Vault`;\n            }\n        }\n\n        if (!defaultRepo) {\n            defaultRepo = 'ItchyPasswordVault';\n        }\n\n        const username = this.getSetVaultParameter(GitHubVaultStorageBase.LOCAL_STORAGE_KEY_USERNAME, 'GitHub account username:', defaultAccountUsername);\n        if (!username) {\n            return Promise.resolve(false);\n        }\n        this.username = username;\n\n        const repositoryName: string | null = this.getSetVaultParameter(GitHubVaultStorageBase.LOCAL_STORAGE_KEY_REPO, 'Vault GitHub repository name:', defaultRepo);\n        if (!repositoryName) {\n            return Promise.resolve(false);\n        }\n        this.repositoryName = repositoryName;\n\n        const vaultFilename: string | null = this.getSetVaultParameter(GitHubVaultStorageBase.LOCAL_STORAGE_KEY_FILENAME, 'Vault filename:', 'vault.json');\n        if (!vaultFilename) {\n            return Promise.resolve(false);\n        }\n        this.vaultFilename = vaultFilename;\n\n        return Promise.resolve(true);\n    }\n\n    protected abstract getToken(): Promise<string | null>;\n\n    private async ensureToken(): Promise<boolean> {\n        let token: string | null = await this.secureLocalStorage.getItem(GitHubVaultStorageBase.AUTH_TOKEN_KEY_NAME);\n\n        if (token === null) {\n            token = await this.getToken();\n\n            if (token === null) {\n                return false;\n            }\n        }\n\n        await this.secureLocalStorage.setItem(GitHubVaultStorageBase.AUTH_TOKEN_KEY_NAME, token);\n\n        this.token = token;\n\n        return true;\n    }\n\n    private constructVaultFileUrl() {\n        return `/repos/${this.username}/${this.repositoryName}/contents/${this.vaultFilename}`;\n    }\n\n    public async getVaultContent(): Promise<string | null> {\n        if (await this.ensureVaultParameters() === false) {\n            return null;\n        }\n        if (await this.ensureToken() === false) {\n            return null;\n        }\n\n        const url: string = this.constructVaultFileUrl();\n        const response: Response | null = await this.request(false, 'GET', url, this.constructTokenAuthString());\n\n        if (response === null) {\n            console.warn('Fetching vault content aborted.');\n            return null;\n        }\n\n        if (response.ok === false) {\n            if (response.status === 401) {\n                this.secureLocalStorage.removeItem(GitHubVaultStorageBase.AUTH_TOKEN_KEY_NAME);\n                this.token = null;\n                this.oneTimePassword = null;\n\n                return await this.getVaultContent();\n            } else if (response.status === 404) {\n                if (await this.setVaultContent('{}', '[ItchyPassword] Creation of vault file')) {\n                    return '{}';\n                }\n                return null;\n            }\n\n            console.error(`Failed to fetch vault file '${this.vaultFilename}'.`, response);\n\n            return null;\n        }\n\n        const responseContent: IGitHubContent = await response.json();\n\n        this.currentVaultContentHash = responseContent.sha;\n\n        const decodedContent = atob(responseContent.content);\n\n        if (decodedContent.trim() === '') {\n            return '{}';\n        }\n\n        return decodedContent;\n    }\n\n    public async setVaultContent(newContent: string, updateMessage: string): Promise<boolean> {\n        if (await this.ensureVaultParameters() === false) {\n            return false;\n        }\n        if (await this.ensureToken() === false) {\n            return false;\n        }\n\n        const body = {\n            message: updateMessage,\n            content: btoa(newContent),\n            sha: this.currentVaultContentHash\n        };\n\n        const url: string = this.constructVaultFileUrl();\n        const response: Response | null = await this.request(false, 'PUT', url, this.constructTokenAuthString(), body);\n\n        if (response === null) {\n            console.warn('Push new vault content aborted.');\n            return false;\n        }\n\n        const responseContent: any = await response.json();\n\n        if (response.ok === false) {\n            console.error(`Failed to create/update vault file '${this.vaultFilename}'.`, response, responseContent);\n            return false;\n        }\n\n        this.currentVaultContentHash = (responseContent.content as IGitHubContent).sha;\n\n        return true;\n    }\n\n    public getVaultSettings(): string {\n        const username = window.localStorage.getItem(GitHubVaultStorageBase.LOCAL_STORAGE_KEY_USERNAME);\n        const repositoryName = window.localStorage.getItem(GitHubVaultStorageBase.LOCAL_STORAGE_KEY_REPO);\n        const vaultFilename = window.localStorage.getItem(GitHubVaultStorageBase.LOCAL_STORAGE_KEY_FILENAME);\n\n        const usernameDisplay = username == null ? '<null>' : `'${username}'`;\n        const repositoryNameDisplay = repositoryName == null ? '<null>' : `'${repositoryName}'`;\n        const vaultFilenameDisplay = vaultFilename == null ? '<null>' : `'${vaultFilename}'`;\n\n        return `username: ${usernameDisplay}\\nrepository name: ${repositoryNameDisplay}\\nvault filename: ${vaultFilenameDisplay}`;\n    }\n}\n\n// ================================================================================================\n\nexport class GitHubPersonalAccessTokenVaultStorage extends GitHubVaultStorageBase {\n    protected getToken(): Promise<string | null> {\n        const authToken: string | null = prompt('Personal access token:');\n        return Promise.resolve(authToken);\n    }\n}\n","import { PlainObject } from 'PlainObject';\nimport { CipherComponent, findLatestCipher } from '../components/cipherComponent';\n\nexport class CipherService {\n    private latestVersion: number;\n\n    public constructor(private readonly cipherComponent: CipherComponent) {\n        this.latestVersion = findLatestCipher().version\n    }\n\n    public isLatestVersion(version: number): boolean {\n        return version === this.getLatestVersion();\n    }\n\n    public getLatestVersion(): number {\n        return this.latestVersion;\n    }\n\n    public async activate(storageFullPath: string, cipherName: string, parameterKeys: PlainObject): Promise<boolean> {\n        if (await this.cipherComponent.setParameters(cipherName, parameterKeys, storageFullPath) === false) {\n            return false;\n        }\n\n        this.cipherComponent.getTabButton().click();\n\n        return true;\n    }\n}\n","import * as crypto from '../crypto';\nimport * as stringUtils from '../stringUtils';\nimport * as arrayUtils from '../arrayUtils';\n\nimport * as ui from '../ui';\nimport { getPrivatePart } from './privatePartComponent';\n\nimport { IEncoding, availableEncodings, findEncodingByName } from '../encoding';\n\nimport { CipherV2 } from '../ciphers/v2';\nimport { CipherV3 } from '../ciphers/v3';\nimport { ITabInfo } from '../TabControl';\nimport { IComponent } from './IComponent';\n\nimport * as storageOutputComponent from './storageOutputComponent';\n\nimport * as serviceManager from '../services/serviceManger';\nimport { CipherService } from '../services/cipherService';\n\nimport { CancellationToken, ensureNotCancelled, rethrowCancelled } from '../asyncUtils';\nimport { PlainObject } from '../PlainObject';\n\nexport const RECOMMENDED_ENCODING_NAME = 'base58';\nexport const LEGACY_ENCODING_NAME = 'base62';\n\nconst btnTabCiphers = ui.getElementById('btnTabCiphers') as HTMLButtonElement;\nconst divTabCiphers = ui.getElementById('divTabCiphers');\n\nexport const ciphers: crypto.ICipher[] = [\n    new CipherV2(),\n    new CipherV3(),\n];\n\nconst btnClearAllCipherInfo = ui.getElementById('btnClearAllCipherInfo') as HTMLButtonElement;\n\nconst txtCipherName = ui.getElementById('txtCipherName') as HTMLInputElement;\nconst txtCipherSource = ui.getElementById('txtCipherSource') as HTMLInputElement;\nconst txtCipherTarget = ui.getElementById('txtCipherTarget') as HTMLInputElement;\n\nconst cboCipherVersion = ui.getElementById('cboCipherVersion') as HTMLSelectElement;\nconst cboCipherEncoding = ui.getElementById('cboCipherEncoding') as HTMLSelectElement;\nconst btnEncrypt = ui.getElementById('btnEncrypt') as HTMLButtonElement;\nconst btnDecrypt = ui.getElementById('btnDecrypt') as HTMLButtonElement;\n\nconst spnCipherSourceLength = ui.getElementById('spnCipherSourceLength') as HTMLSpanElement;\nconst btnCopyCipherSource = ui.getElementById('btnCopyCipherSource') as HTMLButtonElement;\nconst btnClearCipherSource = ui.getElementById('btnClearCipherSource') as HTMLButtonElement;\n\nconst spnCipherTargetLength = ui.getElementById('spnCipherTargetLength') as HTMLSpanElement;\nconst btnCopyCipherTarget = ui.getElementById('btnCopyCipherTarget') as HTMLButtonElement;\nconst btnClearCipherTarget = ui.getElementById('btnClearCipherTarget') as HTMLButtonElement;\n\nlet cipherTargetLastChange: string | undefined;\n\nexport function findCipherByVersion(version: number): crypto.ICipher | null {\n    for (const cipher of ciphers) {\n        if (cipher.version === version) {\n            return cipher;\n        }\n    }\n\n    return null;\n}\n\nexport function findLatestCipher(): crypto.ICipher {\n    if (ciphers.length === 0) {\n        throw new Error('No ciphers registered.');\n    }\n\n    let bestCipher: crypto.ICipher = ciphers[0];\n\n    for (const cipher of ciphers) {\n        if (cipher.version > bestCipher.version) {\n            bestCipher = cipher;\n        }\n    }\n\n    return bestCipher;\n}\n\nfunction findCipherVersionDropdownIndexByVersion(version: number): number {\n    for (let i = 0; i < ciphers.length; i++) {\n        if (ciphers[i].version === version) {\n            return i;\n        }\n    }\n\n    return -1;\n}\n\nfunction findCipherEncodingDropdownIndexByName(name: string): number {\n    for (let i = 0; i < availableEncodings.length; i++) {\n        if (availableEncodings[i].name === name) {\n            return i;\n        }\n    }\n\n    return -1;\n}\n\nfunction clearSourceVisualCue(): void {\n    txtCipherSource.style.removeProperty('background-color');\n}\n\nfunction clearTargetVisualCue(): void {\n    txtCipherTarget.style.removeProperty('background-color');\n}\n\nfunction clearEncodingVisualCue(): void {\n    cboCipherEncoding.style.removeProperty('background-color');\n}\n\nfunction setSourceVisualCueError() {\n    txtCipherSource.style.setProperty('background-color', ui.ERROR_COLOR);\n}\n\nfunction setTargetVisualCueError() {\n    txtCipherTarget.style.setProperty('background-color', ui.ERROR_COLOR);\n}\n\nfunction setEncodingVisualCueError() {\n    cboCipherEncoding.style.setProperty('background-color', ui.ERROR_COLOR);\n}\n\nfunction clearAllVisualCues(): void {\n    clearSourceVisualCue();\n    clearTargetVisualCue();\n    clearEncodingVisualCue();\n}\n\nfunction clearCipherTargetLastUpdate(): void {\n    cipherTargetLastChange = undefined;\n}\n\nfunction updateCipherTargetLastUpdate(): void {\n    cipherTargetLastChange = new Date().toISOString();\n}\n\nfunction updateCipherSourceLength(): void {\n    spnCipherSourceLength.innerText = txtCipherSource.value.length.toString();\n}\n\nfunction updateCipherTargetLength(): void {\n    spnCipherTargetLength.innerText = txtCipherTarget.value.length.toString();\n}\n\nfunction setCipherTargetValue(value: string, isEncrypt: boolean): void {\n    const needDateTimeUpdate = value.length > 0 && txtCipherTarget.value !== value;\n\n    txtCipherTarget.value = value;\n    updateCipherTargetLength();\n\n    if (needDateTimeUpdate && isEncrypt) {\n        updateCipherTargetLastUpdate();\n    } else {\n        clearCipherTargetLastUpdate();\n    }\n\n    onCipherTargetChanged();\n}\n\nfunction onCipherTargetChanged(): void {\n    updateCipherParameters();\n}\n\nfunction updateCipherParameters(): void {\n    const encodingIndex = cboCipherEncoding.selectedIndex;\n\n    const isValidEncodingIndex = encodingIndex >= 0 && encodingIndex < availableEncodings.length;\n\n    if (txtCipherTarget.value === '' || txtCipherName.value === '' || isValidEncodingIndex === false) {\n        storageOutputComponent.clearOutputs();\n        return;\n    }\n\n    const cipherParameters = {\n        datetime: cipherTargetLastChange,\n        version: ciphers[cboCipherVersion.selectedIndex].version,\n        encoding: availableEncodings[encodingIndex].name,\n        value: txtCipherTarget.value\n    }\n\n    const path = `ciphers/${txtCipherName.value}`;\n\n    storageOutputComponent.setParameters(cipherParameters, path);\n}\n\nexport async function encryptString(value: string, cipher: crypto.ICipher, encoding: IEncoding, cancellationToken: CancellationToken): Promise<string | null> {\n    const privatePart: string = getPrivatePart();\n\n    if (privatePart.length === 0) {\n        console.warn('Private part is empty');\n        return null;\n    }\n\n    const input: ArrayBuffer = stringUtils.stringToArray(value);\n    const password: ArrayBuffer = stringUtils.stringToArray(privatePart);\n\n    const encrypted: ArrayBuffer = await cipher.encrypt(input, password, cancellationToken);\n\n    ensureNotCancelled(cancellationToken);\n\n    return encoding.encode(encrypted);\n}\n\nexport async function decryptStringWithCipher(value: string, cipher: crypto.ICipher, encoding: IEncoding, cancellationToken: CancellationToken): Promise<string | null> {\n    const privatePart: string = getPrivatePart();\n\n    if (privatePart.length === 0) {\n        console.warn('Private part is empty');\n        return null;\n    }\n\n    try {\n        const input: ArrayBuffer = encoding.decode(value);\n        const password: ArrayBuffer = stringUtils.stringToArray(privatePart);\n\n        const decrypted: ArrayBuffer = await cipher.decrypt(input, password, cancellationToken);\n\n        ensureNotCancelled(cancellationToken);\n\n        return arrayUtils.arrayToString(decrypted);\n    } catch (error) {\n        const typedError = error as Error;\n\n        rethrowCancelled(typedError);\n\n        console.warn(`Failed to decrypt${typedError.message ? `, error: ${typedError.message}` : ', no error message'}`);\n        return null;\n    }\n}\n\nexport async function decryptStringWithVersion(value: string, version: number, encoding: IEncoding, cancellationToken: CancellationToken): Promise<string | null> {\n    const cipher = findCipherByVersion(version);\n\n    if (cipher === null) {\n        throw new Error(`Failed to find cip[her for version ${version}.`);\n    }\n\n    return decryptStringWithCipher(value, cipher, encoding, cancellationToken);\n}\n\nasync function onEncryptButtonClick(): Promise<boolean> {\n    txtCipherSource.focus();\n    setCipherTargetValue('', true);\n    clearAllVisualCues();\n\n    if (txtCipherSource.value.length === 0) {\n        setSourceVisualCueError();\n        return false;\n    }\n\n    const encoding: IEncoding = availableEncodings[cboCipherEncoding.selectedIndex];\n\n    const encryptedString: string | null = await encryptString(\n        txtCipherSource.value,\n        ciphers[cboCipherVersion.selectedIndex],\n        encoding,\n        CancellationToken.none\n    );\n\n    if (encryptedString === null) {\n        return false;\n    }\n\n    setCipherTargetValue(encryptedString, true);\n    updateCipherParameters();\n\n    return true;\n}\n\nasync function onDecryptButtonClick(): Promise<boolean> {\n    txtCipherSource.focus();\n    setCipherTargetValue('', false);\n    clearAllVisualCues();\n\n    if (txtCipherSource.value.length === 0) {\n        setSourceVisualCueError();\n        return false;\n    }\n\n    if (cboCipherEncoding.selectedIndex < 0 || cboCipherEncoding.selectedIndex >= availableEncodings.length) {\n        setEncodingVisualCueError();\n        return false;\n    }\n\n    const encoding: IEncoding = availableEncodings[cboCipherEncoding.selectedIndex];\n\n    const decryptedString: string | null = await decryptStringWithCipher(\n        txtCipherSource.value,\n        ciphers[cboCipherVersion.selectedIndex],\n        encoding,\n        CancellationToken.none\n    );\n\n    if (decryptedString === null) {\n        setTargetVisualCueError();\n        return false;\n    }\n\n    setCipherTargetValue(decryptedString, false);\n\n    return true;\n}\n\nfunction setupCipherVersionsDropdown() {\n    for (const cipher of ciphers) {\n        const option = document.createElement('option');\n        option.text = `v${cipher.version}`;\n        cboCipherVersion.appendChild(option);\n    }\n\n    cboCipherVersion.selectedIndex = cboCipherVersion.options.length - 1;\n}\n\nfunction setupCipherEncodingDropdown() {\n    for (const encoding of availableEncodings) {\n        const option = document.createElement('option');\n        option.text = encoding.name;\n        option.title = encoding.description;\n        cboCipherEncoding.appendChild(option);\n    }\n\n    cboCipherEncoding.selectedIndex = findCipherEncodingDropdownIndexByName(RECOMMENDED_ENCODING_NAME);\n}\n\nexport class CipherComponent implements IComponent, ITabInfo {\n    public readonly name: string = 'Cipher';\n\n    public getTabButton(): HTMLButtonElement {\n        return btnTabCiphers;\n    }\n\n    public getTabContent(): HTMLElement {\n        return divTabCiphers;\n    }\n\n    public onTabSelected(): void {\n        storageOutputComponent.show();\n        updateCipherParameters();\n        txtCipherName.focus();\n    }\n\n    private static fullPathToStoragePath(fullPath: string, cipherName: string): string | null {\n        const prefix = '<root>/';\n        const suffix = `/ciphers/${cipherName}`;\n\n        if (fullPath.startsWith(prefix) === false) {\n            return null;\n        }\n\n        if (fullPath.endsWith(suffix) === false) {\n            return null;\n        }\n\n        return fullPath.substring(prefix.length, fullPath.length - suffix.length);\n    }\n\n    public async setParameters(cipherName: string, parameterKeys: PlainObject, storageFullPath: string): Promise<boolean> {\n        txtCipherName.value = '';\n        txtCipherSource.value = '';\n        updateCipherSourceLength();\n        txtCipherTarget.value = '';\n        updateCipherTargetLength();\n        cboCipherVersion.selectedIndex = cboCipherVersion.options.length - 1;\n        cboCipherEncoding.selectedIndex = findCipherEncodingDropdownIndexByName(RECOMMENDED_ENCODING_NAME);\n        storageOutputComponent.setPathUI('');\n        storageOutputComponent.setCustomKeysUI('');\n\n        const encodingName: string = parameterKeys.encoding ?? LEGACY_ENCODING_NAME;\n\n        const encoding: IEncoding | null = findEncodingByName(encodingName);\n\n        if (encoding === null) {\n            throw new Error(`Failed to find encoding '${encodingName}'.`);\n        }\n\n        const decrypted: string | null = await decryptStringWithVersion(\n            parameterKeys.value,\n            parameterKeys.version,\n            encoding,\n            CancellationToken.none\n        );\n\n        if (decrypted === null) {\n            alert(`Failed to decrypt cipher '${cipherName}'.`);\n            return false;\n        }\n\n        const storagePath: string | null = CipherComponent.fullPathToStoragePath(storageFullPath, cipherName);\n\n        if (storagePath === null) {\n            console.error(`Failed to retrieve storage path from full path '${storageFullPath}'.`);\n            alert('Failed to retrieve storage path from full path.');\n            return false;\n        }\n\n        if (parameterKeys.customKeys) {\n            storageOutputComponent.setCustomKeysUI(JSON.stringify(parameterKeys.customKeys, null, 4));\n        }\n\n        delete parameterKeys.customKeys;\n\n        txtCipherName.value = cipherName;\n\n        txtCipherSource.value = decrypted;\n        updateCipherSourceLength();\n\n        cboCipherVersion.selectedIndex = findCipherVersionDropdownIndexByVersion(parameterKeys.version);\n        cboCipherEncoding.selectedIndex = findCipherEncodingDropdownIndexByName(encodingName);\n\n        storageOutputComponent.setPathUI(storagePath);\n        storageOutputComponent.setParameters(parameterKeys, `ciphers/${cipherName}`);\n\n        return true;\n    }\n\n    public getVaultHint(): string {\n        return `${this.name.toLowerCase()} '${txtCipherName.value}'`;\n    }\n\n    public init(): void {\n        const errorLogsService = serviceManager.getService('errorLogs');\n        const logFunc = errorLogsService.createLogErrorMessageFunction();\n\n        ui.setupCopyButton(txtCipherSource, btnCopyCipherSource, logFunc);\n        ui.setupCopyButton(txtCipherTarget, btnCopyCipherTarget, logFunc);\n\n        ui.setupFeedbackButton(btnEncrypt, onEncryptButtonClick, logFunc);\n        ui.setupFeedbackButton(btnDecrypt, onDecryptButtonClick, logFunc);\n\n        txtCipherName.addEventListener('input', () => {\n            updateCipherParameters();\n        });\n\n        txtCipherSource.addEventListener('input', () => {\n            updateCipherSourceLength();\n            if (txtCipherSource.value.length > 0) {\n                clearSourceVisualCue();\n            }\n        });\n\n        txtCipherTarget.addEventListener('input', () => {\n            updateCipherTargetLength();\n        });\n\n        cboCipherVersion.addEventListener('input', () => {\n            updateCipherParameters();\n        });\n\n        btnClearAllCipherInfo.addEventListener('click', () => {\n            txtCipherName.value = '';\n            txtCipherSource.value = '';\n            updateCipherSourceLength();\n            txtCipherTarget.value = '';\n            updateCipherTargetLength();\n            cboCipherVersion.selectedIndex = cboCipherVersion.options.length - 1;\n            cboCipherEncoding.selectedIndex = findCipherEncodingDropdownIndexByName(RECOMMENDED_ENCODING_NAME);\n            storageOutputComponent.clearMatchingPath();\n            clearCipherTargetLastUpdate();\n            clearAllVisualCues();\n\n            storageOutputComponent.clearUI();\n        });\n\n        btnClearCipherSource.addEventListener('click', () => {\n            ui.clearText(txtCipherSource, true);\n        });\n\n        btnClearCipherTarget.addEventListener('click', () => {\n            setCipherTargetValue('', false);\n        });\n\n        setupCipherVersionsDropdown();\n        setupCipherEncodingDropdown();\n\n        serviceManager.registerService('cipher', new CipherService(this));\n    }\n}\n","import { ICipher, getDerivedBytes } from '../crypto';\nimport { CancellationToken, ensureNotCancelled } from '../asyncUtils';\n\nexport class CipherV2 implements ICipher {\n    private iterations: number = 100_000;\n\n    public get version(): number {\n        return 2;\n    }\n\n    public get description(): string {\n        return 'PBKDF2 + AES-GCM (100k iterations)';\n    }\n\n    async encrypt(input: ArrayBuffer, password: ArrayBuffer, cancellationToken: CancellationToken): Promise<ArrayBuffer> {\n        const output: ArrayBuffer = new ArrayBuffer(12 + 16 + 16 + input.byteLength);\n\n        const nonce: Uint8Array = crypto.getRandomValues(new Uint8Array(output, 0, 12));\n        const passwordSalt: Uint8Array = crypto.getRandomValues(new Uint8Array(output, 12, 16));\n\n        const aesGcmParams: AesGcmParams = {\n            name: 'AES-GCM',\n            iv: nonce\n        };\n\n        const aesKeyAlgorithm: AesKeyAlgorithm = {\n            name: 'AES-GCM',\n            length: 0, // Key length is ignored here.\n        };\n\n        const passwordKey: CryptoKey = await window.crypto.subtle.importKey(\n            'raw',\n            await getDerivedBytes(password, passwordSalt, this.iterations, cancellationToken),\n            aesKeyAlgorithm,\n            false,\n            ['encrypt']\n        );\n\n        ensureNotCancelled(cancellationToken);\n\n        const result: ArrayBuffer = await window.crypto.subtle.encrypt(aesGcmParams, passwordKey, input);\n\n        ensureNotCancelled(cancellationToken);\n\n        new Uint8Array(output).set(new Uint8Array(result), 12 + 16);\n\n        return output;\n    }\n\n    async decrypt(input: ArrayBuffer, password: ArrayBuffer, cancellationToken: CancellationToken): Promise<ArrayBuffer> {\n        const nonce: Uint8Array = new Uint8Array(input, 0, 12);\n        const passwordSalt: Uint8Array = new Uint8Array(input, 12, 16);\n        const payload: Uint8Array = new Uint8Array(input, 12 + 16);\n\n        const aesGcmParams: AesGcmParams = {\n            name: 'AES-GCM',\n            iv: nonce\n        };\n\n        const aesKeyAlgorithm: AesKeyAlgorithm = {\n            name: 'AES-GCM',\n            length: 0, // Key length is ignored here.\n        };\n\n        const derivedKey: ArrayBuffer = await getDerivedBytes(password, passwordSalt, this.iterations, cancellationToken);\n\n        ensureNotCancelled(cancellationToken);\n\n        const passwordKey: CryptoKey = await window.crypto.subtle.importKey(\n            'raw',\n            derivedKey,\n            aesKeyAlgorithm,\n            false,\n            ['decrypt']\n        );\n\n        ensureNotCancelled(cancellationToken);\n\n        const result: ArrayBuffer = await window.crypto.subtle.decrypt(aesGcmParams, passwordKey, payload);\n\n        ensureNotCancelled(cancellationToken);\n\n        return result;\n    }\n}\n","import { ICipher, getDerivedBytes } from '../crypto';\nimport { CancellationToken, ensureNotCancelled } from '../asyncUtils';\n\n// TODO: Should refactor v2 and v3 common code into a reusable component instead of shamelessly copy/pasting...\n\nexport class CipherV3 implements ICipher {\n    private iterations: number = 400_000;\n\n    public get version(): number {\n        return 3;\n    }\n\n    public get description(): string {\n        return 'PBKDF2 + AES-GCM (400k iterations)';\n    }\n\n    async encrypt(input: ArrayBuffer, password: ArrayBuffer, cancellationToken: CancellationToken): Promise<ArrayBuffer> {\n        const output: ArrayBuffer = new ArrayBuffer(12 + 16 + 16 + input.byteLength);\n\n        const nonce: Uint8Array = crypto.getRandomValues(new Uint8Array(output, 0, 12));\n        const passwordSalt: Uint8Array = crypto.getRandomValues(new Uint8Array(output, 12, 16));\n\n        const aesGcmParams: AesGcmParams = {\n            name: 'AES-GCM',\n            iv: nonce\n        };\n\n        const aesKeyAlgorithm: AesKeyAlgorithm = {\n            name: 'AES-GCM',\n            length: 0, // Key length is ignored here.\n        };\n\n        const passwordKey: CryptoKey = await window.crypto.subtle.importKey(\n            'raw',\n            await getDerivedBytes(password, passwordSalt, this.iterations, cancellationToken),\n            aesKeyAlgorithm,\n            false,\n            ['encrypt']\n        );\n\n        ensureNotCancelled(cancellationToken);\n\n        const result: ArrayBuffer = await window.crypto.subtle.encrypt(aesGcmParams, passwordKey, input);\n\n        ensureNotCancelled(cancellationToken);\n\n        new Uint8Array(output).set(new Uint8Array(result), 12 + 16);\n\n        return output;\n    }\n\n    async decrypt(input: ArrayBuffer, password: ArrayBuffer, cancellationToken: CancellationToken): Promise<ArrayBuffer> {\n        const nonce: Uint8Array = new Uint8Array(input, 0, 12);\n        const passwordSalt: Uint8Array = new Uint8Array(input, 12, 16);\n        const payload: Uint8Array = new Uint8Array(input, 12 + 16);\n\n        const aesGcmParams: AesGcmParams = {\n            name: 'AES-GCM',\n            iv: nonce\n        };\n\n        const aesKeyAlgorithm: AesKeyAlgorithm = {\n            name: 'AES-GCM',\n            length: 0 // Key length is ignored here.\n        };\n\n        const derivedKey: ArrayBuffer = await getDerivedBytes(password, passwordSalt, this.iterations, cancellationToken);\n\n        ensureNotCancelled(cancellationToken);\n\n        const passwordKey: CryptoKey = await window.crypto.subtle.importKey(\n            'raw',\n            derivedKey,\n            aesKeyAlgorithm,\n            false,\n            ['decrypt']\n        );\n\n        ensureNotCancelled(cancellationToken);\n\n        const result: ArrayBuffer = await window.crypto.subtle.decrypt(aesGcmParams, passwordKey, payload);\n\n        ensureNotCancelled(cancellationToken);\n\n        return result;\n    }\n}\n","import * as cipherComponent from '../components/cipherComponent';\nimport { CancellationToken } from '../asyncUtils';\nimport { Base58Encoding, IEncoding } from '../encoding';\n\nconst encoding: IEncoding = new Base58Encoding();\n\nexport interface IAsyncStorage {\n    readonly length: number;\n    clear(): void;\n    getItem(key: string): Promise<string | null>;\n    key(index: number): string | null;\n    removeItem(key: string): void;\n    setItem(key: string, value: string): Promise<void>;\n}\n\nexport class SecureLocalStorage implements IAsyncStorage {\n    get length(): number {\n        return window.localStorage.length;\n    }\n\n    clear(): void {\n        window.localStorage.clear();\n    }\n\n    key(index: number): string | null {\n        return window.localStorage.key(index);\n    }\n\n    removeItem(key: string): void {\n        window.localStorage.removeItem(key);\n    }\n\n    async getItem(key: string): Promise<string | null> {\n        const encryptedItem: string | null = window.localStorage.getItem(key);\n\n        if (encryptedItem === null) {\n            return null;\n        }\n\n        const sortedCiphers = cipherComponent.ciphers.map(x => x).sort((a, b) => b.version - a.version);\n\n        for (const cipher of sortedCiphers) {\n            const result: string | null = await cipherComponent.decryptStringWithCipher(encryptedItem, cipher, encoding, CancellationToken.none);\n            if (result !== null) {\n                return result;\n            }\n        }\n\n        return null;\n    }\n\n    async setItem(key: string, value: string): Promise<void> {\n        const encrypted: string | null = await cipherComponent.encryptString(\n            value,\n            cipherComponent.findLatestCipher(),\n            encoding,\n            CancellationToken.none\n        );\n\n        if (encrypted === null) {\n            console.error('Failed to encrypt value. (nothing stored)');\n            return;\n        }\n\n        window.localStorage.setItem(key, encrypted);\n    }\n}\n","import * as ui from '../ui';\nimport * as stringUtils from '../stringUtils';\nimport { PlainObject, objectDeepSort } from '../PlainObject';\nimport { IComponent } from './IComponent';\nimport { rootComponent, RootComponent } from './rootComponent';\nimport * as serviceManager from '../services/serviceManger';\nimport { VaultService } from '../services/vaultService';\n\nimport { IVaultStorage } from '../storages/IVaultStorage';\nimport { GitHubPersonalAccessTokenVaultStorage } from '../storages/GitHubVaultStorage';\nimport { SecureLocalStorage } from '../storages/SecureLocalStorage';\n\nconst divStorageOutput: HTMLElement = ui.getElementById('divStorageOutput');\n\nconst txtPath: HTMLInputElement = ui.getElementById('txtPath') as HTMLInputElement;\nconst lblMatchingPath: HTMLElement = ui.getElementById('lblMatchingPath');\n\nconst txtParameters: HTMLInputElement = ui.getElementById('txtParameters') as HTMLInputElement;\nconst btnPushToVault: HTMLButtonElement = ui.getElementById('btnPushToVault') as HTMLButtonElement;\nconst txtCustomKeys: HTMLInputElement = ui.getElementById('txtCustomKeys') as HTMLInputElement;\n\nlet vaultStorage: IVaultStorage = new GitHubPersonalAccessTokenVaultStorage(new SecureLocalStorage());\n\ntype IChainInfo = {\n    head: PlainObject,\n    tailParent: PlainObject,\n    tail: PlainObject\n};\n\n// Transforms a path like \"a/b/c/d\" into a hierarchy of objects like { \"a\": { \"b\": { \"c\": { \"d\": {} } } } }\n// From the result object, head is the root object that contains \"a\", tail is the value of \"d\", and tailParent is the value of \"c\"\nfunction pathToObjectChain(path: string, chainInfo: IChainInfo | undefined = undefined): IChainInfo {\n    const separatorIndex: number = path.indexOf('/');\n\n    const tail: PlainObject = {};\n\n    const firstPath: string = separatorIndex >= 0 ? path.substring(0, separatorIndex) : path;\n    const remainingPath: string | undefined = separatorIndex >= 0 ? path.substring(separatorIndex + 1) : undefined;\n\n    if (chainInfo === undefined) {\n        const node: PlainObject = {};\n        node[firstPath] = tail;\n        chainInfo = {\n            head: node,\n            tailParent: node,\n            tail\n        };\n    } else {\n        chainInfo.tail[firstPath] = tail;\n        chainInfo.tailParent = chainInfo.tail;\n        chainInfo.tail = tail;\n    }\n\n    if (remainingPath) {\n        return pathToObjectChain(remainingPath, chainInfo);\n    }\n\n    return chainInfo;\n}\n\nfunction createMatchingPath(path: string, depth: number): string {\n    let position = 0;\n\n    for (let i = 0; i < depth; i += 1) {\n        position = path.indexOf('/', position);\n        if (position < 0) {\n            position = path.length + 1;\n            break;\n        }\n        position += 1;\n    }\n\n    return path.substring(0, position - 1);\n}\n\nfunction updateMatchingPath(): void {\n    const vaultService: VaultService = serviceManager.getService('vault');\n\n    const depth = vaultService.computeUserPathMatchDepth(txtPath.value);\n\n    if (depth > 0) {\n        const matchingPath = createMatchingPath(txtPath.value, depth);\n        lblMatchingPath.innerText = matchingPath;\n    } else {\n        lblMatchingPath.innerText = '';\n    }\n}\n\nfunction onPathTextInput() {\n    updateMatchingPath();\n    update();\n}\n\nfunction onCustomKeysTextInput(): void {\n    update();\n}\n\nfunction updateCustomKeysDisplay(isValid: boolean): void {\n    if (isValid) {\n        txtCustomKeys.style.removeProperty('background');\n        return;\n    }\n\n    txtCustomKeys.style.setProperty('background', ui.ERROR_COLOR);\n}\n\nfunction parseCustomKeys(): PlainObject | null {\n    if (txtCustomKeys.value === '') {\n        return null;\n    }\n\n    try {\n        const obj: any = JSON.parse(txtCustomKeys.value);\n        if (obj === null || obj.constructor.name !== 'Object') {\n            return null;\n        }\n        return obj as PlainObject;\n    } catch {\n        return null;\n    }\n}\n\nfunction update(): void {\n    if (_parameterKeys === undefined || _parameterPath === undefined) {\n        return;\n    }\n\n    const chainInfo: IChainInfo = pathToObjectChain(`${txtPath.value}/${_parameterPath}`);\n    const leaf: PlainObject = chainInfo.tail;\n\n    for (const [key, value] of Object.entries(_parameterKeys)) {\n        leaf[key] = value;\n    }\n\n    const customKeys: PlainObject | null = parseCustomKeys();\n\n    updateCustomKeysDisplay(txtCustomKeys.value === '' || customKeys !== null);\n\n    if (customKeys !== null) {\n        leaf.customKeys = customKeys;\n    }\n\n    if (Object.keys(leaf).length === 0) {\n        // Remove the leaf object.\n        chainInfo.tailParent[Object.keys(chainInfo.tailParent)[0]] = null;\n    }\n\n    txtParameters.value = JSON.stringify(objectDeepSort(chainInfo.head), undefined, 4);\n}\n\nfunction deepMerge(source: PlainObject, target: PlainObject): void {\n    for (const sourceKey of Object.keys(source)) {\n        const targetValue: any = target[sourceKey];\n        const sourceValue: any = source[sourceKey];\n\n        if (targetValue === undefined ||\n            targetValue === null ||\n            targetValue.constructor.name !== 'Object' ||\n            sourceValue.constructor.name !== 'Object') {\n            target[sourceKey] = sourceValue;\n            continue;\n        }\n\n        deepMerge(sourceValue, targetValue);\n    }\n}\n\nfunction generateUpdateMessage() {\n    const activeComponent: IComponent | null = (rootComponent as RootComponent).getActiveComponent();\n\n    if (activeComponent === null) {\n        throw new Error('Could not determine active component.');\n    }\n\n    let hint: string = activeComponent.getVaultHint();\n\n    const matchingPath: string = lblMatchingPath.innerText;\n    const fullPath: string = txtPath.value;\n\n    if (!matchingPath) {\n        return `Added ${hint} for '${fullPath}'`;\n    }\n\n    if (matchingPath === fullPath) {\n        return `Updated ${hint} for '${fullPath}'`;\n    }\n\n    const remainingPath: string = stringUtils.trim(fullPath.substring(matchingPath.length), '/');\n\n    return `Updated ${hint} for '${matchingPath}' adding '${remainingPath}'`;\n}\n\nasync function pushToVault(): Promise<boolean> {\n    const vaultContentData: string | null = await vaultStorage.getVaultContent();\n\n    if (vaultContentData === null) {\n        return false;\n    }\n\n    const newData = JSON.parse(txtParameters.value);\n    let vaultContent = JSON.parse(vaultContentData);\n\n    // Keep deepMerge despite now all properties are explicitly defined, because of\n    // the datetime property that really need to be overwritten only if it exists.\n    deepMerge(newData, vaultContent);\n\n    const message: string = generateUpdateMessage();\n\n    const newVaultContentData: string = JSON.stringify(objectDeepSort(vaultContent), undefined, 4) + '\\n';\n\n    await vaultStorage.setVaultContent(newVaultContentData, `[ItchyPassword] ${message}`);\n\n    return true;\n}\n\nexport function clearOutputs(): void {\n    _parameterKeys = undefined;\n    _parameterPath = undefined;\n    ui.clearText(txtParameters);\n}\n\nlet _parameterKeys: PlainObject | undefined;\nlet _parameterPath: string | undefined;\n\nexport function setParameters(parameterKeys: PlainObject, parameterPath: string) {\n    _parameterKeys = parameterKeys;\n    _parameterPath = parameterPath;\n    update();\n}\n\nexport function setPathUI(path: string) {\n    txtPath.value = path;\n    onPathTextInput();\n}\n\nexport function setCustomKeysUI(customKeys: string) {\n    txtCustomKeys.value = customKeys;\n}\n\nexport function show(): void {\n    divStorageOutput.style.setProperty('display', 'initial');\n}\n\nexport function hide(): void {\n    divStorageOutput.style.setProperty('display', 'none');\n}\n\nexport function clearUI(): void {\n    txtPath.value = '';\n    txtParameters.value = '';\n    txtCustomKeys.value = '';\n    _parameterKeys = undefined;\n    _parameterPath = undefined;\n    updateCustomKeysDisplay(true);\n}\n\nexport function clearMatchingPath(): void {\n    lblMatchingPath.innerText = '';\n}\n\nexport class StorageOutputComponent implements IComponent {\n    public readonly name: string = 'StorageOutput';\n\n    public getVaultHint(): string {\n        throw new Error('Not supported.');\n    }\n\n    public init(): void {\n        const errorLogsService = serviceManager.getService('errorLogs');\n        const logFunc = errorLogsService.createLogErrorMessageFunction();\n\n        txtCustomKeys.addEventListener('input', onCustomKeysTextInput);\n        ui.setupFeedbackButton(btnPushToVault, pushToVault, logFunc);\n        txtPath.addEventListener('input', onPathTextInput);\n    }\n}\n","import { CancellationToken } from '../asyncUtils';\nimport * as stringUtils from '../stringUtils';\nimport * as ui from '../ui';\nimport { PasswordComponent, generatePasswordString, run } from '../components/passwordComponent';\nimport { DEFAULT_ALPHABET, DEFAULT_LENGTH, CURRENT_PASSWORD_GENERATOR_VERSION } from '../components/passwordComponent';\nimport * as serviceManager from './serviceManger';\nimport { PlainObject } from 'PlainObject';\n\nexport class PasswordService {\n    constructor(private readonly passwordComponent: PasswordComponent) {\n    }\n\n    isLatestVersion(version: number): boolean {\n        return version === this.getLatestVersion();\n    }\n\n    getLatestVersion(): number {\n        return CURRENT_PASSWORD_GENERATOR_VERSION;\n    }\n\n    async generateAndCopyPasswordToClipboard(publicPart: string, alphabet?: string, length?: number, version?: number): Promise<boolean> {\n        alphabet = alphabet !== undefined ? alphabet : DEFAULT_ALPHABET;\n        length = length !== undefined ? length : DEFAULT_LENGTH;\n        version = version !== undefined ? version : CURRENT_PASSWORD_GENERATOR_VERSION;\n\n        const keyString: string | null = await generatePasswordString(publicPart, alphabet, version, CancellationToken.none);\n\n        if (keyString === null) {\n            return false;\n        }\n\n        const password = stringUtils.truncate(keyString, Math.max(4, length));\n\n        const errorLogsService = serviceManager.getService('errorLogs');\n        const logFunc = errorLogsService.createLogErrorMessageFunction();\n\n        return await ui.writeToClipboard(password, logFunc);\n    }\n\n    public async activate(storageFullPath: string, parameterKeys: PlainObject): Promise<boolean> {\n        if (this.passwordComponent.setParameters(parameterKeys, storageFullPath) === false) {\n            return false;\n        }\n\n        await run();\n\n        this.passwordComponent.getTabButton().click();\n\n        return true;\n    }\n}\n","import * as ui from '../ui';\nimport * as privatePartComponent from './privatePartComponent';\n\nimport * as crypto from '../crypto';\nimport * as stringUtils from '../stringUtils';\nimport * as arrayUtils from '../arrayUtils';\n\nimport { PlainObject } from '../PlainObject';\nimport { PasswordGeneratorV1 } from '../passwordGenerators/v1';\nimport { PasswordGeneratorV2 } from '../passwordGenerators/v2';\nimport { ITabInfo } from '../TabControl';\nimport { IComponent } from './IComponent';\n\nimport * as storageOutputComponent from './storageOutputComponent';\n\nimport { CancellationToken, TaskRunner } from '../asyncUtils';\n\nimport * as serviceManager from '../services/serviceManger';\nimport { PasswordService } from '../services/passwordService';\n\nconst btnTabPasswords = ui.getElementById('btnTabPasswords') as HTMLButtonElement;\nconst divTabPasswords = ui.getElementById('divTabPasswords');\n\nconst passwordGenerators: crypto.IPasswordGenerator[] = [\n    new PasswordGeneratorV1('Password'),\n    new PasswordGeneratorV2('Password'),\n];\n\nexport const CURRENT_PASSWORD_GENERATOR_VERSION = 2;\n\nconst btnClearAllPasswordInfo = ui.getElementById('btnClearAllPasswordInfo') as HTMLButtonElement;\n\nconst txtPublicPart = ui.getElementById('txtPublicPart') as HTMLInputElement;\nconst spnPublicPartSize = ui.getElementById('spnPublicPartSize');\nconst btnGeneratePublicPart = ui.getElementById('btnGeneratePublicPart') as HTMLButtonElement;\nconst btnClearPublicPart = ui.getElementById('btnClearPublicPart') as HTMLButtonElement;\nconst btnCopyPublicPart = ui.getElementById('btnCopyPublicPart') as HTMLButtonElement;\nconst btnShowHidePasswordOptionalFeatures = ui.getElementById('btnShowHidePasswordOptionalFeatures') as HTMLButtonElement;\n\nconst lblAlphabetLength = ui.getElementById('lblAlphabetLength');\nconst numOutputSizeRange = ui.getElementById('numOutputSizeRange') as HTMLInputElement;\nconst numOutputSizeNum = ui.getElementById('numOutputSizeNum') as HTMLInputElement;\n\nconst lblAlphabet = ui.getElementById('lblAlphabet');\nconst txtAlphabet = ui.getElementById('txtAlphabet') as HTMLInputElement;\nconst spnAlphabetSize = ui.getElementById('spnAlphabetSize');\nconst divPasswordAlphabetActions = ui.getElementById('divPasswordAlphabetActions');\nconst btnResetAlphabet = ui.getElementById('btnResetAlphabet') as HTMLButtonElement;\n\nconst lblPasswordVersion = ui.getElementById('lblPasswordVersion');\nconst cboPasswordVersion = ui.getElementById('cboPasswordVersion') as HTMLSelectElement;\n\nconst txtResultPassword = ui.getElementById('txtResultPassword') as HTMLInputElement;\nconst spnResultPasswordLength = ui.getElementById('spnResultPasswordLength');\nconst btnViewResultPassword = ui.getElementById('btnViewResultPassword') as HTMLButtonElement;\nconst btnCopyResultPassword = ui.getElementById('btnCopyResultPassword') as HTMLButtonElement;\nconst lblGeneratingPassword = ui.getElementById('lblGeneratingPassword');\n\nexport const DEFAULT_LENGTH: number = 64;\nexport const DEFAULT_ALPHABET: string = '!\"#$%&\\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}~';\n\nlet passwordPublicPartLastChange: string | undefined;\nlet copyPasswordFunction: () => void;\n\nfunction findPasswordGeneratorByVersion(version: number): crypto.IPasswordGenerator {\n    for (const passwordGenerator of passwordGenerators) {\n        if (passwordGenerator?.version === version) {\n            return passwordGenerator;\n        }\n    }\n\n    throw new Error(`Failed to find password generator version ${version}`);\n}\n\nfunction findPasswordGeneratorFromUserInterface(): crypto.IPasswordGenerator {\n    const passwordGenerator = passwordGenerators[cboPasswordVersion.selectedIndex];\n\n    if (!passwordGenerator) {\n        throw new Error(`Failed to find password generator version from index ${cboPasswordVersion.selectedIndex}`);\n    }\n\n    return passwordGenerator;\n}\n\nfunction findPasswordDropdownIndexByVersion(version: number): number {\n    for (let i = 0; i < passwordGenerators.length; i++) {\n        if (passwordGenerators[i].version === version) {\n            return i;\n        }\n    }\n\n    return -1;\n}\n\nfunction onClearPublicPartButtonClick(): boolean {\n    if (txtPublicPart.value.length > 0) {\n        if (prompt('Are you sure you want to clear the public part ?\\nType \\'y\\' to accept', '') !== 'y') {\n            return false;\n        }\n    }\n\n    ui.clearText(txtPublicPart, true);\n\n    updatePublicPartSize();\n\n    updatePasswordPublicPartLastUpdate();\n    updatePasswordGenerationParameters();\n\n    return true;\n}\n\nfunction onGeneratePublicPartButtonClick(): boolean {\n    if (txtPublicPart.value.length > 0) {\n        if (prompt('Are you sure you want to generate a new public part ?\\nType \\'y\\' to accept', '') !== 'y') {\n            return false;\n        }\n    }\n\n    const randomString: string = crypto.generateRandomString();\n    txtPublicPart.value = randomString;\n    updatePublicPartSize();\n\n    updatePasswordPublicPartLastUpdate();\n\n    run();\n\n    return true;\n}\n\nfunction updatePasswordPublicPartLastUpdate(): void {\n    if (txtPublicPart.value.length > 0) {\n        passwordPublicPartLastChange = new Date().toISOString();\n    } else {\n        passwordPublicPartLastChange = undefined;\n    }\n}\n\nfunction updateResultPasswordLength(): void {\n    spnResultPasswordLength.innerHTML = txtResultPassword.value.length.toString();\n}\n\nfunction isAlphabetValid(alphabet: string): boolean {\n    const sortedAlphabet: string[] = alphabet.split('');\n    sortedAlphabet.sort();\n\n    for (let i: number = 1; i < sortedAlphabet.length; i += 1) {\n        if (sortedAlphabet[i - 1] === sortedAlphabet[i]) {\n            return false;\n        }\n    }\n\n    return true;\n}\n\nfunction updatePasswordGenerationParameters(): void {\n    if (canRun() === false) {\n        clearOutputs();\n        return;\n    }\n\n    const passwordGenerator = passwordGenerators[cboPasswordVersion.selectedIndex];\n\n    if (!passwordGenerator) {\n        throw new Error('Invalid selected password generator version.');\n    }\n\n    const passwordParamters: PlainObject = {\n        public: txtPublicPart.value,\n        datetime: passwordPublicPartLastChange,\n        version: passwordGenerator.version,\n        length: txtResultPassword.value.length,\n        alphabet: txtAlphabet.value\n    };\n\n    storageOutputComponent.setParameters(passwordParamters, 'password');\n}\n\nfunction updateOutputSizeRangeToNum(): void {\n    numOutputSizeNum.value = numOutputSizeRange.value;\n}\n\nfunction updateOutputSizeNumToRange(): boolean {\n    const min: number = parseInt(numOutputSizeRange.min, 10);\n    const val: number = parseInt(numOutputSizeNum.value, 10);\n    const max: number = parseInt(numOutputSizeRange.max, 10);\n\n    if (isNaN(val) === false) {\n        numOutputSizeRange.value = Math.max(min, Math.min(val, max)).toString();\n        return true;\n    }\n\n    return false;\n}\n\nasync function onOutputSizeRangeInput(): Promise<void> {\n    updateOutputSizeRangeToNum();\n    await run();\n}\n\nasync function onOutputSizeNumInput(): Promise<void> {\n    if (updateOutputSizeNumToRange()) {\n        updateOutputSizeRangeToNum();\n    }\n    await run();\n}\n\nfunction updatePublicPartSize(): void {\n    spnPublicPartSize.innerHTML = txtPublicPart.value.length.toString();\n}\n\nfunction updateAlphabetSize(): void {\n    spnAlphabetSize.innerHTML = txtAlphabet.value.length.toString();\n}\n\nfunction updateAlphabetValidityDisplay(isAlphabetValid: boolean): void {\n    if (isAlphabetValid) {\n        txtAlphabet.style.removeProperty('background');\n    } else {\n        txtAlphabet.style.setProperty('background', ui.ERROR_COLOR);\n    }\n}\n\nasync function onAlphabetTextInput(): Promise<void> {\n    const isAlphabetValidResult: boolean = isAlphabetValid(txtAlphabet.value);\n\n    updateAlphabetValidityDisplay(isAlphabetValidResult);\n\n    if (isAlphabetValidResult === false) {\n        return;\n    }\n\n    updateAlphabetSize();\n    await run();\n}\n\nasync function onResetAlphabetButtonClick(): Promise<boolean> {\n    if (resetAlphabet() === false) {\n        return false;\n    }\n\n    await run();\n\n    return true;\n}\n\nasync function onPasswordVersionChanged(): Promise<void> {\n    const passwordGenerator = passwordGenerators[cboPasswordVersion.selectedIndex];\n\n    if (!passwordGenerator) {\n        return;\n    }\n\n    await run();\n}\n\nfunction clearOutputs(): void {\n    ui.clearText(txtResultPassword);\n    storageOutputComponent.clearOutputs();\n    updateResultPasswordLength();\n}\n\nfunction canRun(publicPart?: string): boolean {\n    const alphabet: string = txtAlphabet.value;\n\n    if (isAlphabetValid(alphabet) === false) {\n        return false;\n    }\n\n    publicPart = publicPart || txtPublicPart.value;\n\n    if (privatePartComponent.getPrivatePart().length <= 0 || publicPart.length < 8 || alphabet.length < 2) {\n        return false;\n    }\n\n    return true;\n}\n\nexport async function generatePasswordString(publicPart: string, alphabet: string, version: number, cancellationToken: CancellationToken): Promise<string | null> {\n    if (canRun(publicPart) === false) {\n        return null;\n    }\n\n    const passwordGenerator = findPasswordGeneratorByVersion(version);\n\n    const privatePartString: string = privatePartComponent.getPrivatePart();\n    const privatePrivateBytes: ArrayBuffer = stringUtils.stringToArray(privatePartString);\n    const publicPartBytes: ArrayBuffer = stringUtils.stringToArray(publicPart);\n    const keyBytes: ArrayBuffer = await passwordGenerator.generatePassword(privatePrivateBytes, publicPartBytes, cancellationToken);\n\n    return arrayUtils.toCustomBaseOneWay(keyBytes, alphabet);\n}\n\nconst passwordTaskRunner: TaskRunner<void> = new TaskRunner<void>();\n\nexport async function run(): Promise<void> {\n    if (canRun() === false) {\n        clearOutputs();\n        return;\n    }\n\n    ui.showHide(lblGeneratingPassword, true);\n\n    try {\n        await passwordTaskRunner.cancelAndExecute(runCore);\n    } finally {\n        ui.showHide(lblGeneratingPassword, false);\n    }\n}\n\nasync function runCore(cancellationToken: CancellationToken): Promise<void> {\n    const passwordGenerator = findPasswordGeneratorFromUserInterface();\n\n    const keyString: string | null = await generatePasswordString(txtPublicPart.value, txtAlphabet.value, passwordGenerator.version, cancellationToken);\n    if (keyString === null) {\n        return;\n    }\n\n    txtResultPassword.value = stringUtils.truncate(keyString, Math.max(4, parseInt(numOutputSizeRange.value, 10)));\n\n    updateResultPasswordLength();\n    updatePasswordGenerationParameters();\n\n    copyPasswordFunction();\n}\n\nfunction resetAlphabet(): boolean {\n    txtAlphabet.value = DEFAULT_ALPHABET;\n    updateAlphabetSize();\n\n    const isAlphabetValidResult: boolean = isAlphabetValid(txtAlphabet.value);\n\n    updateAlphabetValidityDisplay(isAlphabetValidResult);\n\n    return isAlphabetValidResult;\n}\n\nasync function onPublicPartTextInput(): Promise<void> {\n    updatePublicPartSize();\n    updatePasswordPublicPartLastUpdate();\n    await run();\n}\n\nfunction setupPasswordGeneratorsDropdown(): void {\n    for (const passwordGenerator of passwordGenerators) {\n        const option = document.createElement('option');\n\n        option.text = `v${passwordGenerator.version}`;\n\n        cboPasswordVersion.appendChild(option);\n    }\n\n    cboPasswordVersion.selectedIndex = cboPasswordVersion.options.length - 1;\n}\n\nfunction clearAll(): boolean {\n    if (onClearPublicPartButtonClick() === false) {\n        return false;\n    }\n\n    ui.clearText(txtResultPassword, true);\n    updateResultPasswordLength();\n    resetAlphabet();\n    numOutputSizeRange.value = DEFAULT_LENGTH.toString();\n    updateOutputSizeRangeToNum();\n    cboPasswordVersion.selectedIndex = cboPasswordVersion.options.length - 1;\n\n    storageOutputComponent.clearMatchingPath();\n    storageOutputComponent.clearUI();\n\n    return true;\n}\n\nfunction fullPathToStoragePath(fullPath: string): string | null {\n    const prefix = '<root>/';\n    const suffix = '/password';\n\n    if (fullPath.startsWith(prefix) === false) {\n        return null;\n    }\n\n    if (fullPath.endsWith(suffix) === false) {\n        return null;\n    }\n\n    return fullPath.substring(prefix.length, fullPath.length - suffix.length);\n}\n\nexport class PasswordComponent implements IComponent, ITabInfo {\n    public readonly name: string = 'Password';\n\n    public getTabButton(): HTMLButtonElement {\n        return btnTabPasswords;\n    }\n\n    public getTabContent(): HTMLElement {\n        return divTabPasswords;\n    }\n\n    public onTabSelected(): void {\n        storageOutputComponent.show();\n        updatePasswordGenerationParameters();\n        txtPublicPart.focus();\n    }\n\n    public getVaultHint(): string {\n        return this.name.toLowerCase();\n    }\n\n    public setParameters(parameterKeys: PlainObject, storageFullPath: string): boolean {\n        if (clearAll() === false) {\n            return false;\n        }\n\n        const storagePath: string | null = fullPathToStoragePath(storageFullPath);\n\n        if (storagePath === null) {\n            console.error(`Failed to retrieve storage path from full path '${storageFullPath}'.`);\n            alert('Failed to retrieve storage path from full path.');\n            return false;\n        }\n\n        if (parameterKeys.customKeys) {\n            storageOutputComponent.setCustomKeysUI(JSON.stringify(parameterKeys.customKeys, null, 4));\n        }\n\n        delete parameterKeys.customKeys;\n\n        txtPublicPart.value = parameterKeys.public;\n        updatePublicPartSize();\n\n        txtAlphabet.value = parameterKeys.alphabet;\n        updateAlphabetValidityDisplay(isAlphabetValid(txtAlphabet.value));\n        updateAlphabetSize();\n\n        numOutputSizeNum.value = parameterKeys.length;\n        if (updateOutputSizeNumToRange() === false) {\n            console.error(`Failed to retrieve length from full path '${storageFullPath}'.`);\n            alert('Failed to retrieve length from full path.');\n            return false;\n        }\n\n        const dropdownIndex = findPasswordDropdownIndexByVersion(parameterKeys.version);\n        if (dropdownIndex < 0) {\n            console.error(`Failed to retrieve version from full path '${storageFullPath}'.`);\n            alert('Failed to retrieve version from full path.');\n            return false;\n        }\n        cboPasswordVersion.selectedIndex = dropdownIndex;\n\n        storageOutputComponent.setPathUI(storagePath);\n        storageOutputComponent.setParameters(parameterKeys, 'password');\n\n        return true;\n    }\n\n    public init(): void {\n        const errorLogsService = serviceManager.getService('errorLogs');\n        const logFunc = errorLogsService.createLogErrorMessageFunction();\n\n        privatePartComponent.registerOnChanged(run);\n\n        // dafuq!?\n        numOutputSizeRange.max = DEFAULT_LENGTH.toString();\n        numOutputSizeRange.value = DEFAULT_LENGTH.toString();\n\n        ui.setupFeedbackButton(btnClearPublicPart, onClearPublicPartButtonClick, logFunc);\n        ui.setupFeedbackButton(btnGeneratePublicPart, onGeneratePublicPartButtonClick, logFunc);\n\n        ui.setupViewButton(txtResultPassword, btnViewResultPassword);\n\n        ui.setupCopyButton(txtPublicPart, btnCopyPublicPart, logFunc);\n        copyPasswordFunction = ui.setupCopyButton(txtResultPassword, btnCopyResultPassword, logFunc);\n\n        numOutputSizeRange.addEventListener('input', onOutputSizeRangeInput);\n        numOutputSizeNum.addEventListener('input', onOutputSizeNumInput);\n\n        txtAlphabet.addEventListener('input', onAlphabetTextInput);\n        ui.setupFeedbackButton(btnResetAlphabet, onResetAlphabetButtonClick, logFunc);\n\n        cboPasswordVersion.addEventListener('input', onPasswordVersionChanged);\n\n        txtPublicPart.addEventListener('input', onPublicPartTextInput);\n\n        ui.showHide(lblGeneratingPassword, false);\n\n        ui.setupShowHideButton(btnShowHidePasswordOptionalFeatures, false, [\n            lblAlphabet,\n            txtAlphabet,\n            spnAlphabetSize,\n            divPasswordAlphabetActions,\n            lblAlphabetLength,\n            numOutputSizeRange,\n            numOutputSizeNum,\n            lblPasswordVersion,\n            cboPasswordVersion,\n        ]);\n\n        updatePublicPartSize();\n        updateOutputSizeRangeToNum();\n        resetAlphabet();\n\n        setupPasswordGeneratorsDropdown();\n\n        btnClearAllPasswordInfo.addEventListener('click', clearAll);\n\n        serviceManager.registerService('password', new PasswordService(this));\n    }\n};\n","import { stringToArray } from '../stringUtils';\nimport { IPasswordGenerator, getDerivedBytes } from '../crypto';\nimport { CancellationToken, ensureNotCancelled } from '../asyncUtils';\n\nexport class PasswordGeneratorV1 implements IPasswordGenerator {\n    private hkdfPurpose: ArrayBuffer;\n    private _description: string;\n\n    public constructor(hkdfPurpose: string) {\n        this.hkdfPurpose = stringToArray(hkdfPurpose);\n        this._description = `HKDF(PBKDF2, HMAC512) [purpose: ${hkdfPurpose}]`;\n    }\n\n    public get version(): number {\n        return 1;\n    }\n\n    public get description(): string {\n        return this._description;\n    }\n\n    public async generatePassword(privatePart: ArrayBuffer, publicPart: ArrayBuffer, cancellationToken: CancellationToken): Promise<ArrayBuffer> {\n        const derivedKey: ArrayBuffer = await getDerivedBytes(privatePart, publicPart, 100_000, cancellationToken);\n\n        ensureNotCancelled(cancellationToken);\n\n        const hmacParameters: HmacImportParams = {\n            name: 'HMAC',\n            hash: { name: 'SHA-512' }\n        };\n\n        const hkdfKey: CryptoKey = await window.crypto.subtle.importKey(\n            'raw',\n            derivedKey,\n            hmacParameters,\n            false,\n            ['sign']\n        );\n\n        ensureNotCancelled(cancellationToken);\n\n        const result: ArrayBuffer = await window.crypto.subtle.sign('HMAC', hkdfKey, this.hkdfPurpose);\n\n        ensureNotCancelled(cancellationToken);\n\n        return result;\n    }\n}\n","import { stringToArray } from '../stringUtils';\nimport { IPasswordGenerator, getDerivedBytes } from '../crypto';\nimport { CancellationToken, ensureNotCancelled } from '../asyncUtils';\n\nexport class PasswordGeneratorV2 implements IPasswordGenerator {\n    private hkdfPurpose: ArrayBuffer;\n    private _description: string;\n\n    public constructor(hkdfPurpose: string) {\n        this.hkdfPurpose = stringToArray(hkdfPurpose);\n        this._description = `HKDF(PBKDF2, HMAC512) [purpose: ${hkdfPurpose}]`;\n    }\n\n    public get version(): number {\n        return 2;\n    }\n\n    public get description(): string {\n        return this._description;\n    }\n\n    public async generatePassword(privatePart: ArrayBuffer, publicPart: ArrayBuffer, cancellationToken: CancellationToken): Promise<ArrayBuffer> {\n        const derivedKey: ArrayBuffer = await getDerivedBytes(privatePart, publicPart, 400_000, cancellationToken);\n\n        ensureNotCancelled(cancellationToken);\n\n        const hmacParameters: HmacImportParams = {\n            name: 'HMAC',\n            hash: { name: 'SHA-512' }\n        };\n\n        const hkdfKey: CryptoKey = await window.crypto.subtle.importKey(\n            'raw',\n            derivedKey,\n            hmacParameters,\n            false,\n            ['sign']\n        );\n\n        ensureNotCancelled(cancellationToken);\n\n        const result: ArrayBuffer = await window.crypto.subtle.sign('HMAC', hkdfKey, this.hkdfPurpose);\n\n        ensureNotCancelled(cancellationToken);\n\n        return result;\n    }\n}\n","import { ICipher } from '../crypto';\nimport * as stringUtils from '../stringUtils';\nimport * as arrayUtils from '../arrayUtils';\nimport { ITabInfo } from '../TabControl';\nimport * as ui from '../ui';\nimport { getPrivatePart } from './privatePartComponent';\nimport * as serviceManager from '../services/serviceManger';\n\nimport { IComponent } from './IComponent';\n\nimport * as storageOutputComponent from './storageOutputComponent';\nimport { ciphers } from './cipherComponent';\n\nimport { CancellationToken } from '../asyncUtils';\n\nconst btnTabReEncrypt: HTMLButtonElement = ui.getElementById('btnTabReEncrypt') as HTMLButtonElement;\nconst divTabReEncrypt: HTMLElement = ui.getElementById('divTabReEncrypt');\n\nconst txtReEncryptSource: HTMLInputElement = ui.getElementById('txtReEncryptSource') as HTMLInputElement;\nconst txtReEncryptTarget: HTMLInputElement = ui.getElementById('txtReEncryptTarget') as HTMLInputElement;\n\nconst cboReEncryptFrom: HTMLSelectElement = ui.getElementById('cboReEncryptFrom') as HTMLSelectElement;\nconst cboReEncryptTo: HTMLSelectElement = ui.getElementById('cboReEncryptTo') as HTMLSelectElement;\nconst btnReEncrypt: HTMLButtonElement = ui.getElementById('btnReEncrypt') as HTMLButtonElement;\n\nconst btnClearReEncryptSource: HTMLButtonElement = ui.getElementById('btnClearReEncryptSource') as HTMLButtonElement;\nconst btnCopyReEncryptTarget: HTMLButtonElement = ui.getElementById('btnCopyReEncryptTarget') as HTMLButtonElement;\nconst btnClearReEncryptTarget: HTMLButtonElement = ui.getElementById('btnClearReEncryptTarget') as HTMLButtonElement;\n\nfunction fillCipherComboBox(cbo: HTMLSelectElement, initialValue: number): void {\n    let cipher: ICipher;\n\n    for (cipher of ciphers) {\n        const item: HTMLOptionElement = document.createElement('option');\n        item.value = cbo.childNodes.length.toString();\n        item.text = `${cipher.description} (v${cipher.version})`;\n        cbo.add(item);\n    }\n\n    cbo.value = initialValue.toString();\n}\n\nfunction clearSourceVisualCue(): void {\n    txtReEncryptSource.style.removeProperty('background-color');\n}\n\nfunction clearTargetVisualCue(): void {\n    txtReEncryptTarget.style.removeProperty('background-color');\n}\n\nfunction setSourceVisualCueError() {\n    txtReEncryptSource.style.setProperty('background-color', ui.ERROR_COLOR);\n}\n\nfunction setTargetVisualCueError() {\n    txtReEncryptTarget.style.setProperty('background-color', ui.ERROR_COLOR);\n}\n\nfunction clearAllVisualCues(): void {\n    clearSourceVisualCue();\n    clearTargetVisualCue();\n}\n\nasync function onReEncryptButtonClick(): Promise<boolean> {\n    ui.clearText(txtReEncryptTarget, true);\n    clearAllVisualCues();\n\n    if (txtReEncryptSource.value.length === 0) {\n        setSourceVisualCueError();\n        return false;\n    }\n\n    if (cboReEncryptFrom.value === cboReEncryptTo.value) {\n        setTargetVisualCueError();\n        return false;\n    }\n\n    const privatePart: string = getPrivatePart();\n    if (privatePart.length === 0) {\n        console.warn('Private part is empty');\n        return false;\n    }\n\n    const sourceCipherIndex = parseInt(cboReEncryptFrom.value, 10);\n    const targetCipherIndex = parseInt(cboReEncryptTo.value, 10);\n\n    const password: ArrayBuffer = stringUtils.stringToArray(privatePart);\n\n    const input: ArrayBuffer = stringUtils.fromBase16(txtReEncryptSource.value);\n    const decrypted: ArrayBuffer = await ciphers[sourceCipherIndex].decrypt(input, password, CancellationToken.none);\n    const reEncrypted: ArrayBuffer = await ciphers[targetCipherIndex].encrypt(decrypted, password, CancellationToken.none);\n\n    txtReEncryptTarget.value = arrayUtils.toBase16(reEncrypted);\n\n    return true;\n}\n\nexport class ReEncryptComponent implements IComponent, ITabInfo {\n    public readonly name: string = 'ReEncrypt';\n\n    public getTabButton(): HTMLButtonElement {\n        return btnTabReEncrypt;\n    }\n\n    public getTabContent(): HTMLElement {\n        return divTabReEncrypt;\n    }\n\n    public onTabSelected() {\n        storageOutputComponent.hide();\n        txtReEncryptSource.focus();\n    }\n\n    public getVaultHint(): string {\n        throw new Error('Not supported.');\n    }\n\n    public init(): void {\n        const errorLogsService = serviceManager.getService('errorLogs');\n        const logFunc = errorLogsService.createLogErrorMessageFunction();\n\n        ui.setupCopyButton(txtReEncryptTarget, btnCopyReEncryptTarget, logFunc);\n\n        // Mais est-ce que ce monde est serieux?\n        fillCipherComboBox(<HTMLSelectElement><any>cboReEncryptFrom, ciphers.length - 2);\n        fillCipherComboBox(<HTMLSelectElement><any>cboReEncryptTo, ciphers.length - 1);\n\n        txtReEncryptSource.addEventListener('input', () => {\n            if (txtReEncryptSource.value.length > 0) {\n                clearSourceVisualCue();\n            }\n        });\n\n        btnClearReEncryptSource.addEventListener('click', () => {\n            ui.clearText(txtReEncryptSource, true);\n        });\n\n        btnClearReEncryptTarget.addEventListener('click', () => {\n            ui.clearText(txtReEncryptTarget, true);\n        });\n\n        ui.setupFeedbackButton(btnReEncrypt, onReEncryptButtonClick, logFunc);\n    }\n}\n","import * as plainObject from '../../PlainObject';\nimport * as stringUtils from '../../stringUtils';\nimport { SearchMatchFunction, PositionMarker } from '../../searchMatchFunctions';\n\nexport const DEEP_MODE_NONE = 0;\nexport const DEEP_MODE_UP = 1;\nexport const DEEP_MODE_DOWN = 2;\n\nconst TREE_ELEMENT_HEIGHT = 30;\n\nconst HORIZONTAL_LINE_VERTICAL_OFFSET = Math.floor(TREE_ELEMENT_HEIGHT / 2);\nconst HORIZONTAL_LINE_LENGTH = 12;\nconst VERTICAL_BAR_OFFSET = 6;\n\nexport interface TreeNodeCreationController {\n    isLeaf(path: string, key: string, value: any): boolean;\n    createTreeNodeContentElements(path: string, key: string, value: any): HTMLElement[];\n}\n\nexport class TreeNode {\n    protected readonly parent: TreeNode | null;\n    protected readonly children: TreeNode[] = [];\n\n    protected readonly rootElement: HTMLElement;\n    protected readonly contentContainerElement: HTMLElement;\n    protected readonly childrenContainerElement: HTMLElement;\n\n    protected readonly treeNodeCreationController: TreeNodeCreationController;\n\n    protected readonly path: string;\n    protected readonly key: string;\n    protected readonly value: any;\n\n    public get element(): HTMLElement {\n        return this.rootElement;\n    }\n\n    public get isVisible(): boolean {\n        return this.rootElement.style.display !== 'none';\n    }\n\n    public getVisibleChildCount(): number {\n        let visibleChildCount = 0;\n\n        for (const child of this.children) {\n            if (child.isVisible) {\n                visibleChildCount += 1;\n            }\n        }\n\n        return visibleChildCount;\n    }\n\n    public getVisibleLeafCount(): number {\n        if (this.isVisible === false) {\n            return 0;\n        }\n\n        let visibleLeafCount = 1;\n\n        for (const child of this.children) {\n            visibleLeafCount += child.getVisibleLeafCount();\n        }\n\n        return visibleLeafCount;\n    }\n\n    private addChild(child: TreeNode) {\n        this.childrenContainerElement.appendChild(child.rootElement);\n        this.children.push(child);\n    }\n\n    private createChildNodes(object: plainObject.PlainObject) {\n        for (const [childKey, childValue] of Object.entries(object)) {\n            const decodedChildKey = stringUtils.escapeAndDecodeUtfString(childKey);\n            const child = new TreeNode(this, `${this.path}/${decodedChildKey}`, decodedChildKey, childValue, this.treeNodeCreationController);\n            this.addChild(child);\n        }\n    }\n\n    constructor(parent: TreeNode | null, path: string, key: string, value: any, treeNodeCreationController: TreeNodeCreationController) {\n        this.parent = parent;\n        this.path = path;\n        this.key = key;\n        this.value = value;\n        this.treeNodeCreationController = treeNodeCreationController;\n\n        this.rootElement = document.createElement('div');\n        this.setRootElementStyle();\n\n        // Construct title DOM element.\n        this.contentContainerElement = document.createElement('div');\n        this.setTitleElementStyle();\n\n        for (const element of this.createTreeNodeContentElements()) {\n            this.contentContainerElement.appendChild(element);\n        }\n\n        this.rootElement.appendChild(this.contentContainerElement);\n\n        // Construct children container DOM element.\n        this.childrenContainerElement = document.createElement('div');\n        this.rootElement.appendChild(this.childrenContainerElement);\n        this.setChildrenContainerElementStyle();\n\n        const isLeaf = treeNodeCreationController.isLeaf(path, key, value);\n\n        if (isLeaf === false && plainObject.isPlainObject(value)) {\n            this.createChildNodes(value);\n        } else if (isLeaf && value.customKeys) {\n            this.createChildNodes(value.customKeys);\n        }\n\n        if (parent) {\n            // Construct lines DOM elements.\n            this.setupLinesElements('#D0D0D0');\n        }\n    }\n\n    private createTreeNodeContentElements(): HTMLElement[] {\n        return this.treeNodeCreationController.createTreeNodeContentElements(this.path, this.key, this.value);\n    }\n\n    private setRootElementStyle(): void {\n        this.rootElement.classList.add('treenode-root');\n        this.rootElement.style.display = 'grid';\n\n        let height = 4; // Gives a bit of top spacing.\n        let childrenOffset = 0;\n\n        if (this.parent) {\n            height = TREE_ELEMENT_HEIGHT;\n        }\n        if (this.parent && this.parent.parent) {\n            childrenOffset = HORIZONTAL_LINE_LENGTH;\n        }\n\n        this.rootElement.style.gridTemplateRows = `${height}px 1fr`;\n        this.rootElement.style.gridTemplateColumns = `${childrenOffset}px ${VERTICAL_BAR_OFFSET}px 1fr`;\n    }\n\n    private verticalLineElement: HTMLElement | null = null;\n\n    private setupLinesElements(color: string): void {\n        const verticalLineElement = document.createElement('div');\n        verticalLineElement.classList.add('treenode-vertical-line');\n        verticalLineElement.style.gridColumn = '2';\n        verticalLineElement.style.gridRow = '2';\n        verticalLineElement.style.width = '100%';\n        verticalLineElement.style.borderRight = `1px solid ${color}`;\n        this.verticalLineElement = verticalLineElement;\n        this.rootElement.appendChild(verticalLineElement);\n\n        if (this.parent && this.parent.parent) {\n            const horizontalLineElement = document.createElement('div');\n            horizontalLineElement.classList.add('treenode-horizontal-line');\n            horizontalLineElement.style.gridColumn = '1';\n            horizontalLineElement.style.gridRow = '1';\n            horizontalLineElement.style.width = '100%';\n            horizontalLineElement.style.height = `${HORIZONTAL_LINE_VERTICAL_OFFSET}px`;\n            horizontalLineElement.style.borderBottom = `1px solid ${color}`;\n            this.rootElement.appendChild(horizontalLineElement);\n        }\n\n        this.updateLines();\n    }\n\n    private updateLines(): void {\n        if (this.verticalLineElement === null) {\n            return;\n        }\n\n        const visibleChildCount = this.getVisibleChildCount();\n\n        if (visibleChildCount === 0) {\n            this.verticalLineElement.style.height = '0px';\n            return;\n        }\n\n        let totalVisibleLeafCount = 1;\n\n        for (let i = 0; i < visibleChildCount - 1; i += 1) {\n            if (this.children[i].isVisible) {\n                totalVisibleLeafCount += this.children[i].getVisibleLeafCount();\n            }\n        }\n\n        const bottomPosition = (totalVisibleLeafCount * TREE_ELEMENT_HEIGHT) - TREE_ELEMENT_HEIGHT + HORIZONTAL_LINE_VERTICAL_OFFSET + 1;\n\n        this.verticalLineElement.style.height = `${bottomPosition}px`;\n    }\n\n    private setTitleElementStyle(): void {\n        if (!this.contentContainerElement) {\n            return;\n        }\n\n        this.contentContainerElement.classList.add('treenode-title');\n        this.contentContainerElement.style.gridColumn = '2 / span 2';\n        this.contentContainerElement.style.gridRow = '1';\n        this.contentContainerElement.style.marginLeft = '3px';\n        this.contentContainerElement.style.alignSelf = 'center';\n    }\n\n    private setChildrenContainerElementStyle(): void {\n        this.childrenContainerElement.classList.add('treenode-children-container');\n        this.childrenContainerElement.style.gridColumn = '3';\n        this.childrenContainerElement.style.gridRow = '2';\n    }\n\n    private resetTitle(deepMode: number): void {\n        if (this.contentContainerElement) {\n            this.contentContainerElement.innerHTML = '';\n            for (const element of this.createTreeNodeContentElements()) {\n                this.contentContainerElement.appendChild(element);\n            }\n        }\n\n        if (deepMode === DEEP_MODE_UP && this.parent) {\n            this.parent.resetTitle(deepMode);\n        }\n\n        if (deepMode === DEEP_MODE_DOWN) {\n            for (const child of this.children) {\n                child.resetTitle(deepMode);\n            }\n        }\n    }\n\n    public show(deepMode: number): void {\n        this.rootElement.style.display = 'grid';\n\n        if (deepMode === DEEP_MODE_UP && this.parent) {\n            this.parent.show(deepMode);\n        }\n\n        if (deepMode === DEEP_MODE_DOWN) {\n            for (const child of this.children) {\n                child.show(deepMode);\n            }\n        }\n\n        this.updateLines();\n    }\n\n    public hide(deepMode: number): void {\n        this.rootElement.style.display = 'none';\n\n        if (deepMode === DEEP_MODE_UP && this.parent) {\n            this.parent.hide(deepMode);\n        }\n\n        if (deepMode === DEEP_MODE_DOWN) {\n            for (const child of this.children) {\n                child.hide(deepMode);\n            }\n        }\n\n        this.updateLines();\n    }\n\n    private static createSpan(text: string, color?: string): HTMLElement {\n        const element = document.createElement('span');\n        if (color) {\n            element.style.backgroundColor = color;\n            element.style.borderRadius = '2px';\n        }\n        element.innerText = text;\n        return element;\n    }\n\n    private static createColoredSpan(text: string, markers: PositionMarker[]): HTMLElement {\n        const root = document.createElement('span');\n\n        let pos = 0;\n\n        for (const marker of markers) {\n            if (marker.pos !== pos) {\n                root.appendChild(TreeNode.createSpan(text.substring(pos, marker.pos)));\n            }\n\n            root.appendChild(TreeNode.createSpan(text.substring(marker.pos, marker.pos + marker.len), '#80C0FF'));\n\n            pos = marker.pos + marker.len;\n        }\n\n        if (pos < text.length) {\n            root.appendChild(TreeNode.createSpan(text.substring(pos, text.length)));\n        }\n\n        return root;\n    }\n\n    private static findLeafElement(element: Element): Element {\n        if (element.children.length === 0) {\n            return element;\n        }\n\n        return TreeNode.findLeafElement(element.children[0]);\n    }\n\n    public filter(searchText: string, matchFunction: SearchMatchFunction): void {\n        if (!searchText) {\n            this.resetTitle(DEEP_MODE_DOWN);\n            this.show(DEEP_MODE_DOWN);\n            this.updateLines();\n            return;\n        }\n\n        if (this.contentContainerElement.childNodes.length === 0) {\n            return;\n        }\n\n        const markers: PositionMarker[] = [];\n\n        const titleElement = TreeNode.findLeafElement(this.contentContainerElement) as HTMLElement;\n\n        const isMatch = matchFunction(titleElement.innerText, searchText, markers);\n\n        if (isMatch) {\n            const child = TreeNode.createColoredSpan(titleElement.innerText, markers);\n\n            titleElement.innerHTML = '';\n            titleElement.appendChild(child);\n\n            this.show(DEEP_MODE_UP);\n            this.show(DEEP_MODE_DOWN);\n        } else {\n            this.resetTitle(DEEP_MODE_DOWN);\n        }\n\n        for (const child of this.children) {\n            child.filter(searchText, matchFunction);\n        }\n\n        this.updateLines();\n    }\n}\n","export interface PositionMarker {\n    pos: number;\n    len: number;\n}\n\nexport type SearchMatchFunction = (lhs: string, rhs: string, markers: PositionMarker[]) => boolean;\n\nfunction toLowerCaseDeaccented(str: string): string {\n    return str.toLowerCase().normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n}\n\nfunction indexedFuzzySearchMatchFunction(lhs: string, lhsIndex: number, rhs: string, markers: PositionMarker[]): boolean {\n    if (!rhs) {\n        return true;\n    }\n\n    lhs = toLowerCaseDeaccented(lhs);\n    rhs = toLowerCaseDeaccented(rhs);\n\n    for (let len = rhs.length; len >= 1; len -= 1) {\n        const subWord = rhs.substring(0, len);\n        const foundPos = lhs.indexOf(subWord, lhsIndex);\n\n        if (foundPos >= 0) {\n            markers.push({\n                pos: foundPos,\n                len: subWord.length\n            });\n\n            return indexedFuzzySearchMatchFunction(lhs, foundPos + subWord.length, rhs.substring(len), markers);\n        }\n    }\n\n    return false;\n}\n\nexport function fuzzySearchMatchFunction(lhs: string, rhs: string, markers: PositionMarker[]): boolean {\n    return indexedFuzzySearchMatchFunction(lhs, 0, rhs, markers);\n}\n\nexport function containsSearchMatchFunction(lhs: string, rhs: string, markers: PositionMarker[]): boolean {\n    const index = toLowerCaseDeaccented(lhs).indexOf(toLowerCaseDeaccented(rhs));\n\n    if (index < 0) {\n        return false;\n    }\n\n    markers.push({\n        pos: index,\n        len: rhs.length\n    });\n\n    return true;\n}\n\nexport function exactSearchMatchFunction(lhs: string, rhs: string, markers: PositionMarker[]): boolean {\n    if (toLowerCaseDeaccented(lhs) === toLowerCaseDeaccented(rhs)) {\n        markers.push({\n            pos: 0,\n            len: rhs.length\n        });\n        return true;\n    }\n\n    return false;\n}\n","import { getElementById } from '../../ui';\nimport { IComponent } from '../IComponent';\nimport { ITabInfo } from '../../TabControl';\nimport { IVaultComponent } from '../vaultComponent';\nimport { TreeNode, TreeNodeCreationController, DEEP_MODE_DOWN } from './TreeNode';\nimport * as plainObject from '../../PlainObject';\nimport * as ui from '../../ui';\nimport { fuzzySearchMatchFunction, containsSearchMatchFunction, exactSearchMatchFunction, SearchMatchFunction } from '../../searchMatchFunctions';\nimport * as serviceManager from '../../services/serviceManger';\nimport { PasswordService } from '../../services/passwordService';\nimport { CipherService } from 'services/cipherService';\n\nconst ONE_YEAR_IN_MILLISECONDS = 365 * 24 * 3600 * 1000;\n\nconst btnTabVaultTabTreeView = getElementById('btnTabVaultTabTreeView') as HTMLButtonElement;\nconst divTabVaultTabTreeView = getElementById('divTabVaultTabTreeView');\n\nconst trvVaultTreeView = getElementById('trvVaultTreeView');\nconst txtVaultTreeViewSearch = getElementById('txtVaultTreeViewSearch') as HTMLInputElement;\nconst cboVaultTreeViewSearchType = getElementById('cboVaultTreeViewSearchType') as HTMLSelectElement;\n\nlet rootTreeNode: TreeNode;\n\ninterface SearchMatchFunctionDescription {\n    text: string,\n    function: SearchMatchFunction\n}\n\nconst searchMatchFunctionDescriptions: SearchMatchFunctionDescription[] = [\n    { text: 'Fuzzy', function: fuzzySearchMatchFunction },\n    { text: 'Contains', function: containsSearchMatchFunction },\n    { text: 'Exact', function: exactSearchMatchFunction },\n];\n\nfunction onSearchVaultInputChanged(): void {\n    if (!rootTreeNode) {\n        return;\n    }\n\n    const index: number = cboVaultTreeViewSearchType.selectedIndex;\n    const searchMatchFunction: SearchMatchFunction = searchMatchFunctionDescriptions[index].function;\n\n    rootTreeNode.hide(DEEP_MODE_DOWN);\n    rootTreeNode.filter(txtVaultTreeViewSearch.value.toLocaleLowerCase(), searchMatchFunction);\n}\n\nfunction populateSearchFunctions(): void {\n    cboVaultTreeViewSearchType.innerHTML = '';\n\n    for (let description of searchMatchFunctionDescriptions) {\n        const option = document.createElement('option');\n        option.text = description.text;\n        cboVaultTreeViewSearchType.appendChild(option);\n    }\n}\n\nclass VaultTreeNodeCreationController implements TreeNodeCreationController {\n    private readonly passwordService: PasswordService;\n    private readonly cipherService: CipherService;\n    private readonly buttonBackgroundColor: string;\n\n    public constructor(private readonly maxTimestampInMilliseconds: number) {\n        this.passwordService = serviceManager.getService('password');\n        this.cipherService = serviceManager.getService('cipher');\n\n        const buttonStyle = window.getComputedStyle(btnTabVaultTabTreeView);\n\n        this.buttonBackgroundColor = buttonStyle.backgroundColor;\n    }\n\n    private async runPassword(value: any): Promise<void> {\n        await this.passwordService.generateAndCopyPasswordToClipboard(\n            value.public,\n            value.alphabet,\n            value.length,\n            value.version,\n        );\n    }\n\n    private async editPassword(path: string, value: any): Promise<boolean> {\n        return await this.passwordService.activate(path, value);\n    }\n\n    private async runCipher(path: string, key: string, value: any): Promise<boolean> {\n        return await this.cipherService.activate(path, key, value);\n    }\n\n    private static isPasswordObject(key: string, obj: plainObject.PlainObject): boolean {\n        if (key !== 'password') {\n            return false;\n        }\n\n        if (!obj || !plainObject.isPlainObject(obj) || typeof obj.public !== 'string' || obj.public.length < 4) {\n            return false;\n        }\n\n        return true;\n    }\n\n    private static isCipherObject(obj: plainObject.PlainObject): boolean {\n        if (!obj || !plainObject.isPlainObject(obj)) {\n            return false;\n        }\n\n        if (typeof obj.value !== 'string' || obj.value.length <= 0) {\n            return false;\n        }\n\n        if (typeof obj.version !== 'number' || obj.version < 0) {\n            return false;\n        }\n\n        return true;\n    }\n\n    private static isCiphersObject(key: string, obj: plainObject.PlainObject): boolean {\n        if (key !== 'ciphers') {\n            return false;\n        }\n\n        if (!obj || !plainObject.isPlainObject(obj)) {\n            return false;\n        }\n\n        for (const sub of Object.values(obj)) {\n            if (!VaultTreeNodeCreationController.isCipherObject(sub)) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    private static isHint(key: string, value: any) {\n        if (VaultTreeNodeCreationController.isCiphersObject(key, value) ||\n            VaultTreeNodeCreationController.isCipherObject(value) ||\n            VaultTreeNodeCreationController.isPasswordObject(key, value) ||\n            plainObject.isPlainObject(value)) {\n            return false;\n        }\n\n        return true;\n    }\n\n    public isLeaf(path: string, key: string, value: any): boolean {\n        if (VaultTreeNodeCreationController.isCipherObject(value) ||\n            VaultTreeNodeCreationController.isPasswordObject(key, value)) {\n            return true;\n        }\n\n        return plainObject.isPlainObject(value) === false;\n    }\n\n    private computeTimestampProgress(timestamp: Date): number {\n        const now = Date.now()\n        const then = timestamp.getTime();\n        const diff = now - then;\n\n        const timespan = Math.max(0, Math.min(diff, this.maxTimestampInMilliseconds));\n\n        return timespan / this.maxTimestampInMilliseconds;\n    }\n\n    private static dateToString(date: Date): string {\n        return `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()}`;\n    }\n\n    private createButton(text: string, timestamp: Date) {\n        const button = document.createElement('button');\n\n        button.title = `Last modified: ${VaultTreeNodeCreationController.dateToString(timestamp)}`;\n\n        const grid = document.createElement('div');\n        grid.classList.add('content-container');\n\n        const textSpan = document.createElement('span');\n        textSpan.innerText = text;\n        textSpan.classList.add('text');\n        grid.appendChild(textSpan);\n\n        const timestampDiv = document.createElement('div');\n        timestampDiv.classList.add('timestamp');\n        timestampDiv.style.backgroundColor = this.buttonBackgroundColor;\n        timestampDiv.style.width = `${Math.round((1 - this.computeTimestampProgress(timestamp)) * 100)}%`;\n        grid.appendChild(timestampDiv);\n\n        button.appendChild(grid);\n\n        return button;\n    }\n\n    public createTreeNodeContentElements(path: string, key: string, value: any): HTMLElement[] {\n        if (VaultTreeNodeCreationController.isPasswordObject(key, value)) {\n            const version: number = value.version;\n            const isLatest = this.passwordService.isLatestVersion(version);\n\n            const lastModified = new Date(value.datetime);\n\n            const button = this.createButton('Password', lastModified);\n            button.classList.add('password');\n            button.style.justifySelf = 'start';\n            button.style.minWidth = '80px';\n\n            if (isLatest === false) {\n                button.setAttribute('not-latest', ` Password version ${version}, latest is ${this.passwordService.getLatestVersion()}`);\n                button.classList.add('not-latest');\n            }\n\n            const errorLogsService = serviceManager.getService('errorLogs');\n            const logFunc = errorLogsService.createLogErrorMessageFunction();\n\n            ui.setupFeedbackButton(button, async () => await this.runPassword(value), logFunc);\n\n            const editButton = document.createElement('button');\n            editButton.classList.add('edit-password');\n            editButton.innerText = '';\n            editButton.title = 'Edit password generation details';\n\n            ui.setupFeedbackButton(editButton, async () => await this.editPassword(path, value), logFunc);\n\n            return [button, editButton];\n        } else if (VaultTreeNodeCreationController.isCipherObject(value)) {\n            const version: number = value.version;\n            const isLatest = this.cipherService.isLatestVersion(version);\n\n            const lastModified = new Date(value.datetime);\n\n            const button = this.createButton(key, lastModified);\n            button.classList.add('cipher');\n            button.style.justifySelf = 'start';\n\n            if (isLatest === false) {\n                button.setAttribute('not-latest', ` Cipher version ${version}, latest is ${this.cipherService.getLatestVersion()}`);\n                button.classList.add('not-latest');\n            }\n\n            const errorLogsService = serviceManager.getService('errorLogs');\n            const logFunc = errorLogsService.createLogErrorMessageFunction();\n\n            ui.setupFeedbackButton(button, async () => await this.runCipher(path, key, value), logFunc);\n\n            return [button];\n        } else if (VaultTreeNodeCreationController.isHint(key, value)) {\n            const label = document.createElement('span');\n            label.style.justifySelf = 'start';\n            label.innerText = `${key}: ${value}`;\n\n            return [label];\n        }\n\n        const div = document.createElement('div');\n        div.innerText = key;\n        return [div];\n    }\n}\n\nexport class VaultTreeViewComponent implements IComponent, ITabInfo, IVaultComponent {\n    public readonly name: string = 'VaultTreeView';\n\n    public onVaultLoaded(vault: plainObject.PlainObject): void {\n        const maxTimespan = 3 * ONE_YEAR_IN_MILLISECONDS;\n\n        rootTreeNode = new TreeNode(null, '<root>', '', vault, new VaultTreeNodeCreationController(maxTimespan));\n\n        trvVaultTreeView.innerHTML = '';\n        trvVaultTreeView.appendChild(rootTreeNode.element);\n\n        onSearchVaultInputChanged();\n    }\n\n    public getTabButton(): HTMLButtonElement {\n        return btnTabVaultTabTreeView;\n    }\n\n    public getTabContent(): HTMLElement {\n        return divTabVaultTabTreeView;\n    }\n\n    public onTabSelected(): void {\n        txtVaultTreeViewSearch.focus();\n    }\n\n    public getVaultHint(): string {\n        throw new Error('Not supported.');\n    }\n\n    public init(): void {\n        populateSearchFunctions();\n\n        txtVaultTreeViewSearch.addEventListener('input', onSearchVaultInputChanged);\n        cboVaultTreeViewSearchType.addEventListener('change', onSearchVaultInputChanged);\n    }\n}\n","import { getElementById } from '../../ui';\nimport { IComponent } from '../IComponent';\nimport { ITabInfo } from '../../TabControl';\nimport { IVaultComponent } from '../vaultComponent';\nimport * as plainObject from '../../PlainObject';\n\nconst btnTabVaultTabTextView = getElementById('btnTabVaultTabTextView') as HTMLButtonElement;\nconst divTabVaultTabTextView = getElementById('divTabVaultTabTextView');\n\nconst txtVault = getElementById('txtVault') as HTMLInputElement;\n\nexport class VaultTextViewComponent implements IComponent, ITabInfo, IVaultComponent {\n    public readonly name: string = 'VaultTextView';\n\n    public onVaultLoaded(vault: plainObject.PlainObject): void {\n        txtVault.value = JSON.stringify(vault, undefined, 4);\n    }\n\n    public getTabButton(): HTMLButtonElement {\n        return btnTabVaultTabTextView;\n    }\n\n    public getTabContent(): HTMLElement {\n        return divTabVaultTabTextView;\n    }\n\n    public onTabSelected(): void {\n    }\n\n    public getVaultHint(): string {\n        throw new Error('Not supported.');\n    }\n\n    public init(): void {\n    }\n}\n","import { VaultComponent } from '../components/vaultComponent';\n\nexport class VaultService {\n    private readonly vaultComponent: VaultComponent;\n\n    public constructor(vaultComponent: VaultComponent) {\n        this.vaultComponent = vaultComponent;\n    }\n\n    public computeUserPathMatchDepth(path: string): number {\n        return this.vaultComponent.computeUserPathMatchDepth(path);\n    }\n}\n","import { getElementById, setupFeedbackButton } from '../ui';\n\nimport { IComponent } from './IComponent';\nimport { ITabInfo, TabControl } from '../TabControl';\n\nimport * as storageOutputComponent from './storageOutputComponent';\n\nimport { SecureLocalStorage } from '../storages/SecureLocalStorage';\nimport { IVaultStorage } from '../storages/IVaultStorage';\nimport { GitHubPersonalAccessTokenVaultStorage } from '../storages/GitHubVaultStorage';\nimport { hasPrivatePart, protectAndLockPrivatePart, hidePrivatePartContainer } from './privatePartComponent';\nimport * as plainObject from '../PlainObject';\nimport { VaultTreeViewComponent } from './vaultComponents/treeViewComponent';\nimport { VaultTextViewComponent } from './vaultComponents/textViewComponent';\n\nimport * as serviceManager from '../services/serviceManger';\nimport { VaultService } from '../services/vaultService';\n\nexport interface IVaultComponent {\n    onVaultLoaded(vault: plainObject.PlainObject): void;\n}\n\nconst divTabVault = getElementById('divTabVault');\nconst btnTabVault = getElementById('btnTabVault') as HTMLButtonElement;\n\nconst btnRefreshVault = getElementById('btnRefreshVault') as HTMLButtonElement;\nconst btnClearVaultSettings = getElementById('btnClearVaultSettings') as HTMLButtonElement;\nconst btnViewVaultSettings = getElementById('btnViewVaultSettings') as HTMLButtonElement;\n\nconst elements: any[] = [\n    new VaultTreeViewComponent(),\n    new VaultTextViewComponent(),\n];\n\nconst tabs: ITabInfo[] = elements.filter(e => (e as ITabInfo).getTabButton !== undefined);\nconst components: (IComponent & IVaultComponent)[] = elements.filter(e => (e as IComponent).init !== undefined);\n\nconst subTabs = new TabControl(tabs);\n\nlet vaultStorage: IVaultStorage = new GitHubPersonalAccessTokenVaultStorage(new SecureLocalStorage());\n\nlet vaultObject: plainObject.PlainObject | null = null;\n\nfunction computeUserPathMatchDepth(path: string): number {\n    if (vaultObject === null) {\n        return 0;\n    }\n\n    let obj = vaultObject;\n\n    const pathArray = path.split('/');\n\n    for (let i = 0; i < pathArray.length; i += 1) {\n        if (!obj[pathArray[i]]) {\n            return i;\n        }\n\n        // TODO: Filter here to not go further down ItchyObjects.\n\n        obj = obj[pathArray[i]];\n    }\n\n    return pathArray.length;\n}\n\nasync function reloadVault(): Promise<boolean> {\n    let content: string | null = await vaultStorage.getVaultContent();\n\n    if (content === null) {\n        return false;\n    }\n\n    try {\n        let obj = JSON.parse(content) as plainObject.PlainObject;\n        obj = plainObject.objectDeepSort(obj);\n\n        vaultObject = obj;\n\n        let component: IVaultComponent;\n        for (component of components) {\n            component.onVaultLoaded(obj);\n        }\n\n        return true;\n    } catch (error) {\n        vaultObject = null;\n        alert('Failed to parse vault content, it needs to be fixed and be valid JSON data.');\n        const message = (error as Error).message;\n        if (message) {\n            alert(message);\n            console.error(message);\n        }\n        return false;\n    }\n}\n\nasync function onRefreshVaultButtonClick(): Promise<boolean> {\n    if (hasPrivatePart() === false) {\n        alert('You must enter a master key first.');\n        return false;\n    }\n\n    const result: boolean = await reloadVault();\n\n    if (result) {\n        protectAndLockPrivatePart();\n        hidePrivatePartContainer();\n    }\n\n    return result;\n}\n\nfunction onClearVaultSettingsButtonClick(): void {\n    if (prompt('Are you sure you want to clear the vault settings ?\\nType \\'y\\' to accept', '') !== 'y') {\n        return;\n    }\n\n    vaultStorage.clear();\n}\n\nfunction onViewVaultSettingsButtonClick(): void {\n    alert(vaultStorage.getVaultSettings());\n}\n\nexport class VaultComponent implements IComponent, ITabInfo {\n    public readonly name: string = 'Vault';\n\n    public computeUserPathMatchDepth(path: string) {\n        return computeUserPathMatchDepth(path);\n    }\n\n    public getTabButton(): HTMLButtonElement {\n        return btnTabVault;\n    }\n\n    public getTabContent(): HTMLElement {\n        return divTabVault;\n    }\n\n    public onTabSelected(): void {\n        storageOutputComponent.hide();\n        tabs[subTabs.activeTabIndex].onTabSelected();\n    }\n\n    public getVaultHint(): string {\n        throw new Error('Not supported.');\n    }\n\n    public init(): void {\n        const errorLogsService = serviceManager.getService('errorLogs');\n        const logFunc = errorLogsService.createLogErrorMessageFunction();\n\n        setupFeedbackButton(btnRefreshVault, onRefreshVaultButtonClick, logFunc);\n        btnClearVaultSettings.addEventListener('click', onClearVaultSettingsButtonClick);\n        btnViewVaultSettings.addEventListener('click', onViewVaultSettingsButtonClick);\n\n        const vaultService = new VaultService(this);\n        serviceManager.registerService('vault', vaultService);\n\n        let component: IComponent;\n        for (component of components) {\n            component.init();\n        }\n    }\n}\n","import { ErrorLogsComponent } from 'components/errorLogsComponent';\n\nexport class ErrorLogsService {\n    constructor(private errorLogsComponent: ErrorLogsComponent) {\n    }\n\n    public createLogErrorMessageFunction(): (...args: any[]) => void {\n        return (args) => this.logErrorMessage(args);\n    }\n\n    public logErrorMessage(...args: any[]): void {\n        this.errorLogsComponent.logErrorMessage(...args);\n    }\n}\n","import { getElementById } from '../ui';\nimport { ITabInfo } from '../TabControl';\nimport * as serviceManager from '../services/serviceManger';\nimport { ErrorLogsService } from '../services/errorLogsService';\nimport * as storageOutputComponent from './storageOutputComponent';\n\nconst divErrorLogs = getElementById('divErrorLogs');\nconst btnTabErrorLogs = getElementById('btnTabErrorLogs') as HTMLButtonElement;\n\nconst btnClearErrorLogs = getElementById('btnClearErrorLogs') as HTMLButtonElement;\nconst txtErrorLogs = getElementById('txtErrorLogs') as HTMLTextAreaElement;\n\nexport class ErrorLogsComponent implements ITabInfo {\n    constructor() {\n        window.addEventListener('error', (e) => this.onError(e), true);\n        window.addEventListener('unhandledrejection', (e) => this.onUnhandledRejection(e), true);\n\n        btnClearErrorLogs.addEventListener('click', () => {\n            txtErrorLogs.value = '';\n        });\n\n        serviceManager.registerService('errorLogs', new ErrorLogsService(this));\n    }\n\n    public logErrorMessage(...args: any[]): void {\n        if (args.length == 0) {\n            return;\n        }\n\n        const now = new Date().toISOString();\n\n        let message = args[0].toString();\n\n        for (let i = 1; i < args.length; i++) {\n            message += ` ${args[i].toString()}`;\n        }\n\n        txtErrorLogs.value += `[${now}] ${message}\\n\\n`;\n    }\n\n    public onUnhandledRejection(errorEvent: PromiseRejectionEvent): void {\n        this.logErrorMessage(`Promise rejected, reason: ${errorEvent.reason}`);\n    }\n\n    public onError(errorEvent: ErrorEvent): void {\n        this.logErrorMessage(`${errorEvent.message}\\n${errorEvent.toString()}`);\n    }\n\n    getTabButton(): HTMLButtonElement {\n        return btnTabErrorLogs;\n    }\n\n    getTabContent(): HTMLElement {\n        return divErrorLogs;\n    }\n\n    onTabSelected(): void {\n        storageOutputComponent.hide();\n    }\n}\n","import { getElementById } from '../ui';\nimport { TabControl, ITabInfo } from '../TabControl';\n\nimport { IComponent } from './IComponent';\nimport { PrivatePartComponent } from './privatePartComponent';\nimport { PasswordComponent } from './passwordComponent';\nimport { CipherComponent } from './cipherComponent';\nimport { ReEncryptComponent } from './reEncryptComponent';\nimport { VaultComponent } from './vaultComponent';\n\nimport * as storageOutputComponent from './storageOutputComponent';\nimport { ErrorLogsComponent } from './errorLogsComponent';\n\nconst nothingTabInfo: ITabInfo = {\n    getTabButton(): HTMLButtonElement {\n        return getElementById('btnTabNothing') as HTMLButtonElement;\n    },\n    getTabContent(): HTMLElement {\n        return getElementById('divTabNothing');\n    },\n    onTabSelected(): void {\n        storageOutputComponent.hide();\n    }\n}\n\nconst elements: any[] = [\n    nothingTabInfo,\n    new PrivatePartComponent(),\n    new PasswordComponent(),\n    new CipherComponent(),\n    new ReEncryptComponent(),\n    new ErrorLogsComponent(),\n    new storageOutputComponent.StorageOutputComponent(),\n    new VaultComponent(),\n];\n\nconst tabs: ITabInfo[] = elements.filter(e => (e as ITabInfo).getTabButton !== undefined);\nconst components: IComponent[] = elements.filter(e => (e as IComponent).init !== undefined);\n\nconst tabControl = new TabControl(tabs);\n\nexport class RootComponent implements IComponent {\n    public readonly name: string = 'Root';\n\n    public constructor() {\n    }\n\n    public getVaultHint(): string {\n        throw new Error('Not supported.');\n    }\n\n    public init(): void {\n        let component: IComponent;\n        for (component of components) {\n            component.init();\n        }\n    }\n\n    public getActiveComponent(): IComponent | null {\n        const component = tabs[tabControl.activeTabIndex] as any;\n\n        if (component.init !== undefined) {\n            return component as IComponent;\n        }\n\n        return null;\n    }\n}\n\nexport const rootComponent = new RootComponent();\n","import { getElementById } from './ui';\nimport { rootComponent } from './components/rootComponent';\n\ndeclare const COMMITHASH: string;\n\nconst version = COMMITHASH.substring(0, 11);\nconst githubLink = '<a href=\"https://github.com/TanukiSharp/ItchyPassword\" target=\"_blank\">github</a>';\n\ngetElementById('divInfo').innerHTML = `${version}<br/>${githubLink}`;\n\nrootComponent.init();\n"],"names":["ERROR_COLOR","getElementById","elementName","element","document","Error","async","writeToClipboard","text","logFunc","navigator","clipboard","writeText","error","typedError","console","stack","clearText","txt","refocus","value","focus","setupFeedbackButton","button","action","logError","throttleTimeout","clearFunc","timeout","start","undefined","clearTimeout","end","setTimeout","createThrottleTimeout","classList","remove","clickFunction","disabled","actionResult","result","Promise","add","addEventListener","setupCopyButton","showHide","isVisible","style","removeProperty","setProperty","showHideMany","elements","TabControl","tabs","_activeTabIndex","activeTabIndex","this","index","length","setActiveTab","i","getTabButton","tabInfo","getTabContent","onTabSelected","btnProtectTitleForProtect","divPrivatePartContainer","txtPrivatePart","txtPrivatePartConfirmation","btnProtect","spnProtectedConfirmation","spnPrivatePartSize","spnPrivatePartSizeConfirmation","privatePart","onChangedHandlers","getPrivatePart","protectAndLockPrivatePart","innerHTML","title","updatePrivatePartsMatching","onProtectButtonClick","protectPrivatePartAction","delay","reset","overrideDelay","window","onPrivatePartTextInput","onChangedHandler","toString","onPrivatePartConfirmationTextInput","BASE58_ALPHABET","Base58Encoding","name","description","encode","input","alphabet","byteLength","arrayView","DataView","carry","digits","j","getUint8","push","decode","ArrayBuffer","includes","bytes","c","indexOf","Uint8Array","reverse","buffer","BASE62_ALPHABET","availableEncodings","alphabetLength","BigInt","number","arrayBuffer","headeredBuffer","set","createHeaderedBuffer","multiplier","arrayBufferToUnsignedBigInt","remainder","asUintN","byteValue","Number","totalLength","diff","slice","unsignedBigIntToArrayBuffer","_base64Encode","_base64Decode","_base64ToUint6","base64Char","base64Input","blocksSize","inputLength","replace","outputLength","Math","ceil","outputBytes","value24Bits","outputIndex","inputIndex","inputIndexMod4","charCodeAt","inputIndexMod3","_uint6ToBase64","value6Bits","inputBytes","base64Output","inputBytesLength","constrainedShift","String","fromCodePoint","padding","substring","TaskCancelledError","_name","constructor","message","super","ERROR_NAME","Object","setPrototypeOf","prototype","static","isMatching","CancellationTokenSource","_isCancelled","_token","CancellationToken","isCancelled","token","cancel","source","none","_none","ensureNotCancelled","cancellationToken","encoding","getDerivedBytes","password","salt","iterations","baseKey","crypto","subtle","importKey","algorithm","hash","deriveKey","key","exportKey","truncate","stringToArray","str","TextEncoder","isPlainObject","hasOwnProperty","objectDeepSort","object","output","entries","sort","a","b","localeCompare","services","getService","serviceName","TypeError","service","registerService","instance","GitHubVaultStorageBase","secureLocalStorage","oneTimePassword","currentVaultContentHash","username","repositoryName","vaultFilename","getUsername","getRepositoryName","getVaultFilename","clear","removeItem","LOCAL_STORAGE_KEY_USERNAME","LOCAL_STORAGE_KEY_REPO","LOCAL_STORAGE_KEY_FILENAME","AUTH_TOKEN_KEY_NAME","constructTokenAuthString","constructFetchRequest","method","authHeader","body","headers","JSON","stringify","constructUrl","relativeUrl","BASE_URL","request","retryOnUnauthorized","url","requestInfo","response","fetch","status","prompt","getSetVaultParameter","promptText","defaultValue","localStorage","getItem","setItem","ensureVaultParameters","URL","location","defaultAccountUsername","defaultRepo","hostname","pathElements","pathname","split","resolve","ensureToken","getToken","constructVaultFileUrl","getVaultContent","warn","ok","setVaultContent","responseContent","json","sha","decodedContent","atob","content","trim","newContent","updateMessage","btoa","getVaultSettings","GitHubPersonalAccessTokenVaultStorage","authToken","CipherService","cipherComponent","latestVersion","findLatestCipher","version","isLatestVersion","getLatestVersion","activate","storageFullPath","cipherName","parameterKeys","setParameters","click","RECOMMENDED_ENCODING_NAME","btnTabCiphers","divTabCiphers","ciphers","encrypt","nonce","getRandomValues","passwordSalt","aesGcmParams","iv","passwordKey","decrypt","payload","derivedKey","btnClearAllCipherInfo","txtCipherName","txtCipherSource","txtCipherTarget","cboCipherVersion","cboCipherEncoding","btnEncrypt","btnDecrypt","spnCipherSourceLength","btnCopyCipherSource","btnClearCipherSource","spnCipherTargetLength","btnCopyCipherTarget","btnClearCipherTarget","cipherTargetLastChange","bestCipher","cipher","findCipherEncodingDropdownIndexByName","clearSourceVisualCue","setSourceVisualCueError","clearAllVisualCues","clearCipherTargetLastUpdate","updateCipherSourceLength","innerText","updateCipherTargetLength","setCipherTargetValue","isEncrypt","needDateTimeUpdate","Date","toISOString","updateCipherParameters","encodingIndex","selectedIndex","isValidEncodingIndex","datetime","encryptString","encrypted","decryptStringWithCipher","decrypted","array","TextDecoder","rethrowCancelled","onEncryptButtonClick","encryptedString","onDecryptButtonClick","decryptedString","CipherComponent","fullPathToStoragePath","fullPath","suffix","startsWith","endsWith","prefix","options","encodingName","findEncodingByName","findCipherByVersion","decryptStringWithVersion","alert","storagePath","customKeys","findCipherVersionDropdownIndexByVersion","getVaultHint","toLowerCase","init","createLogErrorMessageFunction","option","createElement","appendChild","setupCipherVersionsDropdown","setupCipherEncodingDropdown","SecureLocalStorage","encryptedItem","sortedCiphers","map","x","divStorageOutput","txtPath","lblMatchingPath","txtParameters","btnPushToVault","txtCustomKeys","_parameterKeys","_parameterPath","vaultStorage","pathToObjectChain","path","chainInfo","separatorIndex","tail","firstPath","remainingPath","node","head","tailParent","onPathTextInput","depth","computeUserPathMatchDepth","matchingPath","position","createMatchingPath","updateMatchingPath","update","onCustomKeysTextInput","updateCustomKeysDisplay","isValid","leaf","obj","parse","parseCustomKeys","keys","deepMerge","target","sourceKey","targetValue","sourceValue","pushToVault","vaultContentData","newData","vaultContent","activeComponent","rootComponent","getActiveComponent","hint","chars","findNonCharFromStart","findNonCharFromEnd","generateUpdateMessage","newVaultContentData","clearOutputs","parameterPath","setPathUI","setCustomKeysUI","show","hide","clearUI","clearMatchingPath","PasswordService","passwordComponent","CURRENT_PASSWORD_GENERATOR_VERSION","generateAndCopyPasswordToClipboard","publicPart","DEFAULT_ALPHABET","DEFAULT_LENGTH","keyString","generatePasswordString","max","run","btnTabPasswords","divTabPasswords","passwordGenerators","hkdfPurpose","_description","generatePassword","hkdfKey","sign","btnClearAllPasswordInfo","txtPublicPart","spnPublicPartSize","btnGeneratePublicPart","btnClearPublicPart","btnCopyPublicPart","btnShowHidePasswordOptionalFeatures","lblAlphabetLength","numOutputSizeRange","numOutputSizeNum","lblAlphabet","txtAlphabet","spnAlphabetSize","divPasswordAlphabetActions","btnResetAlphabet","lblPasswordVersion","cboPasswordVersion","txtResultPassword","spnResultPasswordLength","btnViewResultPassword","btnCopyResultPassword","lblGeneratingPassword","passwordPublicPartLastChange","copyPasswordFunction","onClearPublicPartButtonClick","updatePublicPartSize","updatePasswordPublicPartLastUpdate","updatePasswordGenerationParameters","onGeneratePublicPartButtonClick","randomString","byteCount","generateRandomBytes","updateResultPasswordLength","isAlphabetValid","sortedAlphabet","canRun","passwordGenerator","public","updateOutputSizeRangeToNum","updateOutputSizeNumToRange","min","parseInt","val","isNaN","onOutputSizeRangeInput","onOutputSizeNumInput","updateAlphabetSize","updateAlphabetValidityDisplay","onAlphabetTextInput","isAlphabetValidResult","onResetAlphabetButtonClick","resetAlphabet","onPasswordVersionChanged","findPasswordGeneratorByVersion","privatePrivateBytes","publicPartBytes","arrayBufferToUnsignedBigIntWithoutHeader","passwordTaskRunner","currentTokenSource","currentTask","microThreadId","isRunning","cancelInternal","throwTaskCanceledError","MAX_SAFE_INTEGER","localMicroThreadId","cancelAndExecute","taskFactory","localToken","runCore","findPasswordGeneratorFromUserInterface","onPublicPartTextInput","clearAll","btnTabReEncrypt","divTabReEncrypt","txtReEncryptSource","txtReEncryptTarget","cboReEncryptFrom","cboReEncryptTo","btnReEncrypt","btnClearReEncryptSource","btnCopyReEncryptTarget","btnClearReEncryptTarget","fillCipherComboBox","cbo","initialValue","item","childNodes","onReEncryptButtonClick","sourceCipherIndex","targetCipherIndex","reEncrypted","Array","call","join","HORIZONTAL_LINE_VERTICAL_OFFSET","floor","TREE_ELEMENT_HEIGHT","TreeNode","parent","children","rootElement","contentContainerElement","childrenContainerElement","treeNodeCreationController","display","getVisibleChildCount","visibleChildCount","child","getVisibleLeafCount","visibleLeafCount","addChild","createChildNodes","childKey","childValue","decodedChildKey","decodeURIComponent","escape","setRootElementStyle","setTitleElementStyle","createTreeNodeContentElements","setChildrenContainerElementStyle","isLeaf","setupLinesElements","height","childrenOffset","gridTemplateRows","gridTemplateColumns","verticalLineElement","color","gridColumn","gridRow","width","borderRight","horizontalLineElement","borderBottom","updateLines","totalVisibleLeafCount","bottomPosition","marginLeft","alignSelf","resetTitle","deepMode","createSpan","backgroundColor","borderRadius","createColoredSpan","markers","root","pos","marker","len","findLeafElement","filter","searchText","matchFunction","titleElement","toLowerCaseDeaccented","normalize","indexedFuzzySearchMatchFunction","lhs","lhsIndex","rhs","subWord","foundPos","btnTabVaultTabTreeView","divTabVaultTabTreeView","trvVaultTreeView","txtVaultTreeViewSearch","cboVaultTreeViewSearchType","rootTreeNode","searchMatchFunctionDescriptions","function","onSearchVaultInputChanged","searchMatchFunction","toLocaleLowerCase","VaultTreeNodeCreationController","maxTimestampInMilliseconds","passwordService","cipherService","buttonBackgroundColor","buttonStyle","getComputedStyle","runPassword","editPassword","runCipher","isPasswordObject","isCipherObject","isCiphersObject","sub","values","isHint","computeTimestampProgress","timestamp","now","getTime","dateToString","date","getFullYear","getMonth","getDate","createButton","grid","textSpan","timestampDiv","round","isLatest","lastModified","justifySelf","minWidth","setAttribute","editButton","label","div","btnTabVaultTabTextView","divTabVaultTabTextView","txtVault","VaultService","vaultComponent","divTabVault","btnTabVault","btnRefreshVault","btnClearVaultSettings","btnViewVaultSettings","onVaultLoaded","vault","populateSearchFunctions","e","components","subTabs","vaultObject","onRefreshVaultButtonClick","component","reloadVault","onClearVaultSettingsButtonClick","onViewVaultSettingsButtonClick","ErrorLogsService","errorLogsComponent","args","logErrorMessage","divErrorLogs","btnTabErrorLogs","btnClearErrorLogs","txtErrorLogs","dropdownIndex","findPasswordDropdownIndexByVersion","onChanged","type","startVisible","setupPasswordGeneratorsDropdown","onError","onUnhandledRejection","errorEvent","reason","pathArray","vaultService","tabControl"],"sourceRoot":""}